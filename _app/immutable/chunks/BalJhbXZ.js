import{f as z,a as $,c as Ks}from"./CEbVEvWq.js";import{o as Ko}from"./DG6bnxrc.js";import{h as Fe,d as Qo,b as Xo,J as w,a0 as ea,r as ta,H as ra,s as jn,e as Gr,f as Br,v as Kt,aa as na,au as sa,ae as Zn,k as Ue,t as an,x as ia,as as Qs,aM as Xs,o as ln,aF as oa,a8 as dr,aN as ei,aO as ti,aP as aa,am as la,aQ as ri,m as ni,p as ua,aR as $r,q as ca,aS as fa,ao as da,aT as ha,aU as ma,ar as pa,n as ga,aV as xn,V as ya,aW as si,aX as wa,aY as _a,y as va,aH as Ta,a as ii,W as oi,O as Ke,aJ as Pt,u as Ze,I as C,R as Qe,U as Z,S as V,K as T,T as P,Q as ae,P as br,af as hr,G as Sa,M as Ge,aZ as mr,a9 as We,aI as Ea}from"./DISrue0C.js";import{s as Se}from"./DHKgQpv7.js";import{i as le}from"./DqJZiQ1o.js";import{r as _t,s as De,a as Ia}from"./eICFcUV5.js";import{d as at,e as ai}from"./BWz26xft.js";import{t as ba,r as xa,s as pt,c as pr,a as Na}from"./DeimN4pl.js";import{b as li,a as Oa}from"./CEv-pqVm.js";import{p as Be,b as gr}from"./CepRIdbm.js";function Nn(r,e){return e}function ka(r,e,t){for(var n=[],s=e.length,i=0;i<s;i++)ha(e[i].e,n,!0);ma(n,()=>{var o=n.length===0&&t!==null;if(o){var a=t,l=a.parentNode;pa(l),l.append(a),r.items.clear(),Ce(r,e[0].prev,e[s-1].next)}for(var u=0;u<s;u++){var c=e[u];o||(r.items.delete(c.k),Ce(r,c.prev,c.next)),ga(c.e,!o)}r.first===e[0]&&(r.first=e[0].prev)})}function On(r,e,t,n,s,i=null){var o=r,a=new Map,l=null,u=(e&ri)!==0,c=(e&ti)!==0,f=(e&ei)!==0;if(u){var p=r;o=Fe?Gr(la(p)):p.appendChild(ln())}Fe&&Qo();var h=null,d=ea(()=>{var I=t();return Xs(I)?I:I==null?[]:Qs(I)}),g,m=!0;function y(){Aa(S,g,o,e,n),h!==null&&(g.length===0?(h.fragment?(o.before(h.fragment),h.fragment=null):ni(h.effect),E.first=h.effect):ua(h.effect,()=>{h=null}))}var E=Xo(()=>{g=w(d);var I=g.length;let b=!1;if(Fe){var F=ta(o)===ra;F!==(I===0)&&(o=jn(),Gr(o),Br(!1),b=!0)}for(var R=new Set,A=Ue,N=null,D=ia(),x=0;x<I;x+=1){Fe&&Kt.nodeType===na&&Kt.data===sa&&(o=Kt,b=!0,Br(!1));var B=g[x],k=n(B,x),M=m?null:a.get(k);M?(c&&Zn(M.v,B),f?Zn(M.i,x):M.i=x,D&&A.skipped_effects.delete(M.e)):(M=Ca(m?o:null,N,B,k,x,s,e,t),m&&(M.o=!0,N===null?l=M:N.next=M,N=M),a.set(k,M)),R.add(k)}if(I===0&&i&&!h)if(m)h={fragment:null,effect:an(()=>i(o))};else{var re=document.createDocumentFragment(),te=ln();re.append(te),h={fragment:re,effect:an(()=>i(te))}}if(Fe&&I>0&&Gr(jn()),!m)if(D){for(const[j,q]of a)R.has(j)||A.skipped_effects.add(q.e);A.oncommit(y),A.ondiscard(()=>{})}else y();b&&Br(!0),w(d)}),S={effect:E,items:a,first:l};m=!1,Fe&&(o=Kt)}function Aa(r,e,t,n,s){var i=(n&fa)!==0,o=e.length,a=r.items,l=r.first,u,c=null,f,p=[],h=[],d,g,m,y;if(i)for(y=0;y<o;y+=1)d=e[y],g=s(d,y),m=a.get(g),m.o&&(m.a?.measure(),(f??=new Set).add(m));for(y=0;y<o;y+=1){if(d=e[y],g=s(d,y),m=a.get(g),r.first??=m,!m.o){m.o=!0;var E=c?c.next:l;Ce(r,c,m),Ce(r,m,E),qr(m,E,t),c=m,p=[],h=[],l=c.next;continue}if((m.e.f&$r)!==0&&(ni(m.e),i&&(m.a?.unfix(),(f??=new Set).delete(m))),m!==l){if(u!==void 0&&u.has(m)){if(p.length<h.length){var S=h[0],I;c=S.prev;var b=p[0],F=p[p.length-1];for(I=0;I<p.length;I+=1)qr(p[I],S,t);for(I=0;I<h.length;I+=1)u.delete(h[I]);Ce(r,b.prev,F.next),Ce(r,c,b),Ce(r,F,S),l=S,c=F,y-=1,p=[],h=[]}else u.delete(m),qr(m,l,t),Ce(r,m.prev,m.next),Ce(r,m,c===null?r.first:c.next),Ce(r,c,m),c=m;continue}for(p=[],h=[];l!==null&&l.k!==g;)(l.e.f&$r)===0&&(u??=new Set).add(l),h.push(l),l=l.next;if(l===null)continue;m=l}p.push(m),c=m,l=m.next}if(l!==null||u!==void 0){for(var R=u===void 0?[]:Qs(u);l!==null;)(l.e.f&$r)===0&&R.push(l),l=l.next;var A=R.length;if(A>0){var N=(n&ri)!==0&&o===0?t:null;if(i){for(y=0;y<A;y+=1)R[y].a?.measure();for(y=0;y<A;y+=1)R[y].a?.fix()}ka(r,R,N)}}i&&ca(()=>{if(f!==void 0)for(m of f)m.a?.apply()})}function Ca(r,e,t,n,s,i,o,a){var l=(o&ti)!==0,u=(o&aa)===0,c=l?u?oa(t,!1,!1):dr(t):t,f=(o&ei)===0?s:dr(s),p={i:f,v:c,k:n,a:null,e:null,o:!1,prev:e,next:null};try{if(r===null){var h=document.createDocumentFragment();h.append(r=ln())}return p.e=an(()=>i(r,c,f,a)),e!==null&&(e.next=p),p}finally{}}function qr(r,e,t){for(var n=r.next?r.next.e.nodes_start:t,s=e?e.e.nodes_start:t,i=r.e.nodes_start;i!==null&&i!==n;){var o=da(i);s.before(i),i=o}}function Ce(r,e,t){e===null?(r.first=t,r.effect.first=t&&t.e):(e.e===r.effect.last&&t!==null&&(r.effect.last=t.e),e.e.next&&(e.e.next.prev=null),e.next=t,e.e.next=t&&t.e),t===null?r.effect.last=e&&e.e:(t.e===r.effect.last&&e===null&&(r.effect.last=t.e.prev),t.e.prev&&(t.e.prev.next=null),t.prev=e,t.e.prev=e&&e.e)}function Fa(r,e,t,n){var s=r.__style;if(Fe||s!==e){var i=ba(e);(!Fe||i!==r.getAttribute("style"))&&(i==null?r.removeAttribute("style"):r.style.cssText=i),r.__style=e}return n}function ui(r,e,t=!1){if(r.multiple){if(e==null)return;if(!Xs(e))return wa();for(var n of r.options)n.selected=e.includes(Lt(n));return}for(n of r.options){var s=Lt(n);if(_a(s,e)){n.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function Ra(r){var e=new MutationObserver(()=>{ui(r,r.__value)});e.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),va(()=>{e.disconnect()})}function Da(r,e,t=e){var n=new WeakSet,s=!0;xn(r,"change",i=>{var o=i?"[selected]":":checked",a;if(r.multiple)a=[].map.call(r.querySelectorAll(o),Lt);else{var l=r.querySelector(o)??r.querySelector("option:not([disabled])");a=l&&Lt(l)}t(a),Ue!==null&&n.add(Ue)}),ya(()=>{var i=e();if(r===document.activeElement){var o=si??Ue;if(n.has(o))return}if(ui(r,i,s),s&&i===void 0){var a=r.querySelector(":checked");a!==null&&(i=Lt(a),t(i))}r.__value=i,s=!1}),Ra(r)}function Lt(r){return"__value"in r?r.__value:r.value}function Vt(r,e,t=e){var n=new WeakSet;xn(r,"input",async s=>{var i=s?r.defaultValue:r.value;if(i=zr(r)?Wr(i):i,t(i),Ue!==null&&n.add(Ue),await Ta(),i!==(i=e())){var o=r.selectionStart,a=r.selectionEnd,l=r.value.length;if(r.value=i??"",a!==null){var u=r.value.length;o===a&&a===l&&u>l?(r.selectionStart=u,r.selectionEnd=u):(r.selectionStart=o,r.selectionEnd=Math.min(a,u))}}}),(Fe&&r.defaultValue!==r.value||ii(e)==null&&r.value)&&(t(zr(r)?Wr(r.value):r.value),Ue!==null&&n.add(Ue)),oi(()=>{var s=e();if(r===document.activeElement){var i=si??Ue;if(n.has(i))return}zr(r)&&s===Wr(r.value)||r.type==="date"&&!s&&!r.value||s!==r.value&&(r.value=s??"")})}function hh(r,e,t=e){xn(r,"change",n=>{var s=n?r.defaultChecked:r.checked;t(s)}),(Fe&&r.defaultChecked!==r.checked||ii(e)==null)&&t(r.checked),oi(()=>{var n=e();r.checked=!!n})}function zr(r){var e=r.type;return e==="number"||e==="range"}function Wr(r){return r===""?null:+r}function ci(r,e){return function(){return r.apply(e,arguments)}}const{toString:Ma}=Object.prototype,{getPrototypeOf:kn}=Object,{iterator:xr,toStringTag:fi}=Symbol,Nr=(r=>e=>{const t=Ma.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ke=r=>(r=r.toLowerCase(),e=>Nr(e)===r),Or=r=>e=>typeof e===r,{isArray:St}=Array,vt=Or("undefined");function $t(r){return r!==null&&!vt(r)&&r.constructor!==null&&!vt(r.constructor)&&pe(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const di=ke("ArrayBuffer");function La(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&di(r.buffer),e}const Ua=Or("string"),pe=Or("function"),hi=Or("number"),qt=r=>r!==null&&typeof r=="object",Pa=r=>r===!0||r===!1,ir=r=>{if(Nr(r)!=="object")return!1;const e=kn(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(fi in r)&&!(xr in r)},Va=r=>{if(!qt(r)||$t(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},Ga=ke("Date"),Ba=ke("File"),$a=ke("Blob"),qa=ke("FileList"),za=r=>qt(r)&&pe(r.pipe),Wa=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||pe(r.append)&&((e=Nr(r))==="formdata"||e==="object"&&pe(r.toString)&&r.toString()==="[object FormData]"))},Ha=ke("URLSearchParams"),[ja,Za,Ja,Ya]=["ReadableStream","Request","Response","Headers"].map(ke),Ka=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function zt(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,s;if(typeof r!="object"&&(r=[r]),St(r))for(n=0,s=r.length;n<s;n++)e.call(null,r[n],n,r);else{if($t(r))return;const i=t?Object.getOwnPropertyNames(r):Object.keys(r),o=i.length;let a;for(n=0;n<o;n++)a=i[n],e.call(null,r[a],a,r)}}function mi(r,e){if($t(r))return null;e=e.toLowerCase();const t=Object.keys(r);let n=t.length,s;for(;n-- >0;)if(s=t[n],e===s.toLowerCase())return s;return null}const tt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pi=r=>!vt(r)&&r!==tt;function un(){const{caseless:r,skipUndefined:e}=pi(this)&&this||{},t={},n=(s,i)=>{const o=r&&mi(t,i)||i;ir(t[o])&&ir(s)?t[o]=un(t[o],s):ir(s)?t[o]=un({},s):St(s)?t[o]=s.slice():(!e||!vt(s))&&(t[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&zt(arguments[s],n);return t}const Qa=(r,e,t,{allOwnKeys:n}={})=>(zt(e,(s,i)=>{t&&pe(s)?r[i]=ci(s,t):r[i]=s},{allOwnKeys:n}),r),Xa=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),el=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},tl=(r,e,t,n)=>{let s,i,o;const a={};if(e=e||{},r==null)return e;do{for(s=Object.getOwnPropertyNames(r),i=s.length;i-- >0;)o=s[i],(!n||n(o,r,e))&&!a[o]&&(e[o]=r[o],a[o]=!0);r=t!==!1&&kn(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},rl=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const n=r.indexOf(e,t);return n!==-1&&n===t},nl=r=>{if(!r)return null;if(St(r))return r;let e=r.length;if(!hi(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},sl=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&kn(Uint8Array)),il=(r,e)=>{const n=(r&&r[xr]).call(r);let s;for(;(s=n.next())&&!s.done;){const i=s.value;e.call(r,i[0],i[1])}},ol=(r,e)=>{let t;const n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},al=ke("HTMLFormElement"),ll=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,s){return n.toUpperCase()+s}),Jn=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),ul=ke("RegExp"),gi=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),n={};zt(t,(s,i)=>{let o;(o=e(s,i,r))!==!1&&(n[i]=o||s)}),Object.defineProperties(r,n)},cl=r=>{gi(r,(e,t)=>{if(pe(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=r[t];if(pe(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},fl=(r,e)=>{const t={},n=s=>{s.forEach(i=>{t[i]=!0})};return St(r)?n(r):n(String(r).split(e)),t},dl=()=>{},hl=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function ml(r){return!!(r&&pe(r.append)&&r[fi]==="FormData"&&r[xr])}const pl=r=>{const e=new Array(10),t=(n,s)=>{if(qt(n)){if(e.indexOf(n)>=0)return;if($t(n))return n;if(!("toJSON"in n)){e[s]=n;const i=St(n)?[]:{};return zt(n,(o,a)=>{const l=t(o,s+1);!vt(l)&&(i[a]=l)}),e[s]=void 0,i}}return n};return t(r,0)},gl=ke("AsyncFunction"),yl=r=>r&&(qt(r)||pe(r))&&pe(r.then)&&pe(r.catch),yi=((r,e)=>r?setImmediate:e?((t,n)=>(tt.addEventListener("message",({source:s,data:i})=>{s===tt&&i===t&&n.length&&n.shift()()},!1),s=>{n.push(s),tt.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",pe(tt.postMessage)),wl=typeof queueMicrotask<"u"?queueMicrotask.bind(tt):typeof process<"u"&&process.nextTick||yi,_l=r=>r!=null&&pe(r[xr]),_={isArray:St,isArrayBuffer:di,isBuffer:$t,isFormData:Wa,isArrayBufferView:La,isString:Ua,isNumber:hi,isBoolean:Pa,isObject:qt,isPlainObject:ir,isEmptyObject:Va,isReadableStream:ja,isRequest:Za,isResponse:Ja,isHeaders:Ya,isUndefined:vt,isDate:Ga,isFile:Ba,isBlob:$a,isRegExp:ul,isFunction:pe,isStream:za,isURLSearchParams:Ha,isTypedArray:sl,isFileList:qa,forEach:zt,merge:un,extend:Qa,trim:Ka,stripBOM:Xa,inherits:el,toFlatObject:tl,kindOf:Nr,kindOfTest:ke,endsWith:rl,toArray:nl,forEachEntry:il,matchAll:ol,isHTMLForm:al,hasOwnProperty:Jn,hasOwnProp:Jn,reduceDescriptors:gi,freezeMethods:cl,toObjectSet:fl,toCamelCase:ll,noop:dl,toFiniteNumber:hl,findKey:mi,global:tt,isContextDefined:pi,isSpecCompliantForm:ml,toJSONObject:pl,isAsyncFn:gl,isThenable:yl,setImmediate:yi,asap:wl,isIterable:_l};function G(r,e,t,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}_.inherits(G,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_.toJSONObject(this.config),code:this.code,status:this.status}}});const wi=G.prototype,_i={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{_i[r]={value:r}});Object.defineProperties(G,_i);Object.defineProperty(wi,"isAxiosError",{value:!0});G.from=(r,e,t,n,s,i)=>{const o=Object.create(wi);_.toFlatObject(r,o,function(c){return c!==Error.prototype},u=>u!=="isAxiosError");const a=r&&r.message?r.message:"Error",l=e==null&&r?r.code:e;return G.call(o,a,l,t,n,s),r&&o.cause==null&&Object.defineProperty(o,"cause",{value:r,configurable:!0}),o.name=r&&r.name||"Error",i&&Object.assign(o,i),o};const vl=null;function cn(r){return _.isPlainObject(r)||_.isArray(r)}function vi(r){return _.endsWith(r,"[]")?r.slice(0,-2):r}function Yn(r,e,t){return r?r.concat(e).map(function(s,i){return s=vi(s),!t&&i?"["+s+"]":s}).join(t?".":""):e}function Tl(r){return _.isArray(r)&&!r.some(cn)}const Sl=_.toFlatObject(_,{},null,function(e){return/^is[A-Z]/.test(e)});function kr(r,e,t){if(!_.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=_.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,m){return!_.isUndefined(m[g])});const n=t.metaTokens,s=t.visitor||c,i=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&_.isSpecCompliantForm(e);if(!_.isFunction(s))throw new TypeError("visitor must be a function");function u(d){if(d===null)return"";if(_.isDate(d))return d.toISOString();if(_.isBoolean(d))return d.toString();if(!l&&_.isBlob(d))throw new G("Blob is not supported. Use a Buffer instead.");return _.isArrayBuffer(d)||_.isTypedArray(d)?l&&typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function c(d,g,m){let y=d;if(d&&!m&&typeof d=="object"){if(_.endsWith(g,"{}"))g=n?g:g.slice(0,-2),d=JSON.stringify(d);else if(_.isArray(d)&&Tl(d)||(_.isFileList(d)||_.endsWith(g,"[]"))&&(y=_.toArray(d)))return g=vi(g),y.forEach(function(S,I){!(_.isUndefined(S)||S===null)&&e.append(o===!0?Yn([g],I,i):o===null?g:g+"[]",u(S))}),!1}return cn(d)?!0:(e.append(Yn(m,g,i),u(d)),!1)}const f=[],p=Object.assign(Sl,{defaultVisitor:c,convertValue:u,isVisitable:cn});function h(d,g){if(!_.isUndefined(d)){if(f.indexOf(d)!==-1)throw Error("Circular reference detected in "+g.join("."));f.push(d),_.forEach(d,function(y,E){(!(_.isUndefined(y)||y===null)&&s.call(e,y,_.isString(E)?E.trim():E,g,p))===!0&&h(y,g?g.concat(E):[E])}),f.pop()}}if(!_.isObject(r))throw new TypeError("data must be an object");return h(r),e}function Kn(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function An(r,e){this._pairs=[],r&&kr(r,this,e)}const Ti=An.prototype;Ti.append=function(e,t){this._pairs.push([e,t])};Ti.toString=function(e){const t=e?function(n){return e.call(this,n,Kn)}:Kn;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function El(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Si(r,e,t){if(!e)return r;const n=t&&t.encode||El;_.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let i;if(s?i=s(e,t):i=_.isURLSearchParams(e)?e.toString():new An(e,t).toString(n),i){const o=r.indexOf("#");o!==-1&&(r=r.slice(0,o)),r+=(r.indexOf("?")===-1?"?":"&")+i}return r}class Qn{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){_.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Ei={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Il=typeof URLSearchParams<"u"?URLSearchParams:An,bl=typeof FormData<"u"?FormData:null,xl=typeof Blob<"u"?Blob:null,Nl={isBrowser:!0,classes:{URLSearchParams:Il,FormData:bl,Blob:xl},protocols:["http","https","file","blob","url","data"]},Cn=typeof window<"u"&&typeof document<"u",fn=typeof navigator=="object"&&navigator||void 0,Ol=Cn&&(!fn||["ReactNative","NativeScript","NS"].indexOf(fn.product)<0),kl=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Al=Cn&&window.location.href||"http://localhost",Cl=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Cn,hasStandardBrowserEnv:Ol,hasStandardBrowserWebWorkerEnv:kl,navigator:fn,origin:Al},Symbol.toStringTag,{value:"Module"})),fe={...Cl,...Nl};function Fl(r,e){return kr(r,new fe.classes.URLSearchParams,{visitor:function(t,n,s,i){return fe.isNode&&_.isBuffer(t)?(this.append(n,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function Rl(r){return _.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Dl(r){const e={},t=Object.keys(r);let n;const s=t.length;let i;for(n=0;n<s;n++)i=t[n],e[i]=r[i];return e}function Ii(r){function e(t,n,s,i){let o=t[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=t.length;return o=!o&&_.isArray(s)?s.length:o,l?(_.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!a):((!s[o]||!_.isObject(s[o]))&&(s[o]=[]),e(t,n,s[o],i)&&_.isArray(s[o])&&(s[o]=Dl(s[o])),!a)}if(_.isFormData(r)&&_.isFunction(r.entries)){const t={};return _.forEachEntry(r,(n,s)=>{e(Rl(n),s,t,0)}),t}return null}function Ml(r,e,t){if(_.isString(r))try{return(e||JSON.parse)(r),_.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}const Wt={transitional:Ei,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,i=_.isObject(e);if(i&&_.isHTMLForm(e)&&(e=new FormData(e)),_.isFormData(e))return s?JSON.stringify(Ii(e)):e;if(_.isArrayBuffer(e)||_.isBuffer(e)||_.isStream(e)||_.isFile(e)||_.isBlob(e)||_.isReadableStream(e))return e;if(_.isArrayBufferView(e))return e.buffer;if(_.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Fl(e,this.formSerializer).toString();if((a=_.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return kr(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(t.setContentType("application/json",!1),Ml(e)):e}],transformResponse:[function(e){const t=this.transitional||Wt.transitional,n=t&&t.forcedJSONParsing,s=this.responseType==="json";if(_.isResponse(e)||_.isReadableStream(e))return e;if(e&&_.isString(e)&&(n&&!this.responseType||s)){const o=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?G.from(a,G.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fe.classes.FormData,Blob:fe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_.forEach(["delete","get","head","post","put","patch"],r=>{Wt.headers[r]={}});const Ll=_.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ul=r=>{const e={};let t,n,s;return r&&r.split(`
`).forEach(function(o){s=o.indexOf(":"),t=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!t||e[t]&&Ll[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},Xn=Symbol("internals");function Ct(r){return r&&String(r).trim().toLowerCase()}function or(r){return r===!1||r==null?r:_.isArray(r)?r.map(or):String(r)}function Pl(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}const Vl=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function Hr(r,e,t,n,s){if(_.isFunction(n))return n.call(this,e,t);if(s&&(e=t),!!_.isString(e)){if(_.isString(n))return e.indexOf(n)!==-1;if(_.isRegExp(n))return n.test(e)}}function Gl(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function Bl(r,e){const t=_.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(s,i,o){return this[n].call(this,e,s,i,o)},configurable:!0})})}let ge=class{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function i(a,l,u){const c=Ct(l);if(!c)throw new Error("header name must be a non-empty string");const f=_.findKey(s,c);(!f||s[f]===void 0||u===!0||u===void 0&&s[f]!==!1)&&(s[f||l]=or(a))}const o=(a,l)=>_.forEach(a,(u,c)=>i(u,c,l));if(_.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(_.isString(e)&&(e=e.trim())&&!Vl(e))o(Ul(e),t);else if(_.isObject(e)&&_.isIterable(e)){let a={},l,u;for(const c of e){if(!_.isArray(c))throw TypeError("Object iterator must return a key-value pair");a[u=c[0]]=(l=a[u])?_.isArray(l)?[...l,c[1]]:[l,c[1]]:c[1]}o(a,t)}else e!=null&&i(t,e,n);return this}get(e,t){if(e=Ct(e),e){const n=_.findKey(this,e);if(n){const s=this[n];if(!t)return s;if(t===!0)return Pl(s);if(_.isFunction(t))return t.call(this,s,n);if(_.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ct(e),e){const n=_.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Hr(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let s=!1;function i(o){if(o=Ct(o),o){const a=_.findKey(n,o);a&&(!t||Hr(n,n[a],a,t))&&(delete n[a],s=!0)}}return _.isArray(e)?e.forEach(i):i(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const i=t[n];(!e||Hr(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const t=this,n={};return _.forEach(this,(s,i)=>{const o=_.findKey(n,i);if(o){t[o]=or(s),delete t[i];return}const a=e?Gl(i):String(i).trim();a!==i&&delete t[i],t[a]=or(s),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return _.forEach(this,(n,s)=>{n!=null&&n!==!1&&(t[s]=e&&_.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[Xn]=this[Xn]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=Ct(o);n[a]||(Bl(s,o),n[a]=!0)}return _.isArray(e)?e.forEach(i):i(e),this}};ge.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_.reduceDescriptors(ge.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(n){this[t]=n}}});_.freezeMethods(ge);function jr(r,e){const t=this||Wt,n=e||t,s=ge.from(n.headers);let i=n.data;return _.forEach(r,function(a){i=a.call(t,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function bi(r){return!!(r&&r.__CANCEL__)}function Et(r,e,t){G.call(this,r??"canceled",G.ERR_CANCELED,e,t),this.name="CanceledError"}_.inherits(Et,G,{__CANCEL__:!0});function xi(r,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new G("Request failed with status code "+t.status,[G.ERR_BAD_REQUEST,G.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function $l(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function ql(r,e){r=r||10;const t=new Array(r),n=new Array(r);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=n[i];o||(o=u),t[s]=l,n[s]=u;let f=i,p=0;for(;f!==s;)p+=t[f++],f=f%r;if(s=(s+1)%r,s===i&&(i=(i+1)%r),u-o<e)return;const h=c&&u-c;return h?Math.round(p*1e3/h):void 0}}function zl(r,e){let t=0,n=1e3/e,s,i;const o=(u,c=Date.now())=>{t=c,s=null,i&&(clearTimeout(i),i=null),r(...u)};return[(...u)=>{const c=Date.now(),f=c-t;f>=n?o(u,c):(s=u,i||(i=setTimeout(()=>{i=null,o(s)},n-f)))},()=>s&&o(s)]}const yr=(r,e,t=3)=>{let n=0;const s=ql(50,250);return zl(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-n,u=s(l),c=o<=a;n=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&c?(a-o)/u:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};r(f)},t)},es=(r,e)=>{const t=r!=null;return[n=>e[0]({lengthComputable:t,total:r,loaded:n}),e[1]]},ts=r=>(...e)=>_.asap(()=>r(...e)),Wl=fe.hasStandardBrowserEnv?((r,e)=>t=>(t=new URL(t,fe.origin),r.protocol===t.protocol&&r.host===t.host&&(e||r.port===t.port)))(new URL(fe.origin),fe.navigator&&/(msie|trident)/i.test(fe.navigator.userAgent)):()=>!0,Hl=fe.hasStandardBrowserEnv?{write(r,e,t,n,s,i,o){if(typeof document>"u")return;const a=[`${r}=${encodeURIComponent(e)}`];_.isNumber(t)&&a.push(`expires=${new Date(t).toUTCString()}`),_.isString(n)&&a.push(`path=${n}`),_.isString(s)&&a.push(`domain=${s}`),i===!0&&a.push("secure"),_.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(r){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function jl(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function Zl(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function Ni(r,e,t){let n=!jl(e);return r&&(n||t==!1)?Zl(r,e):e}const rs=r=>r instanceof ge?{...r}:r;function ot(r,e){e=e||{};const t={};function n(u,c,f,p){return _.isPlainObject(u)&&_.isPlainObject(c)?_.merge.call({caseless:p},u,c):_.isPlainObject(c)?_.merge({},c):_.isArray(c)?c.slice():c}function s(u,c,f,p){if(_.isUndefined(c)){if(!_.isUndefined(u))return n(void 0,u,f,p)}else return n(u,c,f,p)}function i(u,c){if(!_.isUndefined(c))return n(void 0,c)}function o(u,c){if(_.isUndefined(c)){if(!_.isUndefined(u))return n(void 0,u)}else return n(void 0,c)}function a(u,c,f){if(f in e)return n(u,c);if(f in r)return n(void 0,u)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,c,f)=>s(rs(u),rs(c),f,!0)};return _.forEach(Object.keys({...r,...e}),function(c){const f=l[c]||s,p=f(r[c],e[c],c);_.isUndefined(p)&&f!==a||(t[c]=p)}),t}const Oi=r=>{const e=ot({},r);let{data:t,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;if(e.headers=o=ge.from(o),e.url=Si(Ni(e.baseURL,e.url,e.allowAbsoluteUrls),r.params,r.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),_.isFormData(t)){if(fe.hasStandardBrowserEnv||fe.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(_.isFunction(t.getHeaders)){const l=t.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([c,f])=>{u.includes(c.toLowerCase())&&o.set(c,f)})}}if(fe.hasStandardBrowserEnv&&(n&&_.isFunction(n)&&(n=n(e)),n||n!==!1&&Wl(e.url))){const l=s&&i&&Hl.read(i);l&&o.set(s,l)}return e},Jl=typeof XMLHttpRequest<"u",Yl=Jl&&function(r){return new Promise(function(t,n){const s=Oi(r);let i=s.data;const o=ge.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=s,c,f,p,h,d;function g(){h&&h(),d&&d(),s.cancelToken&&s.cancelToken.unsubscribe(c),s.signal&&s.signal.removeEventListener("abort",c)}let m=new XMLHttpRequest;m.open(s.method.toUpperCase(),s.url,!0),m.timeout=s.timeout;function y(){if(!m)return;const S=ge.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),b={data:!a||a==="text"||a==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:S,config:r,request:m};xi(function(R){t(R),g()},function(R){n(R),g()},b),m=null}"onloadend"in m?m.onloadend=y:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(y)},m.onabort=function(){m&&(n(new G("Request aborted",G.ECONNABORTED,r,m)),m=null)},m.onerror=function(I){const b=I&&I.message?I.message:"Network Error",F=new G(b,G.ERR_NETWORK,r,m);F.event=I||null,n(F),m=null},m.ontimeout=function(){let I=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const b=s.transitional||Ei;s.timeoutErrorMessage&&(I=s.timeoutErrorMessage),n(new G(I,b.clarifyTimeoutError?G.ETIMEDOUT:G.ECONNABORTED,r,m)),m=null},i===void 0&&o.setContentType(null),"setRequestHeader"in m&&_.forEach(o.toJSON(),function(I,b){m.setRequestHeader(b,I)}),_.isUndefined(s.withCredentials)||(m.withCredentials=!!s.withCredentials),a&&a!=="json"&&(m.responseType=s.responseType),u&&([p,d]=yr(u,!0),m.addEventListener("progress",p)),l&&m.upload&&([f,h]=yr(l),m.upload.addEventListener("progress",f),m.upload.addEventListener("loadend",h)),(s.cancelToken||s.signal)&&(c=S=>{m&&(n(!S||S.type?new Et(null,r,m):S),m.abort(),m=null)},s.cancelToken&&s.cancelToken.subscribe(c),s.signal&&(s.signal.aborted?c():s.signal.addEventListener("abort",c)));const E=$l(s.url);if(E&&fe.protocols.indexOf(E)===-1){n(new G("Unsupported protocol "+E+":",G.ERR_BAD_REQUEST,r));return}m.send(i||null)})},Kl=(r,e)=>{const{length:t}=r=r?r.filter(Boolean):[];if(e||t){let n=new AbortController,s;const i=function(u){if(!s){s=!0,a();const c=u instanceof Error?u:this.reason;n.abort(c instanceof G?c:new Et(c instanceof Error?c.message:c))}};let o=e&&setTimeout(()=>{o=null,i(new G(`timeout ${e} of ms exceeded`,G.ETIMEDOUT))},e);const a=()=>{r&&(o&&clearTimeout(o),o=null,r.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),r=null)};r.forEach(u=>u.addEventListener("abort",i));const{signal:l}=n;return l.unsubscribe=()=>_.asap(a),l}},Ql=function*(r,e){let t=r.byteLength;if(t<e){yield r;return}let n=0,s;for(;n<t;)s=n+e,yield r.slice(n,s),n=s},Xl=async function*(r,e){for await(const t of eu(r))yield*Ql(t,e)},eu=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},ns=(r,e,t,n)=>{const s=Xl(r,e);let i=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await s.next();if(u){a(),l.close();return}let f=c.byteLength;if(t){let p=i+=f;t(p)}l.enqueue(new Uint8Array(c))}catch(u){throw a(u),u}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},ss=64*1024,{isFunction:Qt}=_,tu=(({Request:r,Response:e})=>({Request:r,Response:e}))(_.global),{ReadableStream:is,TextEncoder:os}=_.global,as=(r,...e)=>{try{return!!r(...e)}catch{return!1}},ru=r=>{r=_.merge.call({skipUndefined:!0},tu,r);const{fetch:e,Request:t,Response:n}=r,s=e?Qt(e):typeof fetch=="function",i=Qt(t),o=Qt(n);if(!s)return!1;const a=s&&Qt(is),l=s&&(typeof os=="function"?(d=>g=>d.encode(g))(new os):async d=>new Uint8Array(await new t(d).arrayBuffer())),u=i&&a&&as(()=>{let d=!1;const g=new t(fe.origin,{body:new is,method:"POST",get duplex(){return d=!0,"half"}}).headers.has("Content-Type");return d&&!g}),c=o&&a&&as(()=>_.isReadableStream(new n("").body)),f={stream:c&&(d=>d.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(d=>{!f[d]&&(f[d]=(g,m)=>{let y=g&&g[d];if(y)return y.call(g);throw new G(`Response type '${d}' is not supported`,G.ERR_NOT_SUPPORT,m)})});const p=async d=>{if(d==null)return 0;if(_.isBlob(d))return d.size;if(_.isSpecCompliantForm(d))return(await new t(fe.origin,{method:"POST",body:d}).arrayBuffer()).byteLength;if(_.isArrayBufferView(d)||_.isArrayBuffer(d))return d.byteLength;if(_.isURLSearchParams(d)&&(d=d+""),_.isString(d))return(await l(d)).byteLength},h=async(d,g)=>{const m=_.toFiniteNumber(d.getContentLength());return m??p(g)};return async d=>{let{url:g,method:m,data:y,signal:E,cancelToken:S,timeout:I,onDownloadProgress:b,onUploadProgress:F,responseType:R,headers:A,withCredentials:N="same-origin",fetchOptions:D}=Oi(d),x=e||fetch;R=R?(R+"").toLowerCase():"text";let B=Kl([E,S&&S.toAbortSignal()],I),k=null;const M=B&&B.unsubscribe&&(()=>{B.unsubscribe()});let re;try{if(F&&u&&m!=="get"&&m!=="head"&&(re=await h(A,y))!==0){let ee=new t(g,{method:"POST",body:y,duplex:"half"}),X;if(_.isFormData(y)&&(X=ee.headers.get("content-type"))&&A.setContentType(X),ee.body){const[he,ut]=es(re,yr(ts(F)));y=ns(ee.body,ss,he,ut)}}_.isString(N)||(N=N?"include":"omit");const te=i&&"credentials"in t.prototype,j={...D,signal:B,method:m.toUpperCase(),headers:A.normalize().toJSON(),body:y,duplex:"half",credentials:te?N:void 0};k=i&&new t(g,j);let q=await(i?x(k,D):x(g,j));const ne=c&&(R==="stream"||R==="response");if(c&&(b||ne&&M)){const ee={};["status","statusText","headers"].forEach(Hn=>{ee[Hn]=q[Hn]});const X=_.toFiniteNumber(q.headers.get("content-length")),[he,ut]=b&&es(X,yr(ts(b),!0))||[];q=new n(ns(q.body,ss,he,()=>{ut&&ut(),M&&M()}),ee)}R=R||"text";let Q=await f[_.findKey(f,R)||"text"](q,d);return!ne&&M&&M(),await new Promise((ee,X)=>{xi(ee,X,{data:Q,headers:ge.from(q.headers),status:q.status,statusText:q.statusText,config:d,request:k})})}catch(te){throw M&&M(),te&&te.name==="TypeError"&&/Load failed|fetch/i.test(te.message)?Object.assign(new G("Network Error",G.ERR_NETWORK,d,k),{cause:te.cause||te}):G.from(te,te&&te.code,d,k)}}},nu=new Map,ki=r=>{let e=r&&r.env||{};const{fetch:t,Request:n,Response:s}=e,i=[n,s,t];let o=i.length,a=o,l,u,c=nu;for(;a--;)l=i[a],u=c.get(l),u===void 0&&c.set(l,u=a?new Map:ru(e)),c=u;return u};ki();const Fn={http:vl,xhr:Yl,fetch:{get:ki}};_.forEach(Fn,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const ls=r=>`- ${r}`,su=r=>_.isFunction(r)||r===null||r===!1;function iu(r,e){r=_.isArray(r)?r:[r];const{length:t}=r;let n,s;const i={};for(let o=0;o<t;o++){n=r[o];let a;if(s=n,!su(n)&&(s=Fn[(a=String(n)).toLowerCase()],s===void 0))throw new G(`Unknown adapter '${a}'`);if(s&&(_.isFunction(s)||(s=s.get(e))))break;i[a||"#"+o]=s}if(!s){const o=Object.entries(i).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=t?o.length>1?`since :
`+o.map(ls).join(`
`):" "+ls(o[0]):"as no adapter specified";throw new G("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s}const Ai={getAdapter:iu,adapters:Fn};function Zr(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Et(null,r)}function us(r){return Zr(r),r.headers=ge.from(r.headers),r.data=jr.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),Ai.getAdapter(r.adapter||Wt.adapter,r)(r).then(function(n){return Zr(r),n.data=jr.call(r,r.transformResponse,n),n.headers=ge.from(n.headers),n},function(n){return bi(n)||(Zr(r),n&&n.response&&(n.response.data=jr.call(r,r.transformResponse,n.response),n.response.headers=ge.from(n.response.headers))),Promise.reject(n)})}const Ci="1.13.2",Ar={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{Ar[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});const cs={};Ar.transitional=function(e,t,n){function s(i,o){return"[Axios v"+Ci+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,a)=>{if(e===!1)throw new G(s(o," has been removed"+(t?" in "+t:"")),G.ERR_DEPRECATED);return t&&!cs[o]&&(cs[o]=!0,console.warn(s(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(i,o,a):!0}};Ar.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function ou(r,e,t){if(typeof r!="object")throw new G("options must be an object",G.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let s=n.length;for(;s-- >0;){const i=n[s],o=e[i];if(o){const a=r[i],l=a===void 0||o(a,i,r);if(l!==!0)throw new G("option "+i+" must be "+l,G.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new G("Unknown option "+i,G.ERR_BAD_OPTION)}}const ar={assertOptions:ou,validators:Ar},Ae=ar.validators;let st=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Qn,response:new Qn}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ot(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:i}=t;n!==void 0&&ar.assertOptions(n,{silentJSONParsing:Ae.transitional(Ae.boolean),forcedJSONParsing:Ae.transitional(Ae.boolean),clarifyTimeoutError:Ae.transitional(Ae.boolean)},!1),s!=null&&(_.isFunction(s)?t.paramsSerializer={serialize:s}:ar.assertOptions(s,{encode:Ae.function,serialize:Ae.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ar.assertOptions(t,{baseUrl:Ae.spelling("baseURL"),withXsrfToken:Ae.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&_.merge(i.common,i[t.method]);i&&_.forEach(["delete","get","head","post","put","patch","common"],d=>{delete i[d]}),t.headers=ge.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(t)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let c,f=0,p;if(!l){const d=[us.bind(this),void 0];for(d.unshift(...a),d.push(...u),p=d.length,c=Promise.resolve(t);f<p;)c=c.then(d[f++],d[f++]);return c}p=a.length;let h=t;for(;f<p;){const d=a[f++],g=a[f++];try{h=d(h)}catch(m){g.call(this,m);break}}try{c=us.call(this,h)}catch(d){return Promise.reject(d)}for(f=0,p=u.length;f<p;)c=c.then(u[f++],u[f++]);return c}getUri(e){e=ot(this.defaults,e);const t=Ni(e.baseURL,e.url,e.allowAbsoluteUrls);return Si(t,e.params,e.paramsSerializer)}};_.forEach(["delete","get","head","options"],function(e){st.prototype[e]=function(t,n){return this.request(ot(n||{},{method:e,url:t,data:(n||{}).data}))}});_.forEach(["post","put","patch"],function(e){function t(n){return function(i,o,a){return this.request(ot(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}st.prototype[e]=t(),st.prototype[e+"Form"]=t(!0)});let au=class Fi{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{n.subscribe(a),i=a}).then(s);return o.cancel=function(){n.unsubscribe(i)},o},e(function(i,o,a){n.reason||(n.reason=new Et(i,o,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Fi(function(s){e=s}),cancel:e}}};function lu(r){return function(t){return r.apply(null,t)}}function uu(r){return _.isObject(r)&&r.isAxiosError===!0}const dn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(dn).forEach(([r,e])=>{dn[e]=r});function Ri(r){const e=new st(r),t=ci(st.prototype.request,e);return _.extend(t,st.prototype,e,{allOwnKeys:!0}),_.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return Ri(ot(r,s))},t}const H=Ri(Wt);H.Axios=st;H.CanceledError=Et;H.CancelToken=au;H.isCancel=bi;H.VERSION=Ci;H.toFormData=kr;H.AxiosError=G;H.Cancel=H.CanceledError;H.all=function(e){return Promise.all(e)};H.spread=lu;H.isAxiosError=uu;H.mergeConfig=ot;H.AxiosHeaders=ge;H.formToJSON=r=>Ii(_.isHTMLForm(r)?new FormData(r):r);H.getAdapter=Ai.getAdapter;H.HttpStatusCode=dn;H.default=H;const{Axios:gh,AxiosError:cu,CanceledError:yh,isCancel:wh,CancelToken:_h,VERSION:vh,all:Th,Cancel:Sh,isAxiosError:Eh,spread:Ih,toFormData:bh,AxiosHeaders:xh,HttpStatusCode:Nh,formToJSON:Oh,getAdapter:kh,mergeConfig:Ah}=H;var fu=z('<div class="uno-s7xk7x"><p class="uno-4va6wa">API access validated successfully</p> <button class="uno-agpg8z" type="button">Reset Credentials</button></div>'),du=z('<p class="uno-u9jn4q"> </p>'),hu=z('<p class="uno-4va6wa">Validating...</p>'),mu=z(`<p class="uno-4va6wa">Enter your client ID and secret to validate your access to the WeebDex API.</p> <a class="uno-6gsfuc">If you're having trouble, click here for the relevant tutorial & docs section (opens in new
			tab). <span class="uno-y4k52q"></span></a> <div class="uno-yjitzg"><div class="uno-bw7us0"><label for="client-id-input" class="uno-4va6wa">Client ID:</label> <input id="client-id-input" type="text" placeholder="Enter your client ID" class="uno-p6q3um"/></div> <div class="uno-bw7us0"><label for="client-secret-input" class="uno-4va6wa">Client Secret:</label> <input id="client-secret-input" type="password" placeholder="Enter your client secret" class="uno-p6q3um"/></div> <a href="https://weebdex.org/settings/client" target="_blank" class="uno-u60vko">Create a new client ID and secret (you need to be logged in to Weebdex) <span class="uno-vdh3h5"></span></a></div> <button class="uno-agpg8z" type="button">Validate API Access</button> <!> <!>`,1),pu=z('<div class="uno-k9mq5k"><h2 class="uno-pol42v">API Authentication</h2> <!></div>');function Ch(r,e){Ke(e,!0);const t="weebdex_api_token",n="https://api.weebdex.org/upload/check-approval-required",s="https://api.weebdex.org/auth/check?xhr=1",i=Pt(li);if(!i)throw new Error("TargetingAuthValidator must be used within a component that provides ApiAuthContext context");let o=C(""),a=C(""),l=C(!1),u=C(!1),c=C(null);Ko(()=>{if(typeof window<"u"){const b=sessionStorage.getItem(t);if(b){i.apiToken=b;const F=b.split(":");F.length===2&&(T(o,F[0],!0),T(a,F[1],!0))}}i.apiToken&&d(i.apiToken)}),Ze(()=>{const b=i.apiToken;b&&w(l)&&!i.userIdentity&&h(b)});function f(b){i.apiToken=b,typeof window<"u"&&(b?sessionStorage.setItem(t,b):sessionStorage.removeItem(t))}function p(b){return`Bearer ${b}`}async function h(b){try{const R=(await H.get(s,{headers:{Authorization:p(b)}})).data;if(!R.identity||!R.identity.id||!R.identity.username){console.error("Invalid auth check response: missing or invalid identity field");return}for(const A of R.groups??[]){if(!A.id||!A.name){console.error("Invalid auth check response: groups must have id and name fields");return}if(!A.relationships||!Array.isArray(A.relationships.members)){console.error("Invalid auth check response: groups must have relationships.members array");return}}i.userIdentity=R.identity,i.userGroups=R.groups??[]}catch(F){console.error("Failed to fetch auth check:",F)}}async function d(b){if(!b){T(c,"Please enter a client ID and secret");return}T(u,!0),T(c,null);try{const F=await H.post(n,{language:"en"},{headers:{Authorization:p(b)}});F.status===204?(f(b),T(l,!0),T(c,null),await h(b)):F.status===200?(T(c,"You do not yet have any uploaded chapters. Please manually upload your first chapter and wait for approval"),f(null),T(l,!1),i.userIdentity=null,i.userGroups=[]):(T(c,`Validation failed: ${F.status} ${F.statusText}`),f(null),T(l,!1),i.userIdentity=null,i.userGroups=[])}catch(F){T(c,F instanceof Error?F.message:"Failed to validate API access",!0),f(null),T(l,!1),i.userIdentity=null,i.userGroups=[]}finally{T(u,!1)}}function g(){f(null),T(o,""),T(a,""),T(c,null),T(l,!1),i.userIdentity=null,i.userGroups=[]}function m(){const b=w(o).trim(),F=w(a).trim();return!b||!F?null:`${b}:${F}`}var y=pu(),E=Z(V(y),2);{var S=b=>{var F=fu(),R=Z(V(F),2);R.__click=g,P(F),ae(()=>R.disabled=w(u)),$(b,F)},I=b=>{var F=mu(),R=Z(br(F),2),A=Z(R,2),N=V(A),D=Z(V(N),2);_t(D),P(N);var x=Z(N,2),B=Z(V(x),2);_t(B),P(x),hr(2),P(A);var k=Z(A,2);k.__click=()=>d(m());var M=Z(k,2);{var re=q=>{var ne=du(),Q=V(ne,!0);P(ne),ae(()=>Se(Q,w(c))),$(q,ne)};le(M,q=>{w(c)&&q(re)})}var te=Z(M,2);{var j=q=>{var ne=hu();$(q,ne)};le(te,q=>{w(u)&&q(j)})}ae(q=>{De(R,"href",q),D.disabled=w(u),B.disabled=w(u),k.disabled=w(u)},[()=>`${xa("/docs")}#api-token-where`]),Vt(D,()=>w(o),q=>T(o,q)),Vt(B,()=>w(a),q=>T(a,q)),$(b,F)};le(E,b=>{w(l)===!0?b(S):b(I,!1)})}P(y),$(r,y),Qe()}at(["click"]);var hn=(r=>(r.CHAPTER_PAGE="CHAPTER_PAGE",r.CHAPTER_DEFINITION_FILE="CHAPTER_DEFINITION_FILE",r.UNKNOWN="UNKNOWN",r))(hn||{});class gu{constructor(e,t,n){this.file=e,this.path=t,this.type=n}}class Jr{constructor(e,t,n,s,i,o){this.name=e,this.path=t,this.files=n,this.folders=s,this.level=i,this.depth=o}}function Xt(r,e){return r.localeCompare(e,void 0,{numeric:!0,sensitivity:"base"})}function fs(r,e){const t=r.type.toLowerCase();let n="UNKNOWN";const s=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp"],i=["application/json","text/xml"],o=["comicinfo.xml","details.json"];return s.includes(t)?n="CHAPTER_PAGE":(i.includes(t)||o.includes(r.name.toLowerCase()))&&(n="CHAPTER_DEFINITION_FILE"),new gu(r,e,n)}function Fh(r){if(r.length===0)return new Jr("/","/",[],[],0,0);const e=new Map,t=[];function n(l){const u=l.join("/");if(e.has(u))return e.get(u);const c=l[l.length-1],f=l.length,p=new Jr(c,u,[],[],f,0);if(e.set(u,p),l.length>1){const h=l.slice(0,-1);n(h).folders.push(p)}return p}for(const l of r){const u=l.webkitRelativePath??l.name,c=u.split("/").filter(Boolean);if(c.length===1)t.push(fs(l,u));else{const f=c.slice(0,-1);n(f).files.push(fs(l,u))}}const s=[];for(const[l,u]of e.entries())l.split("/").length===1&&s.push(u);function i(l){l.files.sort((u,c)=>Xt(u.file.name,c.file.name)),l.folders.sort((u,c)=>Xt(u.name,c.name));for(const u of l.folders)i(u)}t.sort((l,u)=>Xt(l.file.name,u.file.name)),s.sort((l,u)=>Xt(l.name,u.name));for(const l of s)i(l);function o(l){let u=0;for(const c of l.files){const p=c.path.split("/").filter(Boolean).length-1;u=Math.max(u,p)}for(const c of l.folders){const f=o(c);u=Math.max(u,f)}return l.depth=u,u}for(const l of s)o(l);const a=new Jr("/","/",t,s,0,0);return o(a),i(a),a}function yu(r,e,t=0,n=[]){if(t===e&&r.name!=="/")return n.push(r),n;if(t<e)for(const s of r.folders)yu(s,e,t+1,n);return n}function wu(r,e=0){if(r.folders.length===0)return e;let t=e;for(const n of r.folders){const s=wu(n,e+1);t=Math.max(t,s)}return t}class lt extends Error{}class _u extends lt{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class vu extends lt{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class Tu extends lt{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class mt extends lt{}class Di extends lt{constructor(e){super(`Invalid unit ${e}`)}}class ce extends lt{}class qe extends lt{constructor(){super("Zone is an abstract class")}}const O="numeric",Oe="short",we="long",wr={year:O,month:O,day:O},Mi={year:O,month:Oe,day:O},Su={year:O,month:Oe,day:O,weekday:Oe},Li={year:O,month:we,day:O},Ui={year:O,month:we,day:O,weekday:we},Pi={hour:O,minute:O},Vi={hour:O,minute:O,second:O},Gi={hour:O,minute:O,second:O,timeZoneName:Oe},Bi={hour:O,minute:O,second:O,timeZoneName:we},$i={hour:O,minute:O,hourCycle:"h23"},qi={hour:O,minute:O,second:O,hourCycle:"h23"},zi={hour:O,minute:O,second:O,hourCycle:"h23",timeZoneName:Oe},Wi={hour:O,minute:O,second:O,hourCycle:"h23",timeZoneName:we},Hi={year:O,month:O,day:O,hour:O,minute:O},ji={year:O,month:O,day:O,hour:O,minute:O,second:O},Zi={year:O,month:Oe,day:O,hour:O,minute:O},Ji={year:O,month:Oe,day:O,hour:O,minute:O,second:O},Eu={year:O,month:Oe,day:O,weekday:Oe,hour:O,minute:O},Yi={year:O,month:we,day:O,hour:O,minute:O,timeZoneName:Oe},Ki={year:O,month:we,day:O,hour:O,minute:O,second:O,timeZoneName:Oe},Qi={year:O,month:we,day:O,weekday:we,hour:O,minute:O,timeZoneName:we},Xi={year:O,month:we,day:O,weekday:we,hour:O,minute:O,second:O,timeZoneName:we};class Ht{get type(){throw new qe}get name(){throw new qe}get ianaName(){return this.name}get isUniversal(){throw new qe}offsetName(e,t){throw new qe}formatOffset(e,t){throw new qe}offset(e){throw new qe}equals(e){throw new qe}get isValid(){throw new qe}}let Yr=null;class Cr extends Ht{static get instance(){return Yr===null&&(Yr=new Cr),Yr}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return co(e,t,n)}formatOffset(e,t){return Ut(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const mn=new Map;function Iu(r){let e=mn.get(r);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),mn.set(r,e)),e}const bu={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function xu(r,e){const t=r.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,s,i,o,a,l,u,c]=n;return[o,s,i,a,l,u,c]}function Nu(r,e){const t=r.formatToParts(e),n=[];for(let s=0;s<t.length;s++){const{type:i,value:o}=t[s],a=bu[i];i==="era"?n[a]=o:U(a)||(n[a]=parseInt(o,10))}return n}const Kr=new Map;class $e extends Ht{static create(e){let t=Kr.get(e);return t===void 0&&Kr.set(e,t=new $e(e)),t}static resetCache(){Kr.clear(),mn.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=$e.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return co(e,t,n,this.name)}formatOffset(e,t){return Ut(this.offset(e),t)}offset(e){if(!this.valid)return NaN;const t=new Date(e);if(isNaN(t))return NaN;const n=Iu(this.name);let[s,i,o,a,l,u,c]=n.formatToParts?Nu(n,t):xu(n,t);a==="BC"&&(s=-Math.abs(s)+1);const p=Rr({year:s,month:i,day:o,hour:l===24?0:l,minute:u,second:c,millisecond:0});let h=+t;const d=h%1e3;return h-=d>=0?d:1e3+d,(p-h)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let ds={};function Ou(r,e={}){const t=JSON.stringify([r,e]);let n=ds[t];return n||(n=new Intl.ListFormat(r,e),ds[t]=n),n}const pn=new Map;function gn(r,e={}){const t=JSON.stringify([r,e]);let n=pn.get(t);return n===void 0&&(n=new Intl.DateTimeFormat(r,e),pn.set(t,n)),n}const yn=new Map;function ku(r,e={}){const t=JSON.stringify([r,e]);let n=yn.get(t);return n===void 0&&(n=new Intl.NumberFormat(r,e),yn.set(t,n)),n}const wn=new Map;function Au(r,e={}){const{base:t,...n}=e,s=JSON.stringify([r,n]);let i=wn.get(s);return i===void 0&&(i=new Intl.RelativeTimeFormat(r,e),wn.set(s,i)),i}let Rt=null;function Cu(){return Rt||(Rt=new Intl.DateTimeFormat().resolvedOptions().locale,Rt)}const _n=new Map;function eo(r){let e=_n.get(r);return e===void 0&&(e=new Intl.DateTimeFormat(r).resolvedOptions(),_n.set(r,e)),e}const vn=new Map;function Fu(r){let e=vn.get(r);if(!e){const t=new Intl.Locale(r);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,"minimalDays"in e||(e={...to,...e}),vn.set(r,e)}return e}function Ru(r){const e=r.indexOf("-x-");e!==-1&&(r=r.substring(0,e));const t=r.indexOf("-u-");if(t===-1)return[r];{let n,s;try{n=gn(r).resolvedOptions(),s=r}catch{const l=r.substring(0,t);n=gn(l).resolvedOptions(),s=l}const{numberingSystem:i,calendar:o}=n;return[s,i,o]}}function Du(r,e,t){return(t||e)&&(r.includes("-u-")||(r+="-u"),t&&(r+=`-ca-${t}`),e&&(r+=`-nu-${e}`)),r}function Mu(r){const e=[];for(let t=1;t<=12;t++){const n=L.utc(2009,t,1);e.push(r(n))}return e}function Lu(r){const e=[];for(let t=1;t<=7;t++){const n=L.utc(2016,11,13+t);e.push(r(n))}return e}function er(r,e,t,n){const s=r.listingMode();return s==="error"?null:s==="en"?t(e):n(e)}function Uu(r){return r.numberingSystem&&r.numberingSystem!=="latn"?!1:r.numberingSystem==="latn"||!r.locale||r.locale.startsWith("en")||eo(r.locale).numberingSystem==="latn"}class Pu{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:s,floor:i,...o}=n;if(!t||Object.keys(o).length>0){const a={useGrouping:!1,...n};n.padTo>0&&(a.minimumIntegerDigits=n.padTo),this.inf=ku(e,a)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):Un(e,3);return oe(t,this.padTo)}}}class Vu{constructor(e,t,n){this.opts=n,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&$e.create(a).valid?(s=a,this.dt=e):(s="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const i={...this.opts};i.timeZone=i.timeZone||s,this.dtf=gn(t,i)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:n}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Gu{constructor(e,t,n){this.opts={style:"long",...n},!t&&lo()&&(this.rtf=Au(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):lc(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const to={firstDay:1,minimalDays:4,weekend:[6,7]};class K{static fromOpts(e){return K.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,n,s,i=!1){const o=e||ie.defaultLocale,a=o||(i?"en-US":Cu()),l=t||ie.defaultNumberingSystem,u=n||ie.defaultOutputCalendar,c=Sn(s)||ie.defaultWeekSettings;return new K(a,l,u,c,o)}static resetCache(){Rt=null,pn.clear(),yn.clear(),wn.clear(),_n.clear(),vn.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:n,weekSettings:s}={}){return K.create(e,t,n,s)}constructor(e,t,n,s,i){const[o,a,l]=Ru(e);this.locale=o,this.numberingSystem=t||a||null,this.outputCalendar=n||l||null,this.weekSettings=s,this.intl=Du(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Uu(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:K.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Sn(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return er(this,e,mo,()=>{const n=this.intl==="ja"||this.intl.startsWith("ja-");t&=!n;const s=t?{month:e,day:"numeric"}:{month:e},i=t?"format":"standalone";if(!this.monthsCache[i][e]){const o=n?a=>this.dtFormatter(a,s).format():a=>this.extract(a,s,"month");this.monthsCache[i][e]=Mu(o)}return this.monthsCache[i][e]})}weekdays(e,t=!1){return er(this,e,yo,()=>{const n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=t?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=Lu(i=>this.extract(i,n,"weekday"))),this.weekdaysCache[s][e]})}meridiems(){return er(this,void 0,()=>wo,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[L.utc(2016,11,13,9),L.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return er(this,e,_o,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[L.utc(-40,1,1),L.utc(2017,1,1)].map(n=>this.extract(n,t,"era"))),this.eraCache[e]})}extract(e,t,n){const s=this.dtFormatter(e,t),i=s.formatToParts(),o=i.find(a=>a.type.toLowerCase()===n);return o?o.value:null}numberFormatter(e={}){return new Pu(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new Vu(e,this.intl,t)}relFormatter(e={}){return new Gu(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Ou(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||eo(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:uo()?Fu(this.locale):to}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Qr=null;class me extends Ht{static get utcInstance(){return Qr===null&&(Qr=new me(0)),Qr}static instance(e){return e===0?me.utcInstance:new me(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new me(Dr(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Ut(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Ut(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return Ut(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class Bu extends Ht{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function He(r,e){if(U(r)||r===null)return e;if(r instanceof Ht)return r;if(ju(r)){const t=r.toLowerCase();return t==="default"?e:t==="local"||t==="system"?Cr.instance:t==="utc"||t==="gmt"?me.utcInstance:me.parseSpecifier(t)||$e.create(r)}else return Je(r)?me.instance(r):typeof r=="object"&&"offset"in r&&typeof r.offset=="function"?r:new Bu(r)}const Rn={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},hs={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},$u=Rn.hanidec.replace(/[\[|\]]/g,"").split("");function qu(r){let e=parseInt(r,10);if(isNaN(e)){e="";for(let t=0;t<r.length;t++){const n=r.charCodeAt(t);if(r[t].search(Rn.hanidec)!==-1)e+=$u.indexOf(r[t]);else for(const s in hs){const[i,o]=hs[s];n>=i&&n<=o&&(e+=n-i)}}return parseInt(e,10)}else return e}const Tn=new Map;function zu(){Tn.clear()}function be({numberingSystem:r},e=""){const t=r||"latn";let n=Tn.get(t);n===void 0&&(n=new Map,Tn.set(t,n));let s=n.get(e);return s===void 0&&(s=new RegExp(`${Rn[t]}${e}`),n.set(e,s)),s}let ms=()=>Date.now(),ps="system",gs=null,ys=null,ws=null,_s=60,vs,Ts=null;class ie{static get now(){return ms}static set now(e){ms=e}static set defaultZone(e){ps=e}static get defaultZone(){return He(ps,Cr.instance)}static get defaultLocale(){return gs}static set defaultLocale(e){gs=e}static get defaultNumberingSystem(){return ys}static set defaultNumberingSystem(e){ys=e}static get defaultOutputCalendar(){return ws}static set defaultOutputCalendar(e){ws=e}static get defaultWeekSettings(){return Ts}static set defaultWeekSettings(e){Ts=Sn(e)}static get twoDigitCutoffYear(){return _s}static set twoDigitCutoffYear(e){_s=e%100}static get throwOnInvalid(){return vs}static set throwOnInvalid(e){vs=e}static resetCaches(){K.resetCache(),$e.resetCache(),L.resetCache(),zu()}}class Ne{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const ro=[0,31,59,90,120,151,181,212,243,273,304,334],no=[0,31,60,91,121,152,182,213,244,274,305,335];function Ee(r,e){return new Ne("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${r}, which is invalid`)}function Dn(r,e,t){const n=new Date(Date.UTC(r,e-1,t));r<100&&r>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const s=n.getUTCDay();return s===0?7:s}function so(r,e,t){return t+(jt(r)?no:ro)[e-1]}function io(r,e){const t=jt(r)?no:ro,n=t.findIndex(i=>i<e),s=e-t[n];return{month:n+1,day:s}}function Mn(r,e){return(r-e+7)%7+1}function _r(r,e=4,t=1){const{year:n,month:s,day:i}=r,o=so(n,s,i),a=Mn(Dn(n,s,i),t);let l=Math.floor((o-a+14-e)/7),u;return l<1?(u=n-1,l=Gt(u,e,t)):l>Gt(n,e,t)?(u=n+1,l=1):u=n,{weekYear:u,weekNumber:l,weekday:a,...Mr(r)}}function Ss(r,e=4,t=1){const{weekYear:n,weekNumber:s,weekday:i}=r,o=Mn(Dn(n,1,e),t),a=gt(n);let l=s*7+i-o-7+e,u;l<1?(u=n-1,l+=gt(u)):l>a?(u=n+1,l-=gt(n)):u=n;const{month:c,day:f}=io(u,l);return{year:u,month:c,day:f,...Mr(r)}}function Xr(r){const{year:e,month:t,day:n}=r,s=so(e,t,n);return{year:e,ordinal:s,...Mr(r)}}function Es(r){const{year:e,ordinal:t}=r,{month:n,day:s}=io(e,t);return{year:e,month:n,day:s,...Mr(r)}}function Is(r,e){if(!U(r.localWeekday)||!U(r.localWeekNumber)||!U(r.localWeekYear)){if(!U(r.weekday)||!U(r.weekNumber)||!U(r.weekYear))throw new mt("Cannot mix locale-based week fields with ISO-based week fields");return U(r.localWeekday)||(r.weekday=r.localWeekday),U(r.localWeekNumber)||(r.weekNumber=r.localWeekNumber),U(r.localWeekYear)||(r.weekYear=r.localWeekYear),delete r.localWeekday,delete r.localWeekNumber,delete r.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Wu(r,e=4,t=1){const n=Fr(r.weekYear),s=Ie(r.weekNumber,1,Gt(r.weekYear,e,t)),i=Ie(r.weekday,1,7);return n?s?i?!1:Ee("weekday",r.weekday):Ee("week",r.weekNumber):Ee("weekYear",r.weekYear)}function Hu(r){const e=Fr(r.year),t=Ie(r.ordinal,1,gt(r.year));return e?t?!1:Ee("ordinal",r.ordinal):Ee("year",r.year)}function oo(r){const e=Fr(r.year),t=Ie(r.month,1,12),n=Ie(r.day,1,vr(r.year,r.month));return e?t?n?!1:Ee("day",r.day):Ee("month",r.month):Ee("year",r.year)}function ao(r){const{hour:e,minute:t,second:n,millisecond:s}=r,i=Ie(e,0,23)||e===24&&t===0&&n===0&&s===0,o=Ie(t,0,59),a=Ie(n,0,59),l=Ie(s,0,999);return i?o?a?l?!1:Ee("millisecond",s):Ee("second",n):Ee("minute",t):Ee("hour",e)}function U(r){return typeof r>"u"}function Je(r){return typeof r=="number"}function Fr(r){return typeof r=="number"&&r%1===0}function ju(r){return typeof r=="string"}function Zu(r){return Object.prototype.toString.call(r)==="[object Date]"}function lo(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function uo(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Ju(r){return Array.isArray(r)?r:[r]}function bs(r,e,t){if(r.length!==0)return r.reduce((n,s)=>{const i=[e(s),s];return n&&t(n[0],i[0])===n[0]?n:i},null)[1]}function Yu(r,e){return e.reduce((t,n)=>(t[n]=r[n],t),{})}function Tt(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Sn(r){if(r==null)return null;if(typeof r!="object")throw new ce("Week settings must be an object");if(!Ie(r.firstDay,1,7)||!Ie(r.minimalDays,1,7)||!Array.isArray(r.weekend)||r.weekend.some(e=>!Ie(e,1,7)))throw new ce("Invalid week settings");return{firstDay:r.firstDay,minimalDays:r.minimalDays,weekend:Array.from(r.weekend)}}function Ie(r,e,t){return Fr(r)&&r>=e&&r<=t}function Ku(r,e){return r-e*Math.floor(r/e)}function oe(r,e=2){const t=r<0;let n;return t?n="-"+(""+-r).padStart(e,"0"):n=(""+r).padStart(e,"0"),n}function ze(r){if(!(U(r)||r===null||r===""))return parseInt(r,10)}function Xe(r){if(!(U(r)||r===null||r===""))return parseFloat(r)}function Ln(r){if(!(U(r)||r===null||r==="")){const e=parseFloat("0."+r)*1e3;return Math.floor(e)}}function Un(r,e,t="round"){const n=10**e;switch(t){case"expand":return r>0?Math.ceil(r*n)/n:Math.floor(r*n)/n;case"trunc":return Math.trunc(r*n)/n;case"round":return Math.round(r*n)/n;case"floor":return Math.floor(r*n)/n;case"ceil":return Math.ceil(r*n)/n;default:throw new RangeError(`Value rounding ${t} is out of range`)}}function jt(r){return r%4===0&&(r%100!==0||r%400===0)}function gt(r){return jt(r)?366:365}function vr(r,e){const t=Ku(e-1,12)+1,n=r+(e-t)/12;return t===2?jt(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function Rr(r){let e=Date.UTC(r.year,r.month-1,r.day,r.hour,r.minute,r.second,r.millisecond);return r.year<100&&r.year>=0&&(e=new Date(e),e.setUTCFullYear(r.year,r.month-1,r.day)),+e}function xs(r,e,t){return-Mn(Dn(r,1,e),t)+e-1}function Gt(r,e=4,t=1){const n=xs(r,e,t),s=xs(r+1,e,t);return(gt(r)-n+s)/7}function En(r){return r>99?r:r>ie.twoDigitCutoffYear?1900+r:2e3+r}function co(r,e,t,n=null){const s=new Date(r),i={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(i.timeZone=n);const o={timeZoneName:e,...i},a=new Intl.DateTimeFormat(t,o).formatToParts(s).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function Dr(r,e){let t=parseInt(r,10);Number.isNaN(t)&&(t=0);const n=parseInt(e,10)||0,s=t<0||Object.is(t,-0)?-n:n;return t*60+s}function fo(r){const e=Number(r);if(typeof r=="boolean"||r===""||!Number.isFinite(e))throw new ce(`Invalid unit value ${r}`);return e}function Tr(r,e){const t={};for(const n in r)if(Tt(r,n)){const s=r[n];if(s==null)continue;t[e(n)]=fo(s)}return t}function Ut(r,e){const t=Math.trunc(Math.abs(r/60)),n=Math.trunc(Math.abs(r%60)),s=r>=0?"+":"-";switch(e){case"short":return`${s}${oe(t,2)}:${oe(n,2)}`;case"narrow":return`${s}${t}${n>0?`:${n}`:""}`;case"techie":return`${s}${oe(t,2)}${oe(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Mr(r){return Yu(r,["hour","minute","second","millisecond"])}const Qu=["January","February","March","April","May","June","July","August","September","October","November","December"],ho=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Xu=["J","F","M","A","M","J","J","A","S","O","N","D"];function mo(r){switch(r){case"narrow":return[...Xu];case"short":return[...ho];case"long":return[...Qu];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const po=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],go=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],ec=["M","T","W","T","F","S","S"];function yo(r){switch(r){case"narrow":return[...ec];case"short":return[...go];case"long":return[...po];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const wo=["AM","PM"],tc=["Before Christ","Anno Domini"],rc=["BC","AD"],nc=["B","A"];function _o(r){switch(r){case"narrow":return[...nc];case"short":return[...rc];case"long":return[...tc];default:return null}}function sc(r){return wo[r.hour<12?0:1]}function ic(r,e){return yo(e)[r.weekday-1]}function oc(r,e){return mo(e)[r.month-1]}function ac(r,e){return _o(e)[r.year<0?0:1]}function lc(r,e,t="always",n=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},i=["hours","minutes","seconds"].indexOf(r)===-1;if(t==="auto"&&i){const f=r==="days";switch(e){case 1:return f?"tomorrow":`next ${s[r][0]}`;case-1:return f?"yesterday":`last ${s[r][0]}`;case 0:return f?"today":`this ${s[r][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,u=s[r],c=n?l?u[1]:u[2]||u[1]:l?s[r][0]:r;return o?`${a} ${c} ago`:`in ${a} ${c}`}function Ns(r,e){let t="";for(const n of r)n.literal?t+=n.val:t+=e(n.val);return t}const uc={D:wr,DD:Mi,DDD:Li,DDDD:Ui,t:Pi,tt:Vi,ttt:Gi,tttt:Bi,T:$i,TT:qi,TTT:zi,TTTT:Wi,f:Hi,ff:Zi,fff:Yi,ffff:Qi,F:ji,FF:Ji,FFF:Ki,FFFF:Xi};class de{static create(e,t={}){return new de(e,t)}static parseFormat(e){let t=null,n="",s=!1;const i=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?((n.length>0||s)&&i.push({literal:s||/^\s+$/.test(n),val:n===""?"'":n}),t=null,n="",s=!s):s||a===t?n+=a:(n.length>0&&i.push({literal:/^\s+$/.test(n),val:n}),n=a,t=a)}return n.length>0&&i.push({literal:s||/^\s+$/.test(n),val:n}),i}static macroTokenToFormatOpts(e){return uc[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0,n=void 0){if(this.opts.forceSimple)return oe(e,t);const s={...this.opts};return t>0&&(s.padTo=t),n&&(s.signDisplay=n),this.loc.numberFormatter(s).format(e)}formatDateTimeFromString(e,t){const n=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",i=(h,d)=>this.loc.extract(e,h,d),o=h=>e.isOffsetFixed&&e.offset===0&&h.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,h.format):"",a=()=>n?sc(e):i({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(h,d)=>n?oc(e,h):i(d?{month:h}:{month:h,day:"numeric"},"month"),u=(h,d)=>n?ic(e,h):i(d?{weekday:h}:{weekday:h,month:"long",day:"numeric"},"weekday"),c=h=>{const d=de.macroTokenToFormatOpts(h);return d?this.formatWithSystemDefault(e,d):h},f=h=>n?ac(e,h):i({era:h},"era"),p=h=>{switch(h){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return s?i({day:"numeric"},"day"):this.num(e.day);case"dd":return s?i({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return s?i({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?i({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return s?i({month:"numeric"},"month"):this.num(e.month);case"MM":return s?i({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return s?i({year:"numeric"},"year"):this.num(e.year);case"yy":return s?i({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?i({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?i({year:"numeric"},"year"):this.num(e.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(h)}};return Ns(de.parseFormat(t),p)}formatDurationFromString(e,t){const n=this.opts.signMode==="negativeLargestOnly"?-1:1,s=c=>{switch(c[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},i=(c,f)=>p=>{const h=s(p);if(h){const d=f.isNegativeDuration&&h!==f.largestUnit?n:1;let g;return this.opts.signMode==="negativeLargestOnly"&&h!==f.largestUnit?g="never":this.opts.signMode==="all"?g="always":g="auto",this.num(c.get(h)*d,p.length,g)}else return p},o=de.parseFormat(t),a=o.reduce((c,{literal:f,val:p})=>f?c:c.concat(p),[]),l=e.shiftTo(...a.map(s).filter(c=>c)),u={isNegativeDuration:l<0,largestUnit:Object.keys(l.values)[0]};return Ns(o,i(l,u))}}const vo=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function It(...r){const e=r.reduce((t,n)=>t+n.source,"");return RegExp(`^${e}$`)}function bt(...r){return e=>r.reduce(([t,n,s],i)=>{const[o,a,l]=i(e,s);return[{...t,...o},a||n,l]},[{},null,1]).slice(0,2)}function xt(r,...e){if(r==null)return[null,null];for(const[t,n]of e){const s=t.exec(r);if(s)return n(s)}return[null,null]}function To(...r){return(e,t)=>{const n={};let s;for(s=0;s<r.length;s++)n[r[s]]=ze(e[t+s]);return[n,null,t+s]}}const So=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,cc=`(?:${So.source}?(?:\\[(${vo.source})\\])?)?`,Pn=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Eo=RegExp(`${Pn.source}${cc}`),Vn=RegExp(`(?:[Tt]${Eo.source})?`),fc=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,dc=/(\d{4})-?W(\d\d)(?:-?(\d))?/,hc=/(\d{4})-?(\d{3})/,mc=To("weekYear","weekNumber","weekDay"),pc=To("year","ordinal"),gc=/(\d{4})-(\d\d)-(\d\d)/,Io=RegExp(`${Pn.source} ?(?:${So.source}|(${vo.source}))?`),yc=RegExp(`(?: ${Io.source})?`);function yt(r,e,t){const n=r[e];return U(n)?t:ze(n)}function wc(r,e){return[{year:yt(r,e),month:yt(r,e+1,1),day:yt(r,e+2,1)},null,e+3]}function Nt(r,e){return[{hours:yt(r,e,0),minutes:yt(r,e+1,0),seconds:yt(r,e+2,0),milliseconds:Ln(r[e+3])},null,e+4]}function Zt(r,e){const t=!r[e]&&!r[e+1],n=Dr(r[e+1],r[e+2]),s=t?null:me.instance(n);return[{},s,e+3]}function Jt(r,e){const t=r[e]?$e.create(r[e]):null;return[{},t,e+1]}const _c=RegExp(`^T?${Pn.source}$`),vc=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Tc(r){const[e,t,n,s,i,o,a,l,u]=r,c=e[0]==="-",f=l&&l[0]==="-",p=(h,d=!1)=>h!==void 0&&(d||h&&c)?-h:h;return[{years:p(Xe(t)),months:p(Xe(n)),weeks:p(Xe(s)),days:p(Xe(i)),hours:p(Xe(o)),minutes:p(Xe(a)),seconds:p(Xe(l),l==="-0"),milliseconds:p(Ln(u),f)}]}const Sc={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Gn(r,e,t,n,s,i,o){const a={year:e.length===2?En(ze(e)):ze(e),month:ho.indexOf(t)+1,day:ze(n),hour:ze(s),minute:ze(i)};return o&&(a.second=ze(o)),r&&(a.weekday=r.length>3?po.indexOf(r)+1:go.indexOf(r)+1),a}const Ec=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Ic(r){const[,e,t,n,s,i,o,a,l,u,c,f]=r,p=Gn(e,s,n,t,i,o,a);let h;return l?h=Sc[l]:u?h=0:h=Dr(c,f),[p,new me(h)]}function bc(r){return r.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const xc=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Nc=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Oc=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Os(r){const[,e,t,n,s,i,o,a]=r;return[Gn(e,s,n,t,i,o,a),me.utcInstance]}function kc(r){const[,e,t,n,s,i,o,a]=r;return[Gn(e,a,t,n,s,i,o),me.utcInstance]}const Ac=It(fc,Vn),Cc=It(dc,Vn),Fc=It(hc,Vn),Rc=It(Eo),bo=bt(wc,Nt,Zt,Jt),Dc=bt(mc,Nt,Zt,Jt),Mc=bt(pc,Nt,Zt,Jt),Lc=bt(Nt,Zt,Jt);function Uc(r){return xt(r,[Ac,bo],[Cc,Dc],[Fc,Mc],[Rc,Lc])}function Pc(r){return xt(bc(r),[Ec,Ic])}function Vc(r){return xt(r,[xc,Os],[Nc,Os],[Oc,kc])}function Gc(r){return xt(r,[vc,Tc])}const Bc=bt(Nt);function $c(r){return xt(r,[_c,Bc])}const qc=It(gc,yc),zc=It(Io),Wc=bt(Nt,Zt,Jt);function Hc(r){return xt(r,[qc,bo],[zc,Wc])}const ks="Invalid Duration",xo={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},jc={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...xo},_e=146097/400,ct=146097/4800,Zc={years:{quarters:4,months:12,weeks:_e/7,days:_e,hours:_e*24,minutes:_e*24*60,seconds:_e*24*60*60,milliseconds:_e*24*60*60*1e3},quarters:{months:3,weeks:_e/28,days:_e/4,hours:_e*24/4,minutes:_e*24*60/4,seconds:_e*24*60*60/4,milliseconds:_e*24*60*60*1e3/4},months:{weeks:ct/7,days:ct,hours:ct*24,minutes:ct*24*60,seconds:ct*24*60*60,milliseconds:ct*24*60*60*1e3},...xo},rt=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Jc=rt.slice(0).reverse();function Le(r,e,t=!1){const n={values:t?e.values:{...r.values,...e.values||{}},loc:r.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||r.conversionAccuracy,matrix:e.matrix||r.matrix};return new W(n)}function No(r,e){let t=e.milliseconds??0;for(const n of Jc.slice(1))e[n]&&(t+=e[n]*r[n].milliseconds);return t}function As(r,e){const t=No(r,e)<0?-1:1;rt.reduceRight((n,s)=>{if(U(e[s]))return n;if(n){const i=e[n]*t,o=r[s][n],a=Math.floor(i/o);e[s]+=a*t,e[n]-=a*o*t}return s},null),rt.reduce((n,s)=>{if(U(e[s]))return n;if(n){const i=e[n]%1;e[n]-=i,e[s]+=i*r[n][s]}return s},null)}function Cs(r){const e={};for(const[t,n]of Object.entries(r))n!==0&&(e[t]=n);return e}class W{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let n=t?Zc:jc;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||K.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return W.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new ce(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new W({values:Tr(e,W.normalizeUnit),loc:K.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(Je(e))return W.fromMillis(e);if(W.isDuration(e))return e;if(typeof e=="object")return W.fromObject(e);throw new ce(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[n]=Gc(e);return n?W.fromObject(n,t):W.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[n]=$c(e);return n?W.fromObject(n,t):W.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new ce("need to specify a reason the Duration is invalid");const n=e instanceof Ne?e:new Ne(e,t);if(ie.throwOnInvalid)throw new Tu(n);return new W({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new Di(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const n={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?de.create(this.loc,n).formatDurationFromString(this,e):ks}toHuman(e={}){if(!this.isValid)return ks;const t=e.showZeros!==!1,n=rt.map(s=>{const i=this.values[s];return U(i)||i===0&&!t?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:s.slice(0,-1)}).format(i)}).filter(s=>s);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Un(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},L.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?No(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=W.fromDurationLike(e),n={};for(const s of rt)(Tt(t.values,s)||Tt(this.values,s))&&(n[s]=t.get(s)+this.get(s));return Le(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=W.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=fo(e(this.values[n],n));return Le(this,{values:t},!0)}get(e){return this[W.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...Tr(e,W.normalizeUnit)};return Le(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:s}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:s,conversionAccuracy:n};return Le(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return As(this.matrix,e),Le(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=Cs(this.normalize().shiftToAll().toObject());return Le(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>W.normalizeUnit(o));const t={},n={},s=this.toObject();let i;for(const o of rt)if(e.indexOf(o)>=0){i=o;let a=0;for(const u in n)a+=this.matrix[u][o]*n[u],n[u]=0;Je(s[o])&&(a+=s[o]);const l=Math.trunc(a);t[o]=l,n[o]=(a*1e3-l*1e3)/1e3}else Je(s[o])&&(n[o]=s[o]);for(const o in n)n[o]!==0&&(t[i]+=o===i?n[o]:n[o]/this.matrix[i][o]);return As(this.matrix,t),Le(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return Le(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=Cs(this.values);return Le(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(n,s){return n===void 0||n===0?s===void 0||s===0:n===s}for(const n of rt)if(!t(this.values[n],e.values[n]))return!1;return!0}}const ft="Invalid Interval";function Yc(r,e){return!r||!r.isValid?se.invalid("missing or invalid start"):!e||!e.isValid?se.invalid("missing or invalid end"):e<r?se.invalid("end before start",`The end of an interval must be after its start, but you had start=${r.toISO()} and end=${e.toISO()}`):null}class se{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new ce("need to specify a reason the Interval is invalid");const n=e instanceof Ne?e:new Ne(e,t);if(ie.throwOnInvalid)throw new vu(n);return new se({invalid:n})}static fromDateTimes(e,t){const n=Ft(e),s=Ft(t),i=Yc(n,s);return i??new se({start:n,end:s})}static after(e,t){const n=W.fromDurationLike(t),s=Ft(e);return se.fromDateTimes(s,s.plus(n))}static before(e,t){const n=W.fromDurationLike(t),s=Ft(e);return se.fromDateTimes(s.minus(n),s)}static fromISO(e,t){const[n,s]=(e||"").split("/",2);if(n&&s){let i,o;try{i=L.fromISO(n,t),o=i.isValid}catch{o=!1}let a,l;try{a=L.fromISO(s,t),l=a.isValid}catch{l=!1}if(o&&l)return se.fromDateTimes(i,a);if(o){const u=W.fromISO(s,t);if(u.isValid)return se.after(i,u)}else if(l){const u=W.fromISO(n,t);if(u.isValid)return se.before(a,u)}}return se.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const n=this.start.startOf(e,t);let s;return t?.useLocaleWeeks?s=this.end.reconfigure({locale:n.locale}):s=this.end,s=s.startOf(e,t),Math.floor(s.diff(n,e).get(e))+(s.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?se.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(Ft).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),n=[];let{s}=this,i=0;for(;s<this.e;){const o=t[i]||this.e,a=+o>+this.e?this.e:o;n.push(se.fromDateTimes(s,a)),s=a,i+=1}return n}splitBy(e){const t=W.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:n}=this,s=1,i;const o=[];for(;n<this.e;){const a=this.start.plus(t.mapUnits(l=>l*s));i=+a>+this.e?this.e:a,o.push(se.fromDateTimes(n,i)),n=i,s+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:se.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return se.fromDateTimes(t,n)}static merge(e){const[t,n]=e.sort((s,i)=>s.s-i.s).reduce(([s,i],o)=>i?i.overlaps(o)||i.abutsStart(o)?[s,i.union(o)]:[s.concat([i]),o]:[s,o],[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const s=[],i=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...i),a=o.sort((l,u)=>l.time-u.time);for(const l of a)n+=l.type==="s"?1:-1,n===1?t=l.time:(t&&+t!=+l.time&&s.push(se.fromDateTimes(t,l.time)),t=null);return se.merge(s)}difference(...e){return se.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:ft}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=wr,t={}){return this.isValid?de.create(this.s.loc.clone(t),e).formatInterval(this):ft}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:ft}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ft}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:ft}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:ft}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):W.invalid(this.invalidReason)}mapEndpoints(e){return se.fromDateTimes(e(this.s),e(this.e))}}class tr{static hasDST(e=ie.defaultZone){const t=L.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return $e.isValidZone(e)}static normalizeZone(e){return He(e,ie.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||K.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||K.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||K.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:s=null,outputCalendar:i="gregory"}={}){return(s||K.create(t,n,i)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:s=null,outputCalendar:i="gregory"}={}){return(s||K.create(t,n,i)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:s=null}={}){return(s||K.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:s=null}={}){return(s||K.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return K.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return K.create(t,null,"gregory").eras(e)}static features(){return{relative:lo(),localeWeek:uo()}}}function Fs(r,e){const t=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=t(e)-t(r);return Math.floor(W.fromMillis(n).as("days"))}function Kc(r,e,t){const n=[["years",(l,u)=>u.year-l.year],["quarters",(l,u)=>u.quarter-l.quarter+(u.year-l.year)*4],["months",(l,u)=>u.month-l.month+(u.year-l.year)*12],["weeks",(l,u)=>{const c=Fs(l,u);return(c-c%7)/7}],["days",Fs]],s={},i=r;let o,a;for(const[l,u]of n)t.indexOf(l)>=0&&(o=l,s[l]=u(r,e),a=i.plus(s),a>e?(s[l]--,r=i.plus(s),r>e&&(a=r,s[l]--,r=i.plus(s))):r=a);return[r,s,a,o]}function Qc(r,e,t,n){let[s,i,o,a]=Kc(r,e,t);const l=e-s,u=t.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);u.length===0&&(o<e&&(o=s.plus({[a]:1})),o!==s&&(i[a]=(i[a]||0)+l/(o-s)));const c=W.fromObject(i,n);return u.length>0?W.fromMillis(l,n).shiftTo(...u).plus(c):c}const Xc="missing Intl.DateTimeFormat.formatToParts support";function J(r,e=t=>t){return{regex:r,deser:([t])=>e(qu(t))}}const ef="",Oo=`[ ${ef}]`,ko=new RegExp(Oo,"g");function tf(r){return r.replace(/\./g,"\\.?").replace(ko,Oo)}function Rs(r){return r.replace(/\./g,"").replace(ko," ").toLowerCase()}function xe(r,e){return r===null?null:{regex:RegExp(r.map(tf).join("|")),deser:([t])=>r.findIndex(n=>Rs(t)===Rs(n))+e}}function Ds(r,e){return{regex:r,deser:([,t,n])=>Dr(t,n),groups:e}}function rr(r){return{regex:r,deser:([e])=>e}}function rf(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function nf(r,e){const t=be(e),n=be(e,"{2}"),s=be(e,"{3}"),i=be(e,"{4}"),o=be(e,"{6}"),a=be(e,"{1,2}"),l=be(e,"{1,3}"),u=be(e,"{1,6}"),c=be(e,"{1,9}"),f=be(e,"{2,4}"),p=be(e,"{4,6}"),h=m=>({regex:RegExp(rf(m.val)),deser:([y])=>y,literal:!0}),g=(m=>{if(r.literal)return h(m);switch(m.val){case"G":return xe(e.eras("short"),0);case"GG":return xe(e.eras("long"),0);case"y":return J(u);case"yy":return J(f,En);case"yyyy":return J(i);case"yyyyy":return J(p);case"yyyyyy":return J(o);case"M":return J(a);case"MM":return J(n);case"MMM":return xe(e.months("short",!0),1);case"MMMM":return xe(e.months("long",!0),1);case"L":return J(a);case"LL":return J(n);case"LLL":return xe(e.months("short",!1),1);case"LLLL":return xe(e.months("long",!1),1);case"d":return J(a);case"dd":return J(n);case"o":return J(l);case"ooo":return J(s);case"HH":return J(n);case"H":return J(a);case"hh":return J(n);case"h":return J(a);case"mm":return J(n);case"m":return J(a);case"q":return J(a);case"qq":return J(n);case"s":return J(a);case"ss":return J(n);case"S":return J(l);case"SSS":return J(s);case"u":return rr(c);case"uu":return rr(a);case"uuu":return J(t);case"a":return xe(e.meridiems(),0);case"kkkk":return J(i);case"kk":return J(f,En);case"W":return J(a);case"WW":return J(n);case"E":case"c":return J(t);case"EEE":return xe(e.weekdays("short",!1),1);case"EEEE":return xe(e.weekdays("long",!1),1);case"ccc":return xe(e.weekdays("short",!0),1);case"cccc":return xe(e.weekdays("long",!0),1);case"Z":case"ZZ":return Ds(new RegExp(`([+-]${a.source})(?::(${n.source}))?`),2);case"ZZZ":return Ds(new RegExp(`([+-]${a.source})(${n.source})?`),2);case"z":return rr(/[a-z_+-/]{1,256}?/i);case" ":return rr(/[^\S\n\r]/);default:return h(m)}})(r)||{invalidReason:Xc};return g.token=r,g}const sf={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function of(r,e,t){const{type:n,value:s}=r;if(n==="literal"){const l=/^\s+$/.test(s);return{literal:!l,val:l?" ":s}}const i=e[n];let o=n;n==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=t.hour12?"hour12":"hour24");let a=sf[o];if(typeof a=="object"&&(a=a[i]),a)return{literal:!1,val:a}}function af(r){return[`^${r.map(t=>t.regex).reduce((t,n)=>`${t}(${n.source})`,"")}$`,r]}function lf(r,e,t){const n=r.match(e);if(n){const s={};let i=1;for(const o in t)if(Tt(t,o)){const a=t[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(s[a.token.val[0]]=a.deser(n.slice(i,i+l))),i+=l}return[n,s]}else return[n,{}]}function uf(r){const e=i=>{switch(i){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,n;return U(r.z)||(t=$e.create(r.z)),U(r.Z)||(t||(t=new me(r.Z)),n=r.Z),U(r.q)||(r.M=(r.q-1)*3+1),U(r.h)||(r.h<12&&r.a===1?r.h+=12:r.h===12&&r.a===0&&(r.h=0)),r.G===0&&r.y&&(r.y=-r.y),U(r.u)||(r.S=Ln(r.u)),[Object.keys(r).reduce((i,o)=>{const a=e(o);return a&&(i[a]=r[o]),i},{}),t,n]}let en=null;function cf(){return en||(en=L.fromMillis(1555555555555)),en}function ff(r,e){if(r.literal)return r;const t=de.macroTokenToFormatOpts(r.val),n=Ro(t,e);return n==null||n.includes(void 0)?r:n}function Ao(r,e){return Array.prototype.concat(...r.map(t=>ff(t,e)))}class Co{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=Ao(de.parseFormat(t),e),this.units=this.tokens.map(n=>nf(n,e)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){const[n,s]=af(this.units);this.regex=RegExp(n,"i"),this.handlers=s}}explainFromTokens(e){if(this.isValid){const[t,n]=lf(e,this.regex,this.handlers),[s,i,o]=n?uf(n):[null,null,void 0];if(Tt(n,"a")&&Tt(n,"H"))throw new mt("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:n,result:s,zone:i,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Fo(r,e,t){return new Co(r,t).explainFromTokens(e)}function df(r,e,t){const{result:n,zone:s,specificOffset:i,invalidReason:o}=Fo(r,e,t);return[n,s,i,o]}function Ro(r,e){if(!r)return null;const n=de.create(e,r).dtFormatter(cf()),s=n.formatToParts(),i=n.resolvedOptions();return s.map(o=>of(o,r,i))}const tn="Invalid DateTime",Ms=864e13;function Dt(r){return new Ne("unsupported zone",`the zone "${r.name}" is not supported`)}function rn(r){return r.weekData===null&&(r.weekData=_r(r.c)),r.weekData}function nn(r){return r.localWeekData===null&&(r.localWeekData=_r(r.c,r.loc.getMinDaysInFirstWeek(),r.loc.getStartOfWeek())),r.localWeekData}function et(r,e){const t={ts:r.ts,zone:r.zone,c:r.c,o:r.o,loc:r.loc,invalid:r.invalid};return new L({...t,...e,old:t})}function Do(r,e,t){let n=r-e*60*1e3;const s=t.offset(n);if(e===s)return[n,e];n-=(s-e)*60*1e3;const i=t.offset(n);return s===i?[n,s]:[r-Math.min(s,i)*60*1e3,Math.max(s,i)]}function nr(r,e){r+=e*60*1e3;const t=new Date(r);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function lr(r,e,t){return Do(Rr(r),e,t)}function Ls(r,e){const t=r.o,n=r.c.year+Math.trunc(e.years),s=r.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,i={...r.c,year:n,month:s,day:Math.min(r.c.day,vr(n,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=W.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=Rr(i);let[l,u]=Do(a,t,r.zone);return o!==0&&(l+=o,u=r.zone.offset(l)),{ts:l,o:u}}function dt(r,e,t,n,s,i){const{setZone:o,zone:a}=t;if(r&&Object.keys(r).length!==0||e){const l=e||a,u=L.fromObject(r,{...t,zone:l,specificOffset:i});return o?u:u.setZone(a)}else return L.invalid(new Ne("unparsable",`the input "${s}" can't be parsed as ${n}`))}function sr(r,e,t=!0){return r.isValid?de.create(K.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(r,e):null}function sn(r,e,t){const n=r.c.year>9999||r.c.year<0;let s="";if(n&&r.c.year>=0&&(s+="+"),s+=oe(r.c.year,n?6:4),t==="year")return s;if(e){if(s+="-",s+=oe(r.c.month),t==="month")return s;s+="-"}else if(s+=oe(r.c.month),t==="month")return s;return s+=oe(r.c.day),s}function Us(r,e,t,n,s,i,o){let a=!t||r.c.millisecond!==0||r.c.second!==0,l="";switch(o){case"day":case"month":case"year":break;default:if(l+=oe(r.c.hour),o==="hour")break;if(e){if(l+=":",l+=oe(r.c.minute),o==="minute")break;a&&(l+=":",l+=oe(r.c.second))}else{if(l+=oe(r.c.minute),o==="minute")break;a&&(l+=oe(r.c.second))}if(o==="second")break;a&&(!n||r.c.millisecond!==0)&&(l+=".",l+=oe(r.c.millisecond,3))}return s&&(r.isOffsetFixed&&r.offset===0&&!i?l+="Z":r.o<0?(l+="-",l+=oe(Math.trunc(-r.o/60)),l+=":",l+=oe(Math.trunc(-r.o%60))):(l+="+",l+=oe(Math.trunc(r.o/60)),l+=":",l+=oe(Math.trunc(r.o%60)))),i&&(l+="["+r.zone.ianaName+"]"),l}const Mo={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},hf={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},mf={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ur=["year","month","day","hour","minute","second","millisecond"],pf=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],gf=["year","ordinal","hour","minute","second","millisecond"];function cr(r){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[r.toLowerCase()];if(!e)throw new Di(r);return e}function Ps(r){switch(r.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return cr(r)}}function yf(r){if(Mt===void 0&&(Mt=ie.now()),r.type!=="iana")return r.offset(Mt);const e=r.name;let t=In.get(e);return t===void 0&&(t=r.offset(Mt),In.set(e,t)),t}function Vs(r,e){const t=He(e.zone,ie.defaultZone);if(!t.isValid)return L.invalid(Dt(t));const n=K.fromObject(e);let s,i;if(U(r.year))s=ie.now();else{for(const l of ur)U(r[l])&&(r[l]=Mo[l]);const o=oo(r)||ao(r);if(o)return L.invalid(o);const a=yf(t);[s,i]=lr(r,a,t)}return new L({ts:s,zone:t,loc:n,o:i})}function Gs(r,e,t){const n=U(t.round)?!0:t.round,s=U(t.rounding)?"trunc":t.rounding,i=(a,l)=>(a=Un(a,n||t.calendary?0:2,t.calendary?"round":s),e.loc.clone(t).relFormatter(t).format(a,l)),o=a=>t.calendary?e.hasSame(r,a)?0:e.startOf(a).diff(r.startOf(a),a).get(a):e.diff(r,a).get(a);if(t.unit)return i(o(t.unit),t.unit);for(const a of t.units){const l=o(a);if(Math.abs(l)>=1)return i(l,a)}return i(r>e?-0:0,t.units[t.units.length-1])}function Bs(r){let e={},t;return r.length>0&&typeof r[r.length-1]=="object"?(e=r[r.length-1],t=Array.from(r).slice(0,r.length-1)):t=Array.from(r),[e,t]}let Mt;const In=new Map;class L{constructor(e){const t=e.zone||ie.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new Ne("invalid input"):null)||(t.isValid?null:Dt(t));this.ts=U(e.ts)?ie.now():e.ts;let s=null,i=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[s,i]=[e.old.c,e.old.o];else{const a=Je(e.o)&&!e.old?e.o:t.offset(this.ts);s=nr(this.ts,a),n=Number.isNaN(s.year)?new Ne("invalid input"):null,s=n?null:s,i=n?null:a}this._zone=t,this.loc=e.loc||K.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=s,this.o=i,this.isLuxonDateTime=!0}static now(){return new L({})}static local(){const[e,t]=Bs(arguments),[n,s,i,o,a,l,u]=t;return Vs({year:n,month:s,day:i,hour:o,minute:a,second:l,millisecond:u},e)}static utc(){const[e,t]=Bs(arguments),[n,s,i,o,a,l,u]=t;return e.zone=me.utcInstance,Vs({year:n,month:s,day:i,hour:o,minute:a,second:l,millisecond:u},e)}static fromJSDate(e,t={}){const n=Zu(e)?e.valueOf():NaN;if(Number.isNaN(n))return L.invalid("invalid input");const s=He(t.zone,ie.defaultZone);return s.isValid?new L({ts:n,zone:s,loc:K.fromObject(t)}):L.invalid(Dt(s))}static fromMillis(e,t={}){if(Je(e))return e<-Ms||e>Ms?L.invalid("Timestamp out of range"):new L({ts:e,zone:He(t.zone,ie.defaultZone),loc:K.fromObject(t)});throw new ce(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(Je(e))return new L({ts:e*1e3,zone:He(t.zone,ie.defaultZone),loc:K.fromObject(t)});throw new ce("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const n=He(t.zone,ie.defaultZone);if(!n.isValid)return L.invalid(Dt(n));const s=K.fromObject(t),i=Tr(e,Ps),{minDaysInFirstWeek:o,startOfWeek:a}=Is(i,s),l=ie.now(),u=U(t.specificOffset)?n.offset(l):t.specificOffset,c=!U(i.ordinal),f=!U(i.year),p=!U(i.month)||!U(i.day),h=f||p,d=i.weekYear||i.weekNumber;if((h||c)&&d)throw new mt("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&c)throw new mt("Can't mix ordinal dates with month/day");const g=d||i.weekday&&!h;let m,y,E=nr(l,u);g?(m=pf,y=hf,E=_r(E,o,a)):c?(m=gf,y=mf,E=Xr(E)):(m=ur,y=Mo);let S=!1;for(const D of m){const x=i[D];U(x)?S?i[D]=y[D]:i[D]=E[D]:S=!0}const I=g?Wu(i,o,a):c?Hu(i):oo(i),b=I||ao(i);if(b)return L.invalid(b);const F=g?Ss(i,o,a):c?Es(i):i,[R,A]=lr(F,u,n),N=new L({ts:R,zone:n,o:A,loc:s});return i.weekday&&h&&e.weekday!==N.weekday?L.invalid("mismatched weekday",`you can't specify both a weekday of ${i.weekday} and a date of ${N.toISO()}`):N.isValid?N:L.invalid(N.invalid)}static fromISO(e,t={}){const[n,s]=Uc(e);return dt(n,s,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[n,s]=Pc(e);return dt(n,s,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[n,s]=Vc(e);return dt(n,s,t,"HTTP",t)}static fromFormat(e,t,n={}){if(U(e)||U(t))throw new ce("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:i=null}=n,o=K.fromOpts({locale:s,numberingSystem:i,defaultToEN:!0}),[a,l,u,c]=df(o,e,t);return c?L.invalid(c):dt(a,l,n,`format ${t}`,e,u)}static fromString(e,t,n={}){return L.fromFormat(e,t,n)}static fromSQL(e,t={}){const[n,s]=Hc(e);return dt(n,s,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new ce("need to specify a reason the DateTime is invalid");const n=e instanceof Ne?e:new Ne(e,t);if(ie.throwOnInvalid)throw new _u(n);return new L({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const n=Ro(e,K.fromObject(t));return n?n.map(s=>s?s.val:null).join(""):null}static expandFormat(e,t={}){return Ao(de.parseFormat(e),K.fromObject(t)).map(s=>s.val).join("")}static resetCache(){Mt=void 0,In.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?rn(this).weekYear:NaN}get weekNumber(){return this.isValid?rn(this).weekNumber:NaN}get weekday(){return this.isValid?rn(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?nn(this).weekday:NaN}get localWeekNumber(){return this.isValid?nn(this).weekNumber:NaN}get localWeekYear(){return this.isValid?nn(this).weekYear:NaN}get ordinal(){return this.isValid?Xr(this.c).ordinal:NaN}get monthShort(){return this.isValid?tr.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?tr.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?tr.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?tr.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,n=Rr(this.c),s=this.zone.offset(n-e),i=this.zone.offset(n+e),o=this.zone.offset(n-s*t),a=this.zone.offset(n-i*t);if(o===a)return[this];const l=n-o*t,u=n-a*t,c=nr(l,o),f=nr(u,a);return c.hour===f.hour&&c.minute===f.minute&&c.second===f.second&&c.millisecond===f.millisecond?[et(this,{ts:l}),et(this,{ts:u})]:[this]}get isInLeapYear(){return jt(this.year)}get daysInMonth(){return vr(this.year,this.month)}get daysInYear(){return this.isValid?gt(this.year):NaN}get weeksInWeekYear(){return this.isValid?Gt(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Gt(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:n,calendar:s}=de.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:s}}toUTC(e=0,t={}){return this.setZone(me.instance(e),t)}toLocal(){return this.setZone(ie.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:n=!1}={}){if(e=He(e,ie.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(t||n){const i=e.offset(this.ts),o=this.toObject();[s]=lr(o,i,e)}return et(this,{ts:s,zone:e})}else return L.invalid(Dt(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){const s=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n});return et(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=Tr(e,Ps),{minDaysInFirstWeek:n,startOfWeek:s}=Is(t,this.loc),i=!U(t.weekYear)||!U(t.weekNumber)||!U(t.weekday),o=!U(t.ordinal),a=!U(t.year),l=!U(t.month)||!U(t.day),u=a||l,c=t.weekYear||t.weekNumber;if((u||o)&&c)throw new mt("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new mt("Can't mix ordinal dates with month/day");let f;i?f=Ss({..._r(this.c,n,s),...t},n,s):U(t.ordinal)?(f={...this.toObject(),...t},U(t.day)&&(f.day=Math.min(vr(f.year,f.month),f.day))):f=Es({...Xr(this.c),...t});const[p,h]=lr(f,this.o,this.zone);return et(this,{ts:p,o:h})}plus(e){if(!this.isValid)return this;const t=W.fromDurationLike(e);return et(this,Ls(this,t))}minus(e){if(!this.isValid)return this;const t=W.fromDurationLike(e).negate();return et(this,Ls(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const n={},s=W.normalizeUnit(e);switch(s){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(s==="weeks")if(t){const i=this.loc.getStartOfWeek(),{weekday:o}=this;o<i&&(n.weekNumber=this.weekNumber-1),n.weekday=i}else n.weekday=1;if(s==="quarters"){const i=Math.ceil(this.month/3);n.month=(i-1)*3+1}return this.set(n)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?de.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):tn}toLocaleString(e=wr,t={}){return this.isValid?de.create(this.loc.clone(t),e).formatDateTime(this):tn}toLocaleParts(e={}){return this.isValid?de.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:s=!0,extendedZone:i=!1,precision:o="milliseconds"}={}){if(!this.isValid)return null;o=cr(o);const a=e==="extended";let l=sn(this,a,o);return ur.indexOf(o)>=3&&(l+="T"),l+=Us(this,a,t,n,s,i,o),l}toISODate({format:e="extended",precision:t="day"}={}){return this.isValid?sn(this,e==="extended",cr(t)):null}toISOWeekDate(){return sr(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:s=!1,extendedZone:i=!1,format:o="extended",precision:a="milliseconds"}={}){return this.isValid?(a=cr(a),(s&&ur.indexOf(a)>=3?"T":"")+Us(this,o==="extended",t,e,n,i,a)):null}toRFC2822(){return sr(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return sr(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?sn(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let s="HH:mm:ss.SSS";return(t||e)&&(n&&(s+=" "),t?s+="z":e&&(s+="ZZ")),sr(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():tn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){if(!this.isValid||!e.isValid)return W.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...n},i=Ju(t).map(W.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,u=Qc(a,l,i,s);return o?u.negate():u}diffNow(e="milliseconds",t={}){return this.diff(L.now(),e,t)}until(e){return this.isValid?se.fromDateTimes(this,e):this}hasSame(e,t,n){if(!this.isValid)return!1;const s=e.valueOf(),i=this.setZone(e.zone,{keepLocalTime:!0});return i.startOf(t,n)<=s&&s<=i.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||L.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],i=e.unit;return Array.isArray(e.unit)&&(s=e.unit,i=void 0),Gs(t,this.plus(n),{...e,numeric:"always",units:s,unit:i})}toRelativeCalendar(e={}){return this.isValid?Gs(e.base||L.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(L.isDateTime))throw new ce("min requires all arguments be DateTimes");return bs(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(L.isDateTime))throw new ce("max requires all arguments be DateTimes");return bs(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,n={}){const{locale:s=null,numberingSystem:i=null}=n,o=K.fromOpts({locale:s,numberingSystem:i,defaultToEN:!0});return Fo(o,e,t)}static fromStringExplain(e,t,n={}){return L.fromFormatExplain(e,t,n)}static buildFormatParser(e,t={}){const{locale:n=null,numberingSystem:s=null}=t,i=K.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return new Co(i,e)}static fromFormatParser(e,t,n={}){if(U(e)||U(t))throw new ce("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:i=null}=n,o=K.fromOpts({locale:s,numberingSystem:i,defaultToEN:!0});if(!o.equals(t.locale))throw new ce(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${t.locale}`);const{result:a,zone:l,specificOffset:u,invalidReason:c}=t.explainFromTokens(e);return c?L.invalid(c):dt(a,l,n,`format ${t.format}`,e,u)}static get DATE_SHORT(){return wr}static get DATE_MED(){return Mi}static get DATE_MED_WITH_WEEKDAY(){return Su}static get DATE_FULL(){return Li}static get DATE_HUGE(){return Ui}static get TIME_SIMPLE(){return Pi}static get TIME_WITH_SECONDS(){return Vi}static get TIME_WITH_SHORT_OFFSET(){return Gi}static get TIME_WITH_LONG_OFFSET(){return Bi}static get TIME_24_SIMPLE(){return $i}static get TIME_24_WITH_SECONDS(){return qi}static get TIME_24_WITH_SHORT_OFFSET(){return zi}static get TIME_24_WITH_LONG_OFFSET(){return Wi}static get DATETIME_SHORT(){return Hi}static get DATETIME_SHORT_WITH_SECONDS(){return ji}static get DATETIME_MED(){return Zi}static get DATETIME_MED_WITH_SECONDS(){return Ji}static get DATETIME_MED_WITH_WEEKDAY(){return Eu}static get DATETIME_FULL(){return Yi}static get DATETIME_FULL_WITH_SECONDS(){return Ki}static get DATETIME_HUGE(){return Qi}static get DATETIME_HUGE_WITH_SECONDS(){return Xi}}function Ft(r){if(L.isDateTime(r))return r;if(r&&r.valueOf&&Je(r.valueOf()))return L.fromJSDate(r);if(r&&typeof r=="object")return L.fromObject(r);throw new ce(`Unknown datetime argument: ${r}, of type ${typeof r}`)}function wf(r){return new Promise(e=>setTimeout(e,r))}class Ot{rateLimit;rateLimitInterval;lastBucketStart;requestCount;constructor(e,t){this.rateLimit=e,this.rateLimitInterval=W.fromDurationLike({seconds:t}),this.lastBucketStart=L.now(),this.requestCount=0}async wait(){const e=L.now();if(e.diff(this.lastBucketStart)>this.rateLimitInterval){this.lastBucketStart=e,this.requestCount=1;return}if(this.requestCount>=this.rateLimit){const s=this.lastBucketStart.plus(this.rateLimitInterval).diff(e);await wf(s.toMillis()),this.lastBucketStart=e,this.requestCount=1;return}this.requestCount++}}class kt{limiters;constructor(...e){this.limiters=e}async execute(e){try{for(const t of this.limiters)await t.wait();return await e()}catch(t){if(t instanceof cu&&t.response?.status===429)return console.warn("Hit 429 error, retrying entire chain...",t),this.execute(e);throw t}}}const At=new Ot(3,1),_f=new Ot(20,60),vf=new Ot(20,60),Tf=new Ot(10,60),Sf=new Ot(25,60),Ef=new Ot(30,60),Yt=new kt(At),$s=new kt(_f,At),If=new kt(vf,At),bf=new kt(Sf,At),xf=new kt(Tf,At),Nf=new kt(Ef,At);class Rh{#e=C(null);get seriesId(){return w(this.#e)}set seriesId(e){T(this.#e,e,!0)}#t=C(Ge([]));get chapterStates(){return w(this.#t)}set chapterStates(e){T(this.#t,e,!0)}#r=C(Ge([]));get availableScanGroups(){return w(this.#r)}set availableScanGroups(e){T(this.#r,e,!0)}reset(){this.seriesId=null,this.chapterStates=[],this.availableScanGroups=[]}}const Bn=Sa();async function Dh(r){return await Yt.execute(async()=>{const e=await H.get("https://api.weebdex.org/group",{params:{name:r}});if(e.status!==200)throw new Error(`Failed to search groups: ${e.status} ${e.statusText}`);return e.data})}async function Of(r){return await Yt.execute(async()=>{const e=await H.get("https://api.weebdex.org/manga",{params:{title:r,limit:20,sort:"relevance",page:1}});if(e.status!==200)throw new Error(`Failed to search manga: ${e.status} ${e.statusText}`);return e.data})}async function Mh(r){return await Yt.execute(async()=>{const e=await H.get(`https://api.weebdex.org/manga/${r}/aggregate`);if(e.status!==200)throw new Error(`Failed to get manga aggregate: ${e.status} ${e.statusText}`);const t=e.data;return{chapters:t.chapters??[],groups:t.groups??[],languages:t.languages??[]}})}async function Lh(r){const e=[];let t=1,n=!0;const s=100;for(;n;){console.log(`Fetching chapters page ${t}`);const i=await Yt.execute(async()=>{const a=await H.get(`https://api.weebdex.org/manga/${r}/chapters`,{params:{page:t,limit:s},timeout:1e4});if(a.status!==200)throw new Error(`Failed to fetch chapters: ${a.status} ${a.statusText}`);return a.data});i.data&&i.data.length>0&&e.push(...i.data);const o=Math.ceil(i.total/i.limit);n=t<o,t++}return e.map(i=>({...i,title:i.title===""?null:i.title,volume:i.volume===""?null:i.volume}))}async function Uh(r,e,t){return await bf.execute(async()=>{const n=await H.put(`https://api.weebdex.org/chapter/${r}`,e,{headers:{Authorization:`Bearer ${t}`}});if(n.status!==200)throw new Error(`Failed to update chapter: ${n.status} ${n.statusText}`);return n.data})}async function Ph(r,e){return await Nf.execute(async()=>{const t=await H.delete(`https://api.weebdex.org/chapter/${r}`,{headers:{Authorization:`Bearer ${e}`}});if(t.status!==200&&t.status!==204)throw new Error(`Failed to delete chapter: ${t.status} ${t.statusText}`)})}var kf=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],Af=["difference","intersection","symmetricDifference","union"],qs=!1;class Ye extends Set{#e=new Map;#t=C(0);#r=C(0);#i=mr||-1;constructor(e){if(super(),e){for(var t of e)super.add(t);this.#r.v=super.size}qs||this.#s()}#n(e){return mr===this.#i?C(e):dr(e)}#s(){qs=!0;var e=Ye.prototype,t=Set.prototype;for(const n of kf)e[n]=function(...s){return w(this.#t),t[n].apply(this,s)};for(const n of Af)e[n]=function(...s){w(this.#t);var i=t[n].apply(this,s);return new Ye(i)}}has(e){var t=super.has(e),n=this.#e,s=n.get(e);if(s===void 0){if(!t)return w(this.#t),!1;s=this.#n(!0),n.set(e,s)}return w(s),t}add(e){return super.has(e)||(super.add(e),T(this.#r,super.size),We(this.#t)),this}delete(e){var t=super.delete(e),n=this.#e,s=n.get(e);return s!==void 0&&(n.delete(e),T(s,!1)),t&&(T(this.#r,super.size),We(this.#t)),t}clear(){if(super.size!==0){super.clear();var e=this.#e;for(var t of e.values())T(t,!1);e.clear(),T(this.#r,0),We(this.#t)}}keys(){return this.values()}values(){return w(this.#t),super.values()}entries(){return w(this.#t),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return w(this.#r)}}class it extends Map{#e=new Map;#t=C(0);#r=C(0);#i=mr||-1;constructor(e){if(super(),e){for(var[t,n]of e)super.set(t,n);this.#r.v=super.size}}#n(e){return mr===this.#i?C(e):dr(e)}has(e){var t=this.#e,n=t.get(e);if(n===void 0){var s=super.get(e);if(s!==void 0)n=this.#n(0),t.set(e,n);else return w(this.#t),!1}return w(n),!0}forEach(e,t){this.#s(),super.forEach(e,t)}get(e){var t=this.#e,n=t.get(e);if(n===void 0){var s=super.get(e);if(s!==void 0)n=this.#n(0),t.set(e,n);else{w(this.#t);return}}return w(n),super.get(e)}set(e,t){var n=this.#e,s=n.get(e),i=super.get(e),o=super.set(e,t),a=this.#t;if(s===void 0)s=this.#n(0),n.set(e,s),T(this.#r,super.size),We(a);else if(i!==t){We(s);var l=a.reactions===null?null:new Set(a.reactions),u=l===null||!s.reactions?.every(c=>l.has(c));u&&We(a)}return o}delete(e){var t=this.#e,n=t.get(e),s=super.delete(e);return n!==void 0&&(t.delete(e),T(this.#r,super.size),T(n,-1),We(this.#t)),s}clear(){if(super.size!==0){super.clear();var e=this.#e;T(this.#r,0);for(var t of e.values())T(t,-1);We(this.#t),e.clear()}}#s(){w(this.#t);var e=this.#e;if(this.#r.v!==e.size){for(var t of super.keys())if(!e.has(t)){var n=this.#n(0);e.set(t,n)}}for([,n]of this.#e)w(n)}keys(){return w(this.#t),super.keys()}values(){return this.#s(),super.values()}entries(){return this.#s(),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return w(this.#r),super.size}}class Vh{#e=C("");get groupId(){return w(this.#e)}set groupId(e){T(this.#e,e,!0)}#t=C("");get groupName(){return w(this.#t)}set groupName(e){T(this.#t,e,!0)}}class Gh{#e=C(null);get groupIds(){return w(this.#e)}set groupIds(e){T(this.#e,e,!0)}}class Bh{#e=C("");get seriesId(){return w(this.#e)}set seriesId(e){T(this.#e,e,!0)}}var Cf=(r=>(r.NOT_STARTED="NOT_STARTED",r.SKIPPED="SKIPPED",r.WAITING="WAITING",r.UPLOADING="UPLOADING",r.UPLOADED="UPLOADED",r.FAILED="FAILED",r))(Cf||{});class Ff{#e=C("");get pageName(){return w(this.#e)}set pageName(e){T(this.#e,e,!0)}#t=C(0);get pageIndex(){return w(this.#t)}set pageIndex(e){T(this.#t,e,!0)}#r=C(null);get pageFile(){return w(this.#r)}set pageFile(e){T(this.#r,e,!0)}#i=C("NOT_STARTED");get status(){return w(this.#i)}set status(e){T(this.#i,e,!0)}#n=C(0);get progress(){return w(this.#n)}set progress(e){T(this.#n,e,!0)}#s=C(null);get error(){return w(this.#s)}set error(e){T(this.#s,e,!0)}#o=C(null);get associatedUploadSessionFileId(){return w(this.#o)}set associatedUploadSessionFileId(e){T(this.#o,e,!0)}#a=C(!1);get isDeleted(){return w(this.#a)}set isDeleted(e){T(this.#a,e,!0)}#l=C(Ge(hn.UNKNOWN));get pageType(){return w(this.#l)}set pageType(e){T(this.#l,e,!0)}constructor(e,t,n,s="NOT_STARTED",i=0,o=null,a=null,l=!1,u=hn.UNKNOWN){this.pageName=e,this.pageIndex=t,this.pageFile=n,this.status=s,this.progress=i,this.error=o,this.associatedUploadSessionFileId=a,this.isDeleted=l,this.pageType=u}static async uploadBatchToSession(e,t,n){if(e.length===0)return;for(const f of e)f.status="UPLOADING",f.progress=0,f.error=null;const s=new FormData;for(const f of e)s.append("file",f.pageFile);const i=6e4,o=new AbortController;let a=null;const l=()=>{o.abort(),a!==null&&(clearTimeout(a),a=null)},u=()=>{a!==null&&clearTimeout(a),a=setTimeout(l,i)},c=f=>{const p=Number(f.progress?.toFixed(2)??0);for(const h of e)h.progress=p;u()};u();try{const f=await If.execute(()=>H.post(`https://api.weebdex.org/upload/${t}`,s,{headers:{Authorization:`Bearer ${n}`},onUploadProgress:c,signal:o.signal,validateStatus:h=>h===200||h===400}));a!==null&&(clearTimeout(a),a=null);const p=f.data;if(!Array.isArray(p)||p.length!==e.length){const h=`Failed to upload batch: Expected ${e.length} responses, got ${Array.isArray(p)?p.length:"invalid format"}`;for(const d of e)d.status="FAILED",d.error=h,d.progress=0;return}for(let h=0;h<e.length;h++){const d=p[h];d?.error?(e[h].status="FAILED",e[h].error=d.error,e[h].progress=0):d?.id&&typeof d.id=="string"?(e[h].associatedUploadSessionFileId=d.id,e[h].status="UPLOADED",e[h].progress=1,e[h].error=null):(e[h].status="FAILED",e[h].error="Failed to get upload session file ID: Invalid response format",e[h].progress=0)}}catch(f){console.error(f);for(const p of e)if(p.status="FAILED",p.progress=0,H.isAxiosError(f))if(f.code==="ERR_CANCELED"||f.message==="canceled")p.error=`Upload timeout: No progress detected for ${i/1e3} seconds`;else{const h=f.response?.status,d=f.response?.statusText,g=f.response?.data?.message||f.message;h?p.error=`HTTP ${h}${d?` ${d}`:""}: ${g||"Unknown error"}`:p.error=g||`Network error: ${d||"Unknown error"}`}else f instanceof Error?p.error=f.message:p.error="Unknown error occurred during upload"}}}var Rf=(r=>(r.NOT_STARTED="NOT_STARTED",r.WAITING="WAITING",r.IN_PROGRESS="IN_PROGRESS",r.COMPLETED="COMPLETED",r.FAILED="FAILED",r))(Rf||{});class $h{#e=C(null);get originalFolderPath(){return w(this.#e)}set originalFolderPath(e){T(this.#e,e,!0)}#t=C(null);get chapterTitle(){return w(this.#t)}set chapterTitle(e){T(this.#t,e,!0)}#r=C(null);get chapterVolume(){return w(this.#r)}set chapterVolume(e){T(this.#r,e,!0)}#i=C(null);get chapterNumber(){return w(this.#i)}set chapterNumber(e){T(this.#i,e,!0)}#n=C("en");get language(){return w(this.#n)}set language(e){T(this.#n,e,!0)}#s=C(null);get associatedSeries(){return w(this.#s)}set associatedSeries(e){T(this.#s,e,!0)}#o=C(null);get associatedGroup(){return w(this.#o)}set associatedGroup(e){T(this.#o,e,!0)}#a=C(Ge([]));get pages(){return w(this.#a)}set pages(e){T(this.#a,e,!0)}#l=C("NOT_STARTED");get status(){return w(this.#l)}set status(e){T(this.#l,e,!0)}#u=C(0);get progress(){return w(this.#u)}set progress(e){T(this.#u,e,!0)}#c=C(null);get error(){return w(this.#c)}set error(e){T(this.#c,e,!0)}#f=C(null);get associatedUploadSessionId(){return w(this.#f)}set associatedUploadSessionId(e){T(this.#f,e,!0)}#d=C(null);get originalSelectedFolder(){return w(this.#d)}set originalSelectedFolder(e){T(this.#d,e,!0)}#h=C(Ge(new Ye));get manuallyEditedFields(){return w(this.#h)}set manuallyEditedFields(e){T(this.#h,e,!0)}#m=C(Ge(new it));get originalFieldValues(){return w(this.#m)}set originalFieldValues(e){T(this.#m,e,!0)}#p=C(!1);get isDeleted(){return w(this.#p)}set isDeleted(e){T(this.#p,e,!0)}constructor(e,t,n,s,i,o,a,l="NOT_STARTED",u=0,c=null,f=null,p=null,h=!1,d="en"){this.originalFolderPath=e,this.chapterTitle=t,this.chapterVolume=n,this.chapterNumber=s,this.associatedSeries=i,this.associatedGroup=o,this.pages=a,this.status=l,this.progress=u,this.error=c,this.associatedUploadSessionId=f,this.originalSelectedFolder=p,this.manuallyEditedFields=new Ye,this.originalFieldValues=new it,this.isDeleted=h,this.language=d}checkProgress(){const e=this.pages.length;if(e===0){this.progress=0;return}const t=this.pages.reduce((n,s)=>n+s.progress,0);this.progress=t/e}chunkPagesBySizeAndCount(e,t=10,n=100*1024*1024){const s=[];let i=[],o=0;for(const a of e){const l=a.pageFile.size;if(l>n){a.status="FAILED",a.error=`File size (${(l/(1024*1024)).toFixed(2)}MB) exceeds maximum batch size limit (${(n/(1024*1024)).toFixed(2)}MB)`,a.progress=0;continue}const u=i.length>=t,c=o+l>n;(u||c)&&i.length>0&&(s.push(i),i=[],o=0),i.push(a),o+=l}return i.length>0&&s.push(i),s}async upload(e){if(this.status="IN_PROGRESS",this.progress=0,this.error=null,!this.associatedGroup||!this.associatedSeries){this.status="FAILED",this.error="No associated group or series",this.progress=0;return}if(this.pages.length===0){this.status="FAILED",this.error="No pages to upload",this.progress=0;return}const n={groups:this.associatedGroup.groupIds??[],manga:this.associatedSeries.seriesId};try{const i=(await $s.execute(()=>H.post("https://api.weebdex.org/upload/begin",n,{headers:{Authorization:`Bearer ${e}`},timeout:6e4}))).data,o=i.id;if(!o||typeof o!="string"){this.status="FAILED",this.error="Failed to get upload session ID: Invalid response format",this.progress=0,console.dir(i,{depth:null});return}this.associatedUploadSessionId=o,this.checkProgress();const a=3,l=10,u=30*1024*1024,c=this.pages.filter(y=>!y.isDeleted),f=this.pages.filter(y=>y.isDeleted);for(const y of f)y.status="SKIPPED";const p=this.chunkPagesBySizeAndCount(c,l,u);if(c.filter(y=>y.status==="FAILED").length>0){this.status="FAILED",this.progress=0,await this.cleanupFailedUpload(e);return}for(let y=0;y<p.length;y+=a){const E=p.slice(y,y+a);await Promise.all(E.map(I=>Ff.uploadBatchToSession(I,o,e)));const S=[];for(const I of E)console.log("batch",I),S.push(...I.filter(b=>b.status==="FAILED"));if(S.length>0){this.status="FAILED",this.progress=0,await this.cleanupFailedUpload(e);return}this.checkProgress()}const d=c.length,g=this.pages.map(y=>y.associatedUploadSessionFileId).filter(y=>y!==null);if(g.length!==d){this.status="FAILED",this.error=`Failed to upload some pages: ${d-g.length} page(s) missing upload IDs`,this.progress=0,await this.cleanupFailedUpload(e);return}const m={draft:{chapter:this.chapterNumber?.toString()??"",volume:this.chapterVolume?.toString()??"",title:this.chapterTitle??"",language:this.language},page_order:g};await xf.execute(()=>H.post(`https://api.weebdex.org/upload/${this.associatedUploadSessionId}/commit`,m,{headers:{Authorization:`Bearer ${e}`},timeout:6e4})),this.status="COMPLETED",this.progress=1,this.error=null}catch(s){if(this.status="FAILED",this.progress=0,H.isAxiosError(s)){const i=s.response?.status,o=s.response?.statusText,a=s.response?.data?.message||s.message;i?this.error=`HTTP ${i}${o?` ${o}`:""}: ${a||"Unknown error"}`:this.error=a||`Network error: ${o||"Unknown error"}`}else s instanceof Error?this.error=s.message:this.error="Unknown error occurred during upload";await this.cleanupFailedUpload(e)}}async cleanupFailedUpload(e){this.associatedUploadSessionId&&await $s.execute(()=>H.delete(`https://api.weebdex.org/upload/${this.associatedUploadSessionId}`,{headers:{Authorization:`Bearer ${e}`},timeout:6e4}))}}var Df=z('<img class="uno-o1ntag"/>'),Mf=z('<div class="uno-knrg2e"></div>'),Lf=z('<a target="_blank" rel="noopener noreferrer" class="uno-jhmxzj">View on Weebdex</a>'),Uf=z('<a target="_blank" rel="noopener noreferrer" class="uno-jhmxzj">View on MangaDex</a>'),Pf=z('<div class="uno-25ykr7"><div class="uno-n01etu"><span class="uno-1i396i"></span> <h3 class="uno-w3qnhz">Series Validated</h3> <button type="button" class="uno-ud6b9j" aria-label="Reset" title="Reset"><div class="uno-e8qcke"></div></button></div> <div class="uno-ezwszi"><!> <div class="uno-6c4rms"><div class="uno-unsbxp"><p class="uno-eqkm02"> </p> <!> <!></div> <p class="uno-eqkm02"> </p> <p class="uno-jmg7lv"> </p></div></div></div>'),Vf=z('<p class="uno-m82y5l"> </p>'),Gf=z('<p class="uno-ypzjrt">Validating...</p>'),Bf=z('<div class="uno-25ykr7"><div class="uno-n01etu"><label for="series-id-input" class="uno-v0b2gi">Series ID:</label> <input class="uno-htriql" id="series-id-input" type="text" placeholder="Enter series ID"/></div> <button class="uno-0kadng" type="button">Validate</button></div> <!> <!>',1),$f=z('<div class="uno-6c4rms"><!></div>');function qh(r,e){Ke(e,!0);const t="https://api.weebdex.org/manga",n=Pt(li);if(!n)throw new Error("TargetingSeriesValidator must be used within a component that provides ApiAuthContext context");const s=Pt(Bn);if(!s)throw new Error("TargetingSeriesValidator must be used within a component that provides TargetingState context");let i=C(""),o=C(!1),a=C(null),l=C(null);function u(E){s.seriesId=E}function c(){return!w(l)?.relationships?.cover?.id||!s.seriesId?null:`https://weebdex.org/covers/${s.seriesId}/${w(l).relationships.cover.id}.256.webp`}function f(){T(i,""),s.seriesId=null,T(l,null),T(a,null)}Ze(()=>{s.seriesId&&p(s.seriesId)});async function p(E){T(o,!0);try{const S=await Yt.execute(async()=>{const I=await fetch(`https://api.weebdex.org/manga/${E}`);if(I.ok)return await I.json();throw new Error(`Failed to load series data: ${I.status} ${I.statusText}`)});T(l,S,!0),console.dir(w(l),{depth:null})}catch(S){T(a,S instanceof Error?S.message:"Failed to load series data",!0)}finally{T(o,!1)}}async function h(){if(!w(i).trim()){T(a,"Please enter a series ID");return}const E=n.apiToken;if(!E){T(a,"No API token found");return}T(o,!0),T(a,null);try{const S=`${t}/${w(i).trim()}`,I=await fetch(S,{headers:{Authorization:`Bearer ${E}`}});if(I.ok){const b=await I.json();T(l,b,!0),u(w(i).trim()),T(a,null)}else T(a,`Failed to validate series: ${I.status} ${I.statusText}`)}catch(S){T(a,S instanceof Error?S.message:"Failed to validate series",!0)}finally{T(o,!1)}}var d=$f(),g=V(d);{var m=E=>{var S=Pf(),I=V(S),b=Z(V(I),4);b.__click=f,P(I);var F=Z(I,2),R=V(F);{var A=X=>{var he=Df();ae(ut=>{De(he,"src",ut),De(he,"alt",w(l).title??"Cover")},[c]),$(X,he)},N=X=>{var he=Mf();$(X,he)};le(R,X=>{c()?X(A):X(N,!1)})}var D=Z(R,2),x=V(D),B=V(x),k=V(B);P(B);var M=Z(B,2);{var re=X=>{var he=Lf();ae(()=>De(he,"href",`https://weebdex.org/title/${s.seriesId??""}`)),$(X,he)};le(M,X=>{s.seriesId&&X(re)})}var te=Z(M,2);{var j=X=>{var he=Uf();ae(()=>De(he,"href",`https://mangadex.org/title/${w(l).relationships.links.md??""}`)),$(X,he)};le(te,X=>{w(l).relationships.links?.md&&X(j)})}P(x);var q=Z(x,2),ne=V(q,!0);P(q);var Q=Z(q,2),ee=V(Q,!0);P(Q),P(D),P(F),P(S),ae(()=>{Se(k,`ID: ${w(l).id??""}`),Se(ne,w(l).title),Se(ee,w(l).description)}),$(E,S)},y=E=>{var S=Bf(),I=br(S),b=V(I),F=Z(V(b),2);_t(F),P(b);var R=Z(b,2);R.__click=h,P(I);var A=Z(I,2);{var N=B=>{var k=Vf(),M=V(k,!0);P(k),ae(()=>Se(M,w(a))),$(B,k)};le(A,B=>{w(a)&&B(N)})}var D=Z(A,2);{var x=B=>{var k=Gf();$(B,k)};le(D,B=>{w(o)&&B(x)})}ae(()=>{F.disabled=w(o),R.disabled=w(o)}),Vt(F,()=>w(i),B=>T(i,B)),$(E,S)};le(g,E=>{w(l)?E(m):E(y,!1)})}P(d),$(r,d),Qe()}at(["click"]);var qf=z('<form class="uno-7r54da"><input type="text" class="uno-q5dcv6"/> <button type="button" aria-label="Cancel" class="uno-lxck3h"><div class="uno-c68bgq"></div></button> <button type="submit" aria-label="Save" class="uno-q29m49"><div class="uno-4ecae6"></div></button></form>'),zf=z("<button> </button>"),Wf=z("<div><!></div>");function zh(r,e){Ke(e,!0);let t=Be(e,"value",15,null),n=Be(e,"class",3,""),s=Be(e,"textClass",3,""),i=C(!1),o=C(null),a=C(null);function l(){e.chapter&&e.fieldName&&!e.chapter.manuallyEditedFields.has(e.fieldName)&&(e.chapter.originalFieldValues.has(e.fieldName)||e.chapter.originalFieldValues.set(e.fieldName,t())),T(i,!0),T(o,t(),!0)}Ze(()=>{w(a)&&w(i)?(w(a).focus(),window.addEventListener("keydown",c)):window.removeEventListener("keydown",c)});function u(g){T(i,!1),g?(t(w(o)),e.chapter&&e.fieldName&&e.chapter.manuallyEditedFields.add(e.fieldName)):T(o,t(),!0)}function c(g){g.key==="Escape"&&u(!1)}var f=Wf();f.__click=g=>g.stopPropagation();var p=V(f);{var h=g=>{var m=qf(),y=V(m);_t(y),gr(y,S=>T(a,S),()=>w(a));var E=Z(y,2);E.__click=S=>{S.stopPropagation(),u(!1)},hr(2),P(m),ai("submit",m,S=>{S.preventDefault(),u(!0)}),Vt(y,()=>w(o),S=>T(o,S)),$(g,m)},d=g=>{var m=zf();m.__click=E=>{E.stopPropagation(),l()};var y=V(m,!0);P(m),ae(()=>{pt(m,1,pr(["uno-8izkha",s()])),Se(y,t()??"")}),$(g,m)};le(p,g=>{w(i)?g(h):g(d,!1)})}P(f),ae(()=>pt(f,1,pr(["uno-6gjgox",n(),{"uno-xzkqve":w(i)}]))),$(r,f),Qe()}at(["click"]);var Hf=z('<div class="uno-fpe0ok svelte-ytt77r"></div>'),jf=z('<label><input type="checkbox" class="uno-il5nwu svelte-ytt77r"/> <span class="uno-5vknvn svelte-ytt77r"> </span></label>'),Zf=z('<div class="uno-qezd1s svelte-ytt77r">No items available</div>'),Jf=z('<div role="presentation"><div class="uno-f4km04 svelte-ytt77r"><button type="button"><span class="svelte-ytt77r">Clear Selection</span></button> <!> <!> <!></div></div>');function Yf(r,e){Ke(e,!0);let t=Be(e,"selectedItems",15,null),n=Be(e,"isOpen",15,!0),s=Be(e,"class",3,"");function i(m){return e.getDisplayText?e.getDisplayText(m):m.groupName}let o=C(null),a=C(null);function l(){if(!e.buttonRect)return;const m=e.buttonRect,y=window.innerHeight,E=window.innerWidth,S=4,I=256;let b=I;if(w(o)){const B=w(o).getBoundingClientRect().height;b=Math.min(B,I)}const F=y-m.bottom-S,R=m.top-S,A=F<I&&R>F;let N;A?(N=m.top-b-S,N<S&&(N=S)):(N=m.bottom+S,N+b>y&&(N=Math.max(S,y-b-S)));let D=m.left;const x=256;D+x>E&&(D=E-x-S,D<S&&(D=S)),T(a,{top:N,left:D,width:Math.max(m.width,x)},!0)}Ze(()=>{t()===null&&t([])});function u(m){t()===null&&t([]),t().findIndex(E=>E.groupId===m.groupId)>=0?t(t().filter(E=>E.groupId!==m.groupId)):t([...t(),m])}function c(m){return t()===null?!1:t().some(y=>y.groupId===m.groupId)}function f(){t([])}Ze(()=>{if(n()){if(!e.buttonRect){T(a,null);return}requestAnimationFrame(()=>{requestAnimationFrame(()=>{l()})});const m=()=>l(),y=S=>{const I=S.target;w(o)&&!w(o).contains(I)&&(n(!1),e.onClose?.())},E=setTimeout(()=>{window.addEventListener("resize",m),document.addEventListener("click",y,!0)},10);return()=>{clearTimeout(E),window.removeEventListener("resize",m),document.removeEventListener("click",y,!0)}}else T(a,null)});let p=C(!1);Ze(()=>{n()&&w(o)&&!w(p)&&(T(p,!0),requestAnimationFrame(()=>{l()})),n()||T(p,!1)});var h=Ks(),d=br(h);{var g=m=>{var y=Jf();y.__click=N=>N.stopPropagation();var E=V(y),S=V(E);S.__click=()=>f();var I=Z(S,2);{var b=N=>{var D=Hf();$(N,D)};le(I,N=>{e.items.length>0&&N(b)})}var F=Z(I,2);On(F,17,()=>e.items,Nn,(N,D)=>{var x=jf(),B=V(x);_t(B),B.__change=()=>u(w(D));var k=Z(B,2),M=V(k,!0);P(k),P(x),ae((re,te,j)=>{pt(x,1,`uno-sxy2vd ${re??""}`,"svelte-ytt77r"),Ia(B,te),Se(M,j)},[()=>c(w(D))?"uno-95ezdi":"",()=>c(w(D)),()=>i(w(D))]),$(N,x)});var R=Z(F,2);{var A=N=>{var D=Zf();$(N,D)};le(R,N=>{e.items.length===0&&N(A)})}P(E),P(y),gr(y,N=>T(o,N),()=>w(o)),ae(()=>{pt(y,1,pr(["uno-q4fwa4",s()]),"svelte-ytt77r"),Fa(y,`top: ${w(a).top??""}px; left: ${w(a).left??""}px; width: ${w(a).width??""}px;`),pt(S,1,`uno-nxuxc4 ${t()===null||t().length===0?"uno-tjbjo6":""}`,"svelte-ytt77r")}),$(m,y)};le(d,m=>{n()&&w(a)&&m(g)})}$(r,h),Qe()}at(["click","change"]);var zs=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},Re=[],ve=[],Kf=typeof Uint8Array<"u"?Uint8Array:Array,$n=!1;function Lo(){$n=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=r.length;e<t;++e)Re[e]=r[e],ve[r.charCodeAt(e)]=e;ve[45]=62,ve[95]=63}function Qf(r){$n||Lo();var e,t,n,s,i,o,a=r.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");i=r[a-2]==="="?2:r[a-1]==="="?1:0,o=new Kf(a*3/4-i),n=i>0?a-4:a;var l=0;for(e=0,t=0;e<n;e+=4,t+=3)s=ve[r.charCodeAt(e)]<<18|ve[r.charCodeAt(e+1)]<<12|ve[r.charCodeAt(e+2)]<<6|ve[r.charCodeAt(e+3)],o[l++]=s>>16&255,o[l++]=s>>8&255,o[l++]=s&255;return i===2?(s=ve[r.charCodeAt(e)]<<2|ve[r.charCodeAt(e+1)]>>4,o[l++]=s&255):i===1&&(s=ve[r.charCodeAt(e)]<<10|ve[r.charCodeAt(e+1)]<<4|ve[r.charCodeAt(e+2)]>>2,o[l++]=s>>8&255,o[l++]=s&255),o}function Xf(r){return Re[r>>18&63]+Re[r>>12&63]+Re[r>>6&63]+Re[r&63]}function ed(r,e,t){for(var n,s=[],i=e;i<t;i+=3)n=(r[i]<<16)+(r[i+1]<<8)+r[i+2],s.push(Xf(n));return s.join("")}function Ws(r){$n||Lo();for(var e,t=r.length,n=t%3,s="",i=[],o=16383,a=0,l=t-n;a<l;a+=o)i.push(ed(r,a,a+o>l?l:a+o));return n===1?(e=r[t-1],s+=Re[e>>2],s+=Re[e<<4&63],s+="=="):n===2&&(e=(r[t-2]<<8)+r[t-1],s+=Re[e>>10],s+=Re[e>>4&63],s+=Re[e<<2&63],s+="="),i.push(s),i.join("")}function Lr(r,e,t,n,s){var i,o,a=s*8-n-1,l=(1<<a)-1,u=l>>1,c=-7,f=t?s-1:0,p=t?-1:1,h=r[e+f];for(f+=p,i=h&(1<<-c)-1,h>>=-c,c+=a;c>0;i=i*256+r[e+f],f+=p,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=n;c>0;o=o*256+r[e+f],f+=p,c-=8);if(i===0)i=1-u;else{if(i===l)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-u}return(h?-1:1)*o*Math.pow(2,i-n)}function Uo(r,e,t,n,s,i){var o,a,l,u=i*8-s-1,c=(1<<u)-1,f=c>>1,p=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,d=n?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+f>=1?e+=p/l:e+=p*Math.pow(2,1-f),e*l>=2&&(o++,l/=2),o+f>=c?(a=0,o=c):o+f>=1?(a=(e*l-1)*Math.pow(2,s),o=o+f):(a=e*Math.pow(2,f-1)*Math.pow(2,s),o=0));s>=8;r[t+h]=a&255,h+=d,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;r[t+h]=o&255,h+=d,o/=256,u-=8);r[t+h-d]|=g*128}var td={}.toString,Po=Array.isArray||function(r){return td.call(r)=="[object Array]"},rd=50;v.TYPED_ARRAY_SUPPORT=zs.TYPED_ARRAY_SUPPORT!==void 0?zs.TYPED_ARRAY_SUPPORT:!0;Sr();function Sr(){return v.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Pe(r,e){if(Sr()<e)throw new RangeError("Invalid typed array length");return v.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=v.prototype):(r===null&&(r=new v(e)),r.length=e),r}function v(r,e,t){if(!v.TYPED_ARRAY_SUPPORT&&!(this instanceof v))return new v(r,e,t);if(typeof r=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return qn(this,r)}return Vo(this,r,e,t)}v.poolSize=8192;v._augment=function(r){return r.__proto__=v.prototype,r};function Vo(r,e,t,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?id(r,e,t,n):typeof e=="string"?sd(r,e,t):od(r,e)}v.from=function(r,e,t){return Vo(null,r,e,t)};v.TYPED_ARRAY_SUPPORT&&(v.prototype.__proto__=Uint8Array.prototype,v.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&v[Symbol.species]);function Go(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function nd(r,e,t,n){return Go(e),e<=0?Pe(r,e):t!==void 0?typeof n=="string"?Pe(r,e).fill(t,n):Pe(r,e).fill(t):Pe(r,e)}v.alloc=function(r,e,t){return nd(null,r,e,t)};function qn(r,e){if(Go(e),r=Pe(r,e<0?0:zn(e)|0),!v.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)r[t]=0;return r}v.allocUnsafe=function(r){return qn(null,r)};v.allocUnsafeSlow=function(r){return qn(null,r)};function sd(r,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!v.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=Bo(e,t)|0;r=Pe(r,n);var s=r.write(e,t);return s!==n&&(r=r.slice(0,s)),r}function bn(r,e){var t=e.length<0?0:zn(e.length)|0;r=Pe(r,t);for(var n=0;n<t;n+=1)r[n]=e[n]&255;return r}function id(r,e,t,n){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");return t===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,n),v.TYPED_ARRAY_SUPPORT?(r=e,r.__proto__=v.prototype):r=bn(r,e),r}function od(r,e){if(Me(e)){var t=zn(e.length)|0;return r=Pe(r,t),r.length===0||e.copy(r,0,0,t),r}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||bd(e.length)?Pe(r,0):bn(r,e);if(e.type==="Buffer"&&Po(e.data))return bn(r,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function zn(r){if(r>=Sr())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Sr().toString(16)+" bytes");return r|0}v.isBuffer=Te;function Me(r){return!!(r!=null&&r._isBuffer)}v.compare=function(e,t){if(!Me(e)||!Me(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,s=t.length,i=0,o=Math.min(n,s);i<o;++i)if(e[i]!==t[i]){n=e[i],s=t[i];break}return n<s?-1:s<n?1:0};v.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};v.concat=function(e,t){if(!Po(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return v.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var s=v.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!Me(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(s,i),i+=o.length}return s};function Bo(r,e){if(Me(r))return r.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var t=r.length;if(t===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return Er(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Zo(r).length;default:if(n)return Er(r).length;e=(""+e).toLowerCase(),n=!0}}v.byteLength=Bo;function ad(r,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return yd(this,e,t);case"utf8":case"utf-8":return zo(this,e,t);case"ascii":return pd(this,e,t);case"latin1":case"binary":return gd(this,e,t);case"base64":return hd(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return wd(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}v.prototype._isBuffer=!0;function nt(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}v.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)nt(this,t,t+1);return this};v.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)nt(this,t,t+3),nt(this,t+1,t+2);return this};v.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)nt(this,t,t+7),nt(this,t+1,t+6),nt(this,t+2,t+5),nt(this,t+3,t+4);return this};v.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?zo(this,0,e):ad.apply(this,arguments)};v.prototype.equals=function(e){if(!Me(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:v.compare(this,e)===0};v.prototype.inspect=function(){var e="",t=rd;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};v.prototype.compare=function(e,t,n,s,i){if(!Me(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),s===void 0&&(s=0),i===void 0&&(i=this.length),t<0||n>e.length||s<0||i>this.length)throw new RangeError("out of range index");if(s>=i&&t>=n)return 0;if(s>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,s>>>=0,i>>>=0,this===e)return 0;for(var o=i-s,a=n-t,l=Math.min(o,a),u=this.slice(s,i),c=e.slice(t,n),f=0;f<l;++f)if(u[f]!==c[f]){o=u[f],a=c[f];break}return o<a?-1:a<o?1:0};function $o(r,e,t,n,s){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=s?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(s)return-1;t=r.length-1}else if(t<0)if(s)t=0;else return-1;if(typeof e=="string"&&(e=v.from(e,n)),Me(e))return e.length===0?-1:Hs(r,e,t,n,s);if(typeof e=="number")return e=e&255,v.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):Hs(r,[e],t,n,s);throw new TypeError("val must be string, number or Buffer")}function Hs(r,e,t,n,s){var i=1,o=r.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;i=2,o/=2,a/=2,t/=2}function l(h,d){return i===1?h[d]:h.readUInt16BE(d*i)}var u;if(s){var c=-1;for(u=t;u<o;u++)if(l(r,u)===l(e,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===a)return c*i}else c!==-1&&(u-=u-c),c=-1}else for(t+a>o&&(t=o-a),u=t;u>=0;u--){for(var f=!0,p=0;p<a;p++)if(l(r,u+p)!==l(e,p)){f=!1;break}if(f)return u}return-1}v.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};v.prototype.indexOf=function(e,t,n){return $o(this,e,t,n,!0)};v.prototype.lastIndexOf=function(e,t,n){return $o(this,e,t,n,!1)};function ld(r,e,t,n){t=Number(t)||0;var s=r.length-t;n?(n=Number(n),n>s&&(n=s)):n=s;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;o<n;++o){var a=parseInt(e.substr(o*2,2),16);if(isNaN(a))return o;r[t+o]=a}return o}function ud(r,e,t,n){return Vr(Er(e,r.length-t),r,t,n)}function qo(r,e,t,n){return Vr(Ed(e),r,t,n)}function cd(r,e,t,n){return qo(r,e,t,n)}function fd(r,e,t,n){return Vr(Zo(e),r,t,n)}function dd(r,e,t,n){return Vr(Id(e,r.length-t),r,t,n)}v.prototype.write=function(e,t,n,s){if(t===void 0)s="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")s=t,n=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(n)?(n=n|0,s===void 0&&(s="utf8")):(s=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i=this.length-t;if((n===void 0||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var o=!1;;)switch(s){case"hex":return ld(this,e,t,n);case"utf8":case"utf-8":return ud(this,e,t,n);case"ascii":return qo(this,e,t,n);case"latin1":case"binary":return cd(this,e,t,n);case"base64":return fd(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return dd(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),o=!0}};v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function hd(r,e,t){return e===0&&t===r.length?Ws(r):Ws(r.slice(e,t))}function zo(r,e,t){t=Math.min(r.length,t);for(var n=[],s=e;s<t;){var i=r[s],o=null,a=i>239?4:i>223?3:i>191?2:1;if(s+a<=t){var l,u,c,f;switch(a){case 1:i<128&&(o=i);break;case 2:l=r[s+1],(l&192)===128&&(f=(i&31)<<6|l&63,f>127&&(o=f));break;case 3:l=r[s+1],u=r[s+2],(l&192)===128&&(u&192)===128&&(f=(i&15)<<12|(l&63)<<6|u&63,f>2047&&(f<55296||f>57343)&&(o=f));break;case 4:l=r[s+1],u=r[s+2],c=r[s+3],(l&192)===128&&(u&192)===128&&(c&192)===128&&(f=(i&15)<<18|(l&63)<<12|(u&63)<<6|c&63,f>65535&&f<1114112&&(o=f))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),s+=a}return md(n)}var js=4096;function md(r){var e=r.length;if(e<=js)return String.fromCharCode.apply(String,r);for(var t="",n=0;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=js));return t}function pd(r,e,t){var n="";t=Math.min(r.length,t);for(var s=e;s<t;++s)n+=String.fromCharCode(r[s]&127);return n}function gd(r,e,t){var n="";t=Math.min(r.length,t);for(var s=e;s<t;++s)n+=String.fromCharCode(r[s]);return n}function yd(r,e,t){var n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var s="",i=e;i<t;++i)s+=Sd(r[i]);return s}function wd(r,e,t){for(var n=r.slice(e,t),s="",i=0;i<n.length;i+=2)s+=String.fromCharCode(n[i]+n[i+1]*256);return s}v.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var s;if(v.TYPED_ARRAY_SUPPORT)s=this.subarray(e,t),s.__proto__=v.prototype;else{var i=t-e;s=new v(i,void 0);for(var o=0;o<i;++o)s[o]=this[o+e]}return s};function ue(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}v.prototype.readUIntLE=function(e,t,n){e=e|0,t=t|0,n||ue(e,t,this.length);for(var s=this[e],i=1,o=0;++o<t&&(i*=256);)s+=this[e+o]*i;return s};v.prototype.readUIntBE=function(e,t,n){e=e|0,t=t|0,n||ue(e,t,this.length);for(var s=this[e+--t],i=1;t>0&&(i*=256);)s+=this[e+--t]*i;return s};v.prototype.readUInt8=function(e,t){return t||ue(e,1,this.length),this[e]};v.prototype.readUInt16LE=function(e,t){return t||ue(e,2,this.length),this[e]|this[e+1]<<8};v.prototype.readUInt16BE=function(e,t){return t||ue(e,2,this.length),this[e]<<8|this[e+1]};v.prototype.readUInt32LE=function(e,t){return t||ue(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};v.prototype.readUInt32BE=function(e,t){return t||ue(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};v.prototype.readIntLE=function(e,t,n){e=e|0,t=t|0,n||ue(e,t,this.length);for(var s=this[e],i=1,o=0;++o<t&&(i*=256);)s+=this[e+o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s};v.prototype.readIntBE=function(e,t,n){e=e|0,t=t|0,n||ue(e,t,this.length);for(var s=t,i=1,o=this[e+--s];s>0&&(i*=256);)o+=this[e+--s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o};v.prototype.readInt8=function(e,t){return t||ue(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};v.prototype.readInt16LE=function(e,t){t||ue(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};v.prototype.readInt16BE=function(e,t){t||ue(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};v.prototype.readInt32LE=function(e,t){return t||ue(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};v.prototype.readInt32BE=function(e,t){return t||ue(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};v.prototype.readFloatLE=function(e,t){return t||ue(e,4,this.length),Lr(this,e,!0,23,4)};v.prototype.readFloatBE=function(e,t){return t||ue(e,4,this.length),Lr(this,e,!1,23,4)};v.prototype.readDoubleLE=function(e,t){return t||ue(e,8,this.length),Lr(this,e,!0,52,8)};v.prototype.readDoubleBE=function(e,t){return t||ue(e,8,this.length),Lr(this,e,!1,52,8)};function ye(r,e,t,n,s,i){if(!Me(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<i)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}v.prototype.writeUIntLE=function(e,t,n,s){if(e=+e,t=t|0,n=n|0,!s){var i=Math.pow(2,8*n)-1;ye(this,e,t,n,i,0)}var o=1,a=0;for(this[t]=e&255;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n};v.prototype.writeUIntBE=function(e,t,n,s){if(e=+e,t=t|0,n=n|0,!s){var i=Math.pow(2,8*n)-1;ye(this,e,t,n,i,0)}var o=n-1,a=1;for(this[t+o]=e&255;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n};v.prototype.writeUInt8=function(e,t,n){return e=+e,t=t|0,n||ye(this,e,t,1,255,0),v.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function Ur(r,e,t,n){e<0&&(e=65535+e+1);for(var s=0,i=Math.min(r.length-t,2);s<i;++s)r[t+s]=(e&255<<8*(n?s:1-s))>>>(n?s:1-s)*8}v.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t|0,n||ye(this,e,t,2,65535,0),v.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Ur(this,e,t,!0),t+2};v.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t|0,n||ye(this,e,t,2,65535,0),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Ur(this,e,t,!1),t+2};function Pr(r,e,t,n){e<0&&(e=4294967295+e+1);for(var s=0,i=Math.min(r.length-t,4);s<i;++s)r[t+s]=e>>>(n?s:3-s)*8&255}v.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t|0,n||ye(this,e,t,4,4294967295,0),v.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):Pr(this,e,t,!0),t+4};v.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t|0,n||ye(this,e,t,4,4294967295,0),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Pr(this,e,t,!1),t+4};v.prototype.writeIntLE=function(e,t,n,s){if(e=+e,t=t|0,!s){var i=Math.pow(2,8*n-1);ye(this,e,t,n,i-1,-i)}var o=0,a=1,l=0;for(this[t]=e&255;++o<n&&(a*=256);)e<0&&l===0&&this[t+o-1]!==0&&(l=1),this[t+o]=(e/a>>0)-l&255;return t+n};v.prototype.writeIntBE=function(e,t,n,s){if(e=+e,t=t|0,!s){var i=Math.pow(2,8*n-1);ye(this,e,t,n,i-1,-i)}var o=n-1,a=1,l=0;for(this[t+o]=e&255;--o>=0&&(a*=256);)e<0&&l===0&&this[t+o+1]!==0&&(l=1),this[t+o]=(e/a>>0)-l&255;return t+n};v.prototype.writeInt8=function(e,t,n){return e=+e,t=t|0,n||ye(this,e,t,1,127,-128),v.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};v.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t|0,n||ye(this,e,t,2,32767,-32768),v.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Ur(this,e,t,!0),t+2};v.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t|0,n||ye(this,e,t,2,32767,-32768),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Ur(this,e,t,!1),t+2};v.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t|0,n||ye(this,e,t,4,2147483647,-2147483648),v.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Pr(this,e,t,!0),t+4};v.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t|0,n||ye(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Pr(this,e,t,!1),t+4};function Wo(r,e,t,n,s,i){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Ho(r,e,t,n,s){return s||Wo(r,e,t,4),Uo(r,e,t,n,23,4),t+4}v.prototype.writeFloatLE=function(e,t,n){return Ho(this,e,t,!0,n)};v.prototype.writeFloatBE=function(e,t,n){return Ho(this,e,t,!1,n)};function jo(r,e,t,n,s){return s||Wo(r,e,t,8),Uo(r,e,t,n,52,8),t+8}v.prototype.writeDoubleLE=function(e,t,n){return jo(this,e,t,!0,n)};v.prototype.writeDoubleBE=function(e,t,n){return jo(this,e,t,!1,n)};v.prototype.copy=function(e,t,n,s){if(n||(n=0),!s&&s!==0&&(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<n&&(s=n),s===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-n&&(s=e.length-t+n);var i=s-n,o;if(this===e&&n<t&&t<s)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!v.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i};v.prototype.fill=function(e,t,n,s){if(typeof e=="string"){if(typeof t=="string"?(s=t,t=0,n=this.length):typeof n=="string"&&(s=n,n=this.length),e.length===1){var i=e.charCodeAt(0);i<256&&(e=i)}if(s!==void 0&&typeof s!="string")throw new TypeError("encoding must be a string");if(typeof s=="string"&&!v.isEncoding(s))throw new TypeError("Unknown encoding: "+s)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{var a=Me(e)?e:Er(new v(e,s).toString()),l=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%l]}return this};var _d=/[^+\/0-9A-Za-z-_]/g;function vd(r){if(r=Td(r).replace(_d,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Td(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Sd(r){return r<16?"0"+r.toString(16):r.toString(16)}function Er(r,e){e=e||1/0;for(var t,n=r.length,s=null,i=[],o=0;o<n;++o){if(t=r.charCodeAt(o),t>55295&&t<57344){if(!s){if(t>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}s=t;continue}if(t<56320){(e-=3)>-1&&i.push(239,191,189),s=t;continue}t=(s-55296<<10|t-56320)+65536}else s&&(e-=3)>-1&&i.push(239,191,189);if(s=null,t<128){if((e-=1)<0)break;i.push(t)}else if(t<2048){if((e-=2)<0)break;i.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;i.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;i.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return i}function Ed(r){for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function Id(r,e){for(var t,n,s,i=[],o=0;o<r.length&&!((e-=2)<0);++o)t=r.charCodeAt(o),n=t>>8,s=t%256,i.push(s),i.push(n);return i}function Zo(r){return Qf(vd(r))}function Vr(r,e,t,n){for(var s=0;s<n&&!(s+t>=e.length||s>=r.length);++s)e[s+t]=r[s];return s}function bd(r){return r!==r}function Te(r){return r!=null&&(!!r._isBuffer||Jo(r)||xd(r))}function Jo(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function xd(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&Jo(r.slice(0,0))}class Y extends Error{constructor(e,t,n,...s){Array.isArray(t)&&(t=t.join(" ").trim()),super(t),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,Y),this.code=e;for(const i of s)for(const o in i){const a=i[o];this[o]=Te(a)?a.toString(n.encoding):a==null?a:JSON.parse(JSON.stringify(a))}}}const Nd=function(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)},Yo=function(r){const e=[];for(let t=0,n=r.length;t<n;t++){const s=r[t];if(s==null||s===!1)e[t]={disabled:!0};else if(typeof s=="string")e[t]={name:s};else if(Nd(s)){if(typeof s.name!="string")throw new Y("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${t}`,"when column is an object literal"]);e[t]=s}else throw new Y("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(s)} at position ${t}`])}return e};class Zs{constructor(e=100){this.size=e,this.length=0,this.buf=v.allocUnsafe(e)}prepend(e){if(Te(e)){const t=this.length+e.length;if(t>=this.size&&(this.resize(),t>=this.size))throw Error("INVALID_BUFFER_STATE");const n=this.buf;this.buf=v.allocUnsafe(this.size),e.copy(this.buf,0),n.copy(this.buf,e.length),this.length+=e.length}else{const t=this.length++;t===this.size&&this.resize();const n=this.clone();this.buf[0]=e,n.copy(this.buf,1,0,t)}}append(e){const t=this.length++;t===this.size&&this.resize(),this.buf[t]=e}clone(){return v.from(this.buf.slice(0,this.length))}resize(){const e=this.length;this.size=this.size*2;const t=v.allocUnsafe(this.size);this.buf.copy(t,0,0,e),this.buf=t}toString(e){return e?this.buf.slice(0,this.length).toString(e):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}}const Od=12,kd=13,Ad=10,Cd=32,Fd=9,Rd=function(r){return{bomSkipped:!1,bufBytesStart:0,castField:r.cast_function,commenting:!1,error:void 0,enabled:r.from_line===1,escaping:!1,escapeIsQuote:Te(r.escape)&&Te(r.quote)&&v.compare(r.escape,r.quote)===0,expectedRecordLength:Array.isArray(r.columns)?r.columns.length:void 0,field:new Zs(20),firstLineToHeaders:r.cast_first_line_to_header,needMoreDataSize:Math.max(r.comment!==null?r.comment.length:0,...r.delimiter.map(e=>e.length),r.quote!==null?r.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new Zs(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:r.record_delimiter.length===0?0:Math.max(...r.record_delimiter.map(e=>e.length)),trimChars:[v.from(" ",r.encoding)[0],v.from("	",r.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[v.from(v.from([kd],"utf8").toString(),r.encoding),v.from(v.from([Ad],"utf8").toString(),r.encoding),v.from(v.from([Od],"utf8").toString(),r.encoding),v.from(v.from([Cd],"utf8").toString(),r.encoding),v.from(v.from([Fd],"utf8").toString(),r.encoding)]}},Dd=function(r){return r.replace(/([A-Z])/g,function(e,t){return"_"+t.toLowerCase()})},Js=function(r){const e={};for(const n in r)e[Dd(n)]=r[n];if(e.encoding===void 0||e.encoding===!0)e.encoding="utf8";else if(e.encoding===null||e.encoding===!1)e.encoding=null;else if(typeof e.encoding!="string"&&e.encoding!==null)throw new Y("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(e.encoding)}`],e);if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)throw new Y("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,",`got ${JSON.stringify(e.bom)}`],e);if(e.cast_function=null,e.cast===void 0||e.cast===null||e.cast===!1||e.cast==="")e.cast=void 0;else if(typeof e.cast=="function")e.cast_function=e.cast,e.cast=!0;else if(e.cast!==!0)throw new Y("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(e.cast)}`],e);if(e.cast_date===void 0||e.cast_date===null||e.cast_date===!1||e.cast_date==="")e.cast_date=!1;else if(e.cast_date===!0)e.cast_date=function(n){const s=Date.parse(n);return isNaN(s)?n:new Date(s)};else if(typeof e.cast_date!="function")throw new Y("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(e.cast_date)}`],e);if(e.cast_first_line_to_header=void 0,e.columns===!0)e.cast_first_line_to_header=void 0;else if(typeof e.columns=="function")e.cast_first_line_to_header=e.columns,e.columns=!0;else if(Array.isArray(e.columns))e.columns=Yo(e.columns);else if(e.columns===void 0||e.columns===null||e.columns===!1)e.columns=!1;else throw new Y("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(e.columns)}`],e);if(e.group_columns_by_name===void 0||e.group_columns_by_name===null||e.group_columns_by_name===!1)e.group_columns_by_name=!1;else{if(e.group_columns_by_name!==!0)throw new Y("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",`got ${JSON.stringify(e.group_columns_by_name)}`],e);if(e.columns===!1)throw new Y("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],e)}if(e.comment===void 0||e.comment===null||e.comment===!1||e.comment==="")e.comment=null;else if(typeof e.comment=="string"&&(e.comment=v.from(e.comment,e.encoding)),!Te(e.comment))throw new Y("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(e.comment)}`],e);if(e.comment_no_infix===void 0||e.comment_no_infix===null||e.comment_no_infix===!1)e.comment_no_infix=!1;else if(e.comment_no_infix!==!0)throw new Y("CSV_INVALID_OPTION_COMMENT",["Invalid option comment_no_infix:","value must be a boolean,",`got ${JSON.stringify(e.comment_no_infix)}`],e);const t=JSON.stringify(e.delimiter);if(Array.isArray(e.delimiter)||(e.delimiter=[e.delimiter]),e.delimiter.length===0)throw new Y("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${t}`],e);if(e.delimiter=e.delimiter.map(function(n){if(n==null||n===!1)return v.from(",",e.encoding);if(typeof n=="string"&&(n=v.from(n,e.encoding)),!Te(n)||n.length===0)throw new Y("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${t}`],e);return n}),e.escape===void 0||e.escape===!0?e.escape=v.from('"',e.encoding):typeof e.escape=="string"?e.escape=v.from(e.escape,e.encoding):(e.escape===null||e.escape===!1)&&(e.escape=null),e.escape!==null&&!Te(e.escape))throw new Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(e.escape)}`);if(e.from===void 0||e.from===null)e.from=1;else if(typeof e.from=="string"&&/\d+/.test(e.from)&&(e.from=parseInt(e.from)),Number.isInteger(e.from)){if(e.from<0)throw new Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(r.from)}`)}else throw new Error(`Invalid Option: from must be an integer, got ${JSON.stringify(e.from)}`);if(e.from_line===void 0||e.from_line===null)e.from_line=1;else if(typeof e.from_line=="string"&&/\d+/.test(e.from_line)&&(e.from_line=parseInt(e.from_line)),Number.isInteger(e.from_line)){if(e.from_line<=0)throw new Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(r.from_line)}`)}else throw new Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(r.from_line)}`);if(e.ignore_last_delimiters===void 0||e.ignore_last_delimiters===null)e.ignore_last_delimiters=!1;else if(typeof e.ignore_last_delimiters=="number")e.ignore_last_delimiters=Math.floor(e.ignore_last_delimiters),e.ignore_last_delimiters===0&&(e.ignore_last_delimiters=!1);else if(typeof e.ignore_last_delimiters!="boolean")throw new Y("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(e.ignore_last_delimiters)}`],e);if(e.ignore_last_delimiters===!0&&e.columns===!1)throw new Y("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],e);if(e.info===void 0||e.info===null||e.info===!1)e.info=!1;else if(e.info!==!0)throw new Error(`Invalid Option: info must be true, got ${JSON.stringify(e.info)}`);if(e.max_record_size===void 0||e.max_record_size===null||e.max_record_size===!1)e.max_record_size=0;else if(!(Number.isInteger(e.max_record_size)&&e.max_record_size>=0))if(typeof e.max_record_size=="string"&&/\d+/.test(e.max_record_size))e.max_record_size=parseInt(e.max_record_size);else throw new Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(e.max_record_size)}`);if(e.objname===void 0||e.objname===null||e.objname===!1)e.objname=void 0;else if(Te(e.objname)){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty buffer");e.encoding===null||(e.objname=e.objname.toString(e.encoding))}else if(typeof e.objname=="string"){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty string")}else if(typeof e.objname!="number")throw new Error(`Invalid Option: objname must be a string or a buffer, got ${e.objname}`);if(e.objname!==void 0){if(typeof e.objname=="number"){if(e.columns!==!1)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(e.columns===!1)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index")}if(e.on_record===void 0||e.on_record===null)e.on_record=void 0;else if(typeof e.on_record!="function")throw new Y("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(e.on_record)}`],e);if(e.on_skip!==void 0&&e.on_skip!==null&&typeof e.on_skip!="function")throw new Error(`Invalid Option: on_skip must be a function, got ${JSON.stringify(e.on_skip)}`);if(e.quote===null||e.quote===!1||e.quote==="")e.quote=null;else if(e.quote===void 0||e.quote===!0?e.quote=v.from('"',e.encoding):typeof e.quote=="string"&&(e.quote=v.from(e.quote,e.encoding)),!Te(e.quote))throw new Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(e.quote)}`);if(e.raw===void 0||e.raw===null||e.raw===!1)e.raw=!1;else if(e.raw!==!0)throw new Error(`Invalid Option: raw must be true, got ${JSON.stringify(e.raw)}`);if(e.record_delimiter===void 0)e.record_delimiter=[];else if(typeof e.record_delimiter=="string"||Te(e.record_delimiter)){if(e.record_delimiter.length===0)throw new Y("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);e.record_delimiter=[e.record_delimiter]}else if(!Array.isArray(e.record_delimiter))throw new Y("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);if(e.record_delimiter=e.record_delimiter.map(function(n,s){if(typeof n!="string"&&!Te(n))throw new Y("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${s},`,`got ${JSON.stringify(n)}`],e);if(n.length===0)throw new Y("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${s},`,`got ${JSON.stringify(n)}`],e);return typeof n=="string"&&(n=v.from(n,e.encoding)),n}),typeof e.relax_column_count!="boolean")if(e.relax_column_count===void 0||e.relax_column_count===null)e.relax_column_count=!1;else throw new Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(e.relax_column_count)}`);if(typeof e.relax_column_count_less!="boolean")if(e.relax_column_count_less===void 0||e.relax_column_count_less===null)e.relax_column_count_less=!1;else throw new Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(e.relax_column_count_less)}`);if(typeof e.relax_column_count_more!="boolean")if(e.relax_column_count_more===void 0||e.relax_column_count_more===null)e.relax_column_count_more=!1;else throw new Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(e.relax_column_count_more)}`);if(typeof e.relax_quotes!="boolean")if(e.relax_quotes===void 0||e.relax_quotes===null)e.relax_quotes=!1;else throw new Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(e.relax_quotes)}`);if(typeof e.skip_empty_lines!="boolean")if(e.skip_empty_lines===void 0||e.skip_empty_lines===null)e.skip_empty_lines=!1;else throw new Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(e.skip_empty_lines)}`);if(typeof e.skip_records_with_empty_values!="boolean")if(e.skip_records_with_empty_values===void 0||e.skip_records_with_empty_values===null)e.skip_records_with_empty_values=!1;else throw new Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(e.skip_records_with_empty_values)}`);if(typeof e.skip_records_with_error!="boolean")if(e.skip_records_with_error===void 0||e.skip_records_with_error===null)e.skip_records_with_error=!1;else throw new Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(e.skip_records_with_error)}`);if(e.rtrim===void 0||e.rtrim===null||e.rtrim===!1)e.rtrim=!1;else if(e.rtrim!==!0)throw new Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(e.rtrim)}`);if(e.ltrim===void 0||e.ltrim===null||e.ltrim===!1)e.ltrim=!1;else if(e.ltrim!==!0)throw new Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(e.ltrim)}`);if(e.trim===void 0||e.trim===null||e.trim===!1)e.trim=!1;else if(e.trim!==!0)throw new Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(e.trim)}`);if(e.trim===!0&&r.ltrim!==!1?e.ltrim=!0:e.ltrim!==!0&&(e.ltrim=!1),e.trim===!0&&r.rtrim!==!1?e.rtrim=!0:e.rtrim!==!0&&(e.rtrim=!1),e.to===void 0||e.to===null)e.to=-1;else if(e.to!==-1)if(typeof e.to=="string"&&/\d+/.test(e.to)&&(e.to=parseInt(e.to)),Number.isInteger(e.to)){if(e.to<=0)throw new Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(r.to)}`)}else throw new Error(`Invalid Option: to must be an integer, got ${JSON.stringify(r.to)}`);if(e.to_line===void 0||e.to_line===null)e.to_line=-1;else if(e.to_line!==-1)if(typeof e.to_line=="string"&&/\d+/.test(e.to_line)&&(e.to_line=parseInt(e.to_line)),Number.isInteger(e.to_line)){if(e.to_line<=0)throw new Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(r.to_line)}`)}else throw new Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(r.to_line)}`);return e},Ys=function(r){return r.every(e=>e==null||e.toString&&e.toString().trim()==="")},Md=13,Ld=10,ht={utf8:v.from([239,187,191]),utf16le:v.from([255,254])},Ud=function(r={}){const e={bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},t=Js(r);return{info:e,original_options:r,options:t,state:Rd(t),__needMoreData:function(n,s,i){if(i)return!1;const{encoding:o,escape:a,quote:l}=this.options,{quoting:u,needMoreDataSize:c,recordDelimiterMaxLength:f}=this.state,p=s-n-1,h=Math.max(c,f===0?v.from(`\r
`,o).length:f,u?(a===null?0:a.length)+l.length:0,u?l.length+f:0);return p<h},parse:function(n,s,i,o){const{bom:a,comment_no_infix:l,encoding:u,from_line:c,ltrim:f,max_record_size:p,raw:h,relax_quotes:d,rtrim:g,skip_empty_lines:m,to:y,to_line:E}=this.options;let{comment:S,escape:I,quote:b,record_delimiter:F}=this.options;const{bomSkipped:R,previousBuf:A,rawBuffer:N,escapeIsQuote:D}=this.state;let x;if(A===void 0)if(n===void 0){o();return}else x=n;else A!==void 0&&n===void 0?x=A:x=v.concat([A,n]);if(R===!1)if(a===!1)this.state.bomSkipped=!0;else if(x.length<3){if(s===!1){this.state.previousBuf=x;return}}else{for(const M in ht)if(ht[M].compare(x,0,ht[M].length)===0){const re=ht[M].length;this.state.bufBytesStart+=re,x=x.slice(re);const te=Js({...this.original_options,encoding:M});for(const j in te)this.options[j]=te[j];({comment:S,escape:I,quote:b}=this.options);break}this.state.bomSkipped=!0}const B=x.length;let k;for(k=0;k<B&&!this.__needMoreData(k,B,s);k++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1),E!==-1&&this.info.lines>E){this.state.stop=!0,o();return}this.state.quoting===!1&&F.length===0&&this.__autoDiscoverRecordDelimiter(x,k)&&(F=this.options.record_delimiter);const M=x[k];if(h===!0&&N.append(M),(M===Md||M===Ld)&&this.state.wasRowDelimiter===!1&&(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(I!==null&&this.state.quoting===!0&&this.__isEscape(x,k,M)&&k+I.length<B)if(D){if(this.__isQuote(x,k+I.length)){this.state.escaping=!0,k+=I.length-1;continue}}else{this.state.escaping=!0,k+=I.length-1;continue}if(this.state.commenting===!1&&this.__isQuote(x,k))if(this.state.quoting===!0){const j=x[k+b.length],q=g&&this.__isCharTrimable(x,k+b.length),ne=S!==null&&this.__compareBytes(S,x,k+b.length,j),Q=this.__isDelimiter(x,k+b.length,j),ee=F.length===0?this.__autoDiscoverRecordDelimiter(x,k+b.length):this.__isRecordDelimiter(j,x,k+b.length);if(I!==null&&this.__isEscape(x,k,M)&&this.__isQuote(x,k+I.length))k+=I.length-1;else if(!j||Q||ee||ne||q){this.state.quoting=!1,this.state.wasQuoting=!0,k+=b.length-1;continue}else if(d===!1){const X=this.__error(new Y("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(j)}"`,`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(X!==void 0)return X}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(b),k+=b.length-1}else if(this.state.field.length!==0){if(d===!1){const j=this.__infoField(),q=Object.keys(ht).map(Q=>ht[Q].equals(this.state.field.toString())?Q:!1).filter(Boolean)[0],ne=this.__error(new Y("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(j.column)} at line ${j.lines}, value is ${JSON.stringify(this.state.field.toString(u))}`,q?`(${q} bom)`:void 0],this.options,j,{field:this.state.field}));if(ne!==void 0)return ne}}else{this.state.quoting=!0,k+=b.length-1;continue}if(this.state.quoting===!1){const j=this.__isRecordDelimiter(M,x,k);if(j!==0){if(this.state.commenting&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0)this.info.comment_lines++;else{if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=c){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),k+=j-1;continue}if(m===!0&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0){this.info.empty_lines++,k+=j-1;continue}this.info.bytes=this.state.bufBytesStart+k;const Q=this.__onField();if(Q!==void 0)return Q;this.info.bytes=this.state.bufBytesStart+k+j;const ee=this.__onRecord(i);if(ee!==void 0)return ee;if(y!==-1&&this.info.records>=y){this.state.stop=!0,o();return}}this.state.commenting=!1,k+=j-1;continue}if(this.state.commenting)continue;if(S!==null&&(l===!1||this.state.record.length===0&&this.state.field.length===0)&&this.__compareBytes(S,x,k,M)!==0){this.state.commenting=!0;continue}const q=this.__isDelimiter(x,k,M);if(q!==0){this.info.bytes=this.state.bufBytesStart+k;const ne=this.__onField();if(ne!==void 0)return ne;k+=q-1;continue}}}if(this.state.commenting===!1&&p!==0&&this.state.record_length+this.state.field.length>p)return this.__error(new Y("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${p}`,`at line ${this.info.lines}`],this.options,this.__infoField()));const re=f===!1||this.state.quoting===!0||this.state.field.length!==0||!this.__isCharTrimable(x,k),te=g===!1||this.state.wasQuoting===!1;if(re===!0&&te===!0)this.state.field.append(M);else{if(g===!0&&!this.__isCharTrimable(x,k))return this.__error(new Y("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()));re===!1&&(k+=this.__isCharTrimable(x,k)-1);continue}}if(s===!0)if(this.state.quoting===!0){const M=this.__error(new Y("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField()));if(M!==void 0)return M}else if(this.state.wasQuoting===!0||this.state.record.length!==0||this.state.field.length!==0){this.info.bytes=this.state.bufBytesStart+k;const M=this.__onField();if(M!==void 0)return M;const re=this.__onRecord(i);if(re!==void 0)return re}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.bufBytesStart+=k,this.state.previousBuf=x.slice(k);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(n){const{columns:s,group_columns_by_name:i,encoding:o,info:a,from:l,relax_column_count:u,relax_column_count_less:c,relax_column_count_more:f,raw:p,skip_records_with_empty_values:h}=this.options,{enabled:d,record:g}=this.state;if(d===!1)return this.__resetRecord();const m=g.length;if(s===!0){if(h===!0&&Ys(g)){this.__resetRecord();return}return this.__firstLineToColumns(g)}if(s===!1&&this.info.records===0&&(this.state.expectedRecordLength=m),m!==this.state.expectedRecordLength){const y=s===!1?new Y("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${m} on line ${this.info.lines}`],this.options,this.__infoField(),{record:g}):new Y("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${s.length},`,`got ${m} on line ${this.info.lines}`],this.options,this.__infoField(),{record:g});if(u===!0||c===!0&&m<this.state.expectedRecordLength||f===!0&&m>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=y;else{const E=this.__error(y);if(E)return E}}if(h===!0&&Ys(g)){this.__resetRecord();return}if(this.state.recordHasError===!0){this.__resetRecord(),this.state.recordHasError=!1;return}if(this.info.records++,l===1||this.info.records>=l){const{objname:y}=this.options;if(s!==!1){const E={};for(let S=0,I=g.length;S<I;S++)s[S]===void 0||s[S].disabled||(i===!0&&E[s[S].name]!==void 0?Array.isArray(E[s[S].name])?E[s[S].name]=E[s[S].name].concat(g[S]):E[s[S].name]=[E[s[S].name],g[S]]:E[s[S].name]=g[S]);if(p===!0||a===!0){const S=Object.assign({record:E},p===!0?{raw:this.state.rawBuffer.toString(o)}:{},a===!0?{info:this.__infoRecord()}:{}),I=this.__push(y===void 0?S:[E[y],S],n);if(I)return I}else{const S=this.__push(y===void 0?E:[E[y],E],n);if(S)return S}}else if(p===!0||a===!0){const E=Object.assign({record:g},p===!0?{raw:this.state.rawBuffer.toString(o)}:{},a===!0?{info:this.__infoRecord()}:{}),S=this.__push(y===void 0?E:[g[y],E],n);if(S)return S}else{const E=this.__push(y===void 0?g:[g[y],g],n);if(E)return E}}this.__resetRecord()},__firstLineToColumns:function(n){const{firstLineToHeaders:s}=this.state;try{const i=s===void 0?n:s.call(null,n);if(!Array.isArray(i))return this.__error(new Y("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(i)}`],this.options,this.__infoField(),{headers:i}));const o=Yo(i);this.state.expectedRecordLength=o.length,this.options.columns=o,this.__resetRecord();return}catch(i){return i}},__resetRecord:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){const{cast:n,encoding:s,rtrim:i,max_record_size:o}=this.options,{enabled:a,wasQuoting:l}=this.state;if(a===!1)return this.__resetField();let u=this.state.field.toString(s);if(i===!0&&l===!1&&(u=u.trimRight()),n===!0){const[c,f]=this.__cast(u);if(c!==void 0)return c;u=f}this.state.record.push(u),o!==0&&typeof u=="string"&&(this.state.record_length+=u.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(n,s){const{on_record:i}=this.options;if(i!==void 0){const o=this.__infoRecord();try{n=i.call(null,n,o)}catch(a){return a}if(n==null)return}s(n)},__cast:function(n){const{columns:s,relax_column_count:i}=this.options;if(Array.isArray(s)===!0&&i&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(this.state.castField!==null)try{const a=this.__infoField();return[void 0,this.state.castField.call(null,n,a)]}catch(a){return[a]}if(this.__isFloat(n))return[void 0,parseFloat(n)];if(this.options.cast_date!==!1){const a=this.__infoField();return[void 0,this.options.cast_date.call(null,n,a)]}return[void 0,n]},__isCharTrimable:function(n,s){return((o,a)=>{const{timchars:l}=this.state;e:for(let u=0;u<l.length;u++){const c=l[u];for(let f=0;f<c.length;f++)if(c[f]!==o[a+f])continue e;return c.length}return 0})(n,s)},__isFloat:function(n){return n-parseFloat(n)+1>=0},__compareBytes:function(n,s,i,o){if(n[0]!==o)return 0;const a=n.length;for(let l=1;l<a;l++)if(n[l]!==s[i+l])return 0;return a},__isDelimiter:function(n,s,i){const{delimiter:o,ignore_last_delimiters:a}=this.options;if(a===!0&&this.state.record.length===this.options.columns.length-1)return 0;if(a!==!1&&typeof a=="number"&&this.state.record.length===a-1)return 0;e:for(let l=0;l<o.length;l++){const u=o[l];if(u[0]===i){for(let c=1;c<u.length;c++)if(u[c]!==n[s+c])continue e;return u.length}}return 0},__isRecordDelimiter:function(n,s,i){const{record_delimiter:o}=this.options,a=o.length;e:for(let l=0;l<a;l++){const u=o[l],c=u.length;if(u[0]===n){for(let f=1;f<c;f++)if(u[f]!==s[i+f])continue e;return u.length}}return 0},__isEscape:function(n,s,i){const{escape:o}=this.options;if(o===null)return!1;const a=o.length;if(o[0]===i){for(let l=0;l<a;l++)if(o[l]!==n[s+l])return!1;return!0}return!1},__isQuote:function(n,s){const{quote:i}=this.options;if(i===null)return!1;const o=i.length;for(let a=0;a<o;a++)if(i[a]!==n[s+a])return!1;return!0},__autoDiscoverRecordDelimiter:function(n,s){const{encoding:i}=this.options,o=[v.from(`\r
`,i),v.from(`
`,i),v.from("\r",i)];e:for(let a=0;a<o.length;a++){const l=o[a].length;for(let u=0;u<l;u++)if(o[a][u]!==n[s+u])continue e;return this.options.record_delimiter.push(o[a]),this.state.recordDelimiterMaxLength=o[a].length,o[a].length}return 0},__error:function(n){const{encoding:s,raw:i,skip_records_with_error:o}=this.options,a=typeof n=="string"?new Error(n):n;if(o){if(this.state.recordHasError=!0,this.options.on_skip!==void 0)try{this.options.on_skip(a,i?this.state.rawBuffer.toString(s):void 0)}catch(l){return l}return}else return a},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){const{columns:n,raw:s,encoding:i}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:n===!0,index:this.state.record.length,raw:s?this.state.rawBuffer.toString(i):void 0}},__infoField:function(){const{columns:n}=this.options,s=Array.isArray(n);return{...this.__infoRecord(),column:s===!0?n.length>this.state.record.length?n[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}},Pd=function(r,e={}){typeof r=="string"&&(r=v.from(r));const t=e&&e.objname?{}:[],n=Ud(e),s=a=>{n.options.objname===void 0?t.push(a):t[a[0]]=a[1]},i=()=>{},o=n.parse(r,!0,s,i);if(o!==void 0)throw o;return t};class Ve{#e=C(null);get data(){return w(this.#e)}set data(e){T(this.#e,e,!0)}#t=C(!1);get isLoading(){return w(this.#t)}set isLoading(e){T(this.#t,e,!0)}#r=C(null);get loadError(){return w(this.#r)}set loadError(e){T(this.#r,e,!0)}loadPromise=null;async load(){if(this.data!==null)return;if(this.loadPromise)return this.loadPromise;this.isLoading=!0,this.loadError=null;let e,t;this.loadPromise=new Promise((n,s)=>{e=n,t=s});try{const n=Na("/chapter_export.csv"),s=await fetch(n);if(!s.ok)throw new Error(`Failed to fetch CSV: ${s.status} ${s.statusText}`);const i=await s.text();this.data=this.parseCSV(i),e()}catch(n){this.loadError=n instanceof Error?n:new Error("Unknown error loading CSV"),t(this.loadError)}finally{this.isLoading=!1}return this.loadPromise}async ensureLoaded(){if(this.data===null){if(this.loadPromise){await this.loadPromise;return}await this.load()}}parseCSV(e){const t=Pd(e,{columns:!0,skip_empty_lines:!0,trim:!0}),n=new it;for(const s of t){const i=s.weebdex_id,o=s.volume||"",a=s.chapter||"",l=`${o}|${a}`;let u=[];if(s.group_names!=null&&s.group_names.trim()!==""&&s.group_names!=="[]")try{const d=JSON.parse(s.group_names);Array.isArray(d)&&(u=d.filter(g=>typeof g=="string"&&g.trim()!=="").map(g=>g.trim()))}catch(d){console.warn(`Failed to parse group_names for ${i}:`,d)}let c=[];if(s.group_alt_names!=null&&s.group_alt_names.trim()!==""&&s.group_alt_names!=="[]")try{const d=JSON.parse(s.group_alt_names);Array.isArray(d)&&(c=d.map(g=>{if(Array.isArray(g))return g;if(typeof g=="string")try{const m=JSON.parse(g);return Array.isArray(m)?m:[]}catch{return[]}return[]}))}catch(d){console.warn(`Failed to parse group_alt_names for ${i}:`,d)}for(;c.length<u.length;)c.push([]);c.length>u.length&&(c=c.slice(0,u.length));const f=u.map((d,g)=>{const y=(c[g]||[]).map(E=>{if(typeof E=="object"&&E!==null&&"en"in E){const S=E.en;return typeof S=="string"?S.trim():null}return null}).filter(E=>E!==null&&E!=="");return{primaryName:d.trim(),altNames:y}}),p={volume:o,chapter:a,title:s.title||"",groups:f};n.has(i)||n.set(i,new it);const h=n.get(i);h.has(l)||h.set(l,[]),h.get(l).push(p)}return n}async getChapterInfo(e,t,n){if(await this.ensureLoaded(),this.data===null)return console.log("[getChapterInfo] Data not loaded"),null;const s=this.data.get(e);if(!s)return console.log("[getChapterInfo] Series not found:",{seriesId:e}),null;const i=t||"",o=n||"",a=`${i}|${o}`;console.log("[getChapterInfo] Looking up:",{seriesId:e,volume:t,chapter:n,volumeStr:i,chapterStr:o,key:a,seriesHasEntries:s.size>0,availableKeys:Array.from(s.keys()).slice(0,10)});const l=s.get(a);if(!l||l.length===0)return console.log("[getChapterInfo] No chapter info found for key:",a),null;console.log("[getChapterInfo] Found chapter info:",{count:l.length,firstChapter:{volume:l[0].volume,chapter:l[0].chapter,title:l[0].title,groups:l[0].groups.map(p=>({primaryName:p.primaryName,altNames:p.altNames}))}});const u=l[0],c={},f=[];if(u.groups.length>0){const p=u.title&&u.title.trim()!==""?u.title:null;for(const h of u.groups)c[h.primaryName]=p}else u.title&&u.title.trim()!==""?f.push(u.title):f.push(null);return{groups:[...u.groups],groupTitles:c,ungroupedTitles:f}}async getChapterInfoByChapterAndGroups(e,t,n){if(await this.ensureLoaded(),this.data===null)return console.log("[getChapterInfoByChapterAndGroups] Data not loaded"),null;const s=this.data.get(e);if(!s)return console.log("[getChapterInfoByChapterAndGroups] Series not found:",{seriesId:e}),null;const i=t||"";console.log("[getChapterInfoByChapterAndGroups] Searching:",{seriesId:e,chapter:t,chapterStr:i,groupNames:n,totalEntries:s.size});for(const[o,a]of s.entries()){const[l,u]=o.split("|");if(u===i){console.log("[getChapterInfoByChapterAndGroups] Found matching chapter number:",{key:o,volume:l,chapterNum:u,chapterInfosCount:a.length});for(const c of a){if(console.log("[getChapterInfoByChapterAndGroups] Checking chapter info:",{volume:l,chapter:u,title:c.title,chapterGroups:c.groups.map(d=>({primaryName:d.primaryName,altNames:d.altNames})),providedGroupNames:n}),n.length===0){if(c.groups.length>0){console.log("[getChapterInfoByChapterAndGroups] Skipping: has groups but no group names provided");continue}}else{const d=n.some(g=>{const m=c.groups.some(y=>Ve.groupMatches(y,g));return console.log("[getChapterInfoByChapterAndGroups] Group match check:",{groupName:g,matches:m}),m});if(console.log("[getChapterInfoByChapterAndGroups] Has matching group:",d),!d){console.log("[getChapterInfoByChapterAndGroups] Skipping: no matching group");continue}}const f={},p=[];if(c.groups.length>0){const d=c.title&&c.title.trim()!==""?c.title:null;for(const g of c.groups)f[g.primaryName]=d}else c.title&&c.title.trim()!==""?p.push(c.title):p.push(null);const h={volume:l,info:{groups:[...c.groups],groupTitles:f,ungroupedTitles:p}};return console.log("[getChapterInfoByChapterAndGroups] Returning match:",{volume:l,groups:h.info.groups.map(d=>d.primaryName),groupTitles:Object.keys(h.info.groupTitles),ungroupedTitles:h.info.ungroupedTitles}),h}}}return console.log("[getChapterInfoByChapterAndGroups] No match found, returning null"),null}async hasSeriesEntries(e){if(await this.ensureLoaded(),this.data===null)return!1;const t=this.data.get(e);return t?t.size>0:!1}async getUniqueChapterInfo(e,t,n){if(await this.ensureLoaded(),this.data===null)return null;const s=this.data.get(e);if(!s)return null;const a=`${t||""}|${n||""}`,l=s.get(a);if(!l||l.length===0||l.length!==1)return null;const u=l[0],c={},f=[];if(u.groups.length>0){const p=u.title&&u.title.trim()!==""?u.title:null;for(const h of u.groups)c[h.primaryName]=p}else u.title&&u.title.trim()!==""?f.push(u.title):f.push(null);return{groups:[...u.groups],groupTitles:c,ungroupedTitles:f}}async getUniqueChapterInfoByChapter(e,t){if(await this.ensureLoaded(),this.data===null)return null;const n=this.data.get(e);if(!n||!t)return null;const s=[];for(const[u,c]of n.entries()){const[f,p]=u.split("|");if(p===t)for(const h of c)s.push({volume:f,info:h})}if(s.length!==1)return null;const{volume:i,info:o}=s[0],a={},l=[];if(o.groups.length>0){const u=o.title&&o.title.trim()!==""?o.title:null;for(const c of o.groups)a[c.primaryName]=u}else o.title&&o.title.trim()!==""?l.push(o.title):l.push(null);return{volume:i,info:{groups:[...o.groups],groupTitles:a,ungroupedTitles:l}}}async getAllGroupNames(e){if(await this.ensureLoaded(),this.data===null)return[];const t=this.data.get(e);if(!t)return[];const n=new Ye;for(const s of t.values())for(const i of s)for(const o of i.groups)n.add(o.primaryName);return Array.from(n)}async getAllGroups(e){if(await this.ensureLoaded(),this.data===null)return[];const t=this.data.get(e);if(!t)return[];const n=new it;for(const s of t.values())for(const i of s)for(const o of i.groups)n.has(o.primaryName)||n.set(o.primaryName,o);return Array.from(n.values())}async getChapterInfoByGroups(e,t,n,s){if(await this.ensureLoaded(),this.data===null)return console.log("[getChapterInfoByGroups] Data not loaded"),null;const i=this.data.get(e);if(!i)return console.log("[getChapterInfoByGroups] Series not found:",{seriesId:e}),null;const o=t||"",a=n||"",l=`${o}|${a}`;console.log("[getChapterInfoByGroups] Looking up:",{seriesId:e,volume:t,chapter:n,volumeStr:o,chapterStr:a,key:l,groupNames:s});const u=i.get(l);if(!u||u.length===0)return console.log("[getChapterInfoByGroups] No chapter info found for key:",l),null;console.log("[getChapterInfoByGroups] Found chapter infos:",{count:u.length,allChapters:u.map(h=>({volume:h.volume,chapter:h.chapter,title:h.title,groups:h.groups.map(d=>({primaryName:d.primaryName,altNames:d.altNames}))}))});let c=null;for(const h of u)if(console.log("[getChapterInfoByGroups] Checking chapter info:",{title:h.title,chapterGroups:h.groups.map(d=>({primaryName:d.primaryName,altNames:d.altNames})),providedGroupNames:s}),s.length===0){if(h.groups.length===0){console.log("[getChapterInfoByGroups] Matched ungrouped chapter"),c=h;break}}else if(s.some(g=>{const m=h.groups.some(y=>Ve.groupMatches(y,g));return console.log("[getChapterInfoByGroups] Group match check:",{groupName:g,matches:m,chapterGroups:h.groups.map(y=>y.primaryName)}),m})){console.log("[getChapterInfoByGroups] Found matching chapter with groups"),c=h;break}if(!c)return console.log("[getChapterInfoByGroups] No matching chapter found"),null;const f={},p=[];if(c.groups.length>0){const h=c.title&&c.title.trim()!==""?c.title:null;for(const d of c.groups)f[d.primaryName]=h}else c.title&&c.title.trim()!==""?p.push(c.title):p.push(null);return{groups:[...c.groups],groupTitles:f,ungroupedTitles:p}}async getUniqueVolumeChapterCombinations(e){if(await this.ensureLoaded(),this.data===null)return[];const t=this.data.get(e);if(!t)return[];const n=[];for(const[s,i]of t.entries()){const[o,a]=s.split("|");for(const l of i){const u={},c=[];if(l.groups.length>0){const p=l.title&&l.title.trim()!==""?l.title:null;for(const h of l.groups)u[h.primaryName]=p}else l.title&&l.title.trim()!==""?c.push(l.title):c.push(null);const f={groups:[...l.groups],groupTitles:u,ungroupedTitles:c};n.push({volume:o,chapter:a,info:f})}}return n.sort((s,i)=>{const o=s.volume.localeCompare(i.volume,void 0,{numeric:!0,sensitivity:"base"});return o!==0?o:s.chapter.localeCompare(i.chapter,void 0,{numeric:!0,sensitivity:"base"})}),n}static groupMatches(e,t){if(e.primaryName===t)return!0;for(const n of e.altNames)if(n===t)return!0;return!1}static findGroupPrimaryName(e,t){for(const n of e.groups)if(Ve.groupMatches(n,t))return n.primaryName;return null}static findBestMatchingCombinationIndex(e,t,n,s){if(e.length===0)return null;const i=t||"",o=n||"",a=(f,p)=>p.length===0?f.length===0:p.some(h=>f.some(d=>Ve.groupMatches(d,h))),l=(f,p)=>{const h=parseFloat(f),d=parseFloat(p);return!isNaN(h)&&!isNaN(d)?Math.abs(h-d):Math.abs(f.localeCompare(p,void 0,{numeric:!0}))};let u=null,c=-1;for(let f=0;f<e.length;f++){const p=e[f],h=p.volume||"",d=p.chapter||"";let g=0;const m=h===i;m&&(g+=1e3);const y=d===o;if(y)g+=100;else if(o){const S=l(d,o);g+=Math.max(0,50-S)}const E=a(p.info.groups,s);if(E&&(g+=10),m&&y&&E)return f;g>c&&(c=g,u=f)}return u}}async function Wh(r,e,t){const n=[],s=[];for(const i of r)if(!t?.some(o=>o.groupName===i))try{const o=await e(i);if(!o.data){s.push(i),console.warn(`No data found for group "${i}"`);continue}const a=o.data.find(l=>l.name===i);a?n.push({id:a.id,name:a.name}):(s.push(i),console.warn(`No exact match found for group "${i}"`))}catch(o){s.push(i),console.warn(`Failed to lookup group "${i}":`,o)}return{successful:n,failed:s}}const wt=new Ve;class je{static async getSeriesGroups(e){return await wt.getAllGroups(e)}static findMatchingGroup(e,t){for(const n of e)if(Ve.groupMatches(n,t))return n;return null}static mapCsvGroupsToApiGroups(e,t){const n=new it;for(const s of e){const i=t.find(o=>Ve.groupMatches(s,o.groupName));i&&n.set(s.primaryName,i.groupId)}return n}static groupNameInString(e,t){const n=t.match(/\[([^\]]+)\]$/);if(!n)return!1;const s=n[1],i=e.primaryName.replace(/[\\/\\:\\*]/g,"-");if(s===i)return!0;for(const o of e.altNames){const a=o.replace(/[\\/\\:\\*]/g,"-");if(s===a)return!0}return!1}static findGroupInString(e,t){if(!t)return null;for(const n of e.groups)if(this.groupNameInString(n,t))return n;return null}static matchGroupsToChapter(e,t){if(!e.originalFolderPath)return[];const n=[];for(const s of t)this.groupNameInString(s,e.originalFolderPath)&&n.push(s);return n}static associateChapterWithGroups(e,t,n,s){if(!t)return{matchedGroupIds:[],matchedGroupNames:[],unmatchedGroups:[]};const i=[],o=[],a=[];for(const l of t.groups){const u=s.get(l.primaryName);u?(i.push(u),o.push(l.primaryName)):a.push(l)}return{matchedGroupIds:i,matchedGroupNames:o,unmatchedGroups:a}}static async associateChaptersWithGroups(e,t,n,s){const i=this.mapCsvGroupsToApiGroups(n,s),o=[];for(const a of e){const l=await wt.getChapterInfo(t,a.chapterVolume,a.chapterNumber),u=this.associateChapterWithGroups(a,l,n,i);o.push({chapter:a,groupIds:u.matchedGroupIds,matchedGroups:u.matchedGroupNames,unmatchedGroups:u.unmatchedGroups.map(c=>c.primaryName)})}return o}static async matchAndAssociateGroupsToChapters(e,t,n,s){let i=n;if(!i){if(!s)throw new Error("seriesId is required if csvGroups is not provided");i=await this.getSeriesGroups(s)}const o=[];for(const a of e){const l=this.matchGroupsToChapter(a,i),u=this.mapCsvGroupsToApiGroups(l,t),c=[],f=[];for(const p of l){const h=u.get(p.primaryName);h&&(c.push(h),f.push(p.primaryName))}o.push({chapter:a,groupIds:c,matchedGroups:f,unmatchedGroups:l.filter(p=>!u.has(p.primaryName)).map(p=>p.primaryName)})}return o}}class on{static formatGroup(e){return e.altNames.length>0?`${e.primaryName} (${e.altNames.join(", ")})`:e.primaryName}static formatGroups(e,t=", "){return e.map(n=>this.formatGroup(n)).join(t)}static formatScanGroup(e){return e.groupName}static formatScanGroups(e,t=", "){return e.map(n=>this.formatScanGroup(n)).join(t)}static async formatScanGroupsWithAltNames(e,t,n=", "){const s=await je.getSeriesGroups(t);return e.map(o=>{const a=je.findMatchingGroup(s,o.groupName);return a?this.formatGroup(a):this.formatScanGroup(o)}).join(n)}static async formatScanGroupWithAltNames(e,t){const n=await je.getSeriesGroups(t),s=je.findMatchingGroup(n,e.groupName);return s?this.formatGroup(s):this.formatScanGroup(e)}}var Vd=z("<div><!></div>"),Gd=z('<p class="uno-o2ql0b"> </p>'),Bd=z('<p class="uno-6y7fk7">No group</p>'),$d=z('<div><!> <button type="button" class="uno-f23sus" aria-label="Edit groups"><!></button></div>');function Hh(r,e){Ke(e,!0);const t=Pt(Bn);if(!t)throw new Error("TargetingEditableGroup must be used within a component that provides TargetingState context");const n=Ea(()=>t.availableScanGroups);let s=Be(e,"groups",15,null),i=C(!1),o=C(null),a=C(!1),l=C(null),u=C(null),c=C(null),f=C(""),p=C(Ge(new Map));Ze(async()=>{if(!s().groupIds||s().groupIds.length===0){T(f,""),T(p,new Map,!0);return}if(!t.seriesId){const N=s().groupIds.map(x=>w(n).find(k=>k.groupId===x)?.groupName??x).filter(x=>x!==void 0);T(f,N.join(", "),!0);const D=new Map;for(const x of w(n))D.set(x.groupId,x.groupName);T(p,D,!0);return}const A=s().groupIds.map(N=>w(n).find(D=>D.groupId===N)).filter(N=>N!==void 0);if(A.length===0){T(f,""),T(p,new Map,!0);return}try{T(f,await on.formatScanGroupsWithAltNames(A,t.seriesId),!0);const N=new Map;for(const D of w(n))try{const x=await on.formatScanGroupWithAltNames(D,t.seriesId);N.set(D.groupId,x)}catch{N.set(D.groupId,D.groupName)}T(p,N,!0)}catch(N){console.warn("Failed to format groups with alt names:",N),T(f,on.formatScanGroups(A),!0);const D=new Map;for(const x of w(n))D.set(x.groupId,x.groupName);T(p,D,!0)}});function h(){e.chapter&&e.fieldName&&!e.chapter.manuallyEditedFields.has(e.fieldName)&&(e.chapter.originalFieldValues.has(e.fieldName)||e.chapter.originalFieldValues.set(e.fieldName,s().groupIds?[...s().groupIds]:null)),w(u)&&T(c,w(u).getBoundingClientRect(),!0),s().groupIds?T(o,s().groupIds.map(A=>w(n).find(N=>N.groupId===A)).filter(A=>A!==void 0),!0):T(o,[],!0),T(i,!0),T(a,!0),window.addEventListener("keydown",m)}function d(){T(i,!1),T(a,!1),T(c,null),window.removeEventListener("keydown",m),s(s().groupIds=w(o)?.map(A=>A.groupId)??[],!0),e.chapter&&e.fieldName&&e.chapter.manuallyEditedFields.add(e.fieldName)}function g(){d()}function m(A){A.key==="Escape"&&d()}var y=$d(),E=V(y);{var S=A=>{var N=Vd();N.__click=x=>x.stopPropagation();var D=V(N);Yf(D,{get items(){return w(n)},onClose:g,get buttonRect(){return w(c)},getDisplayText:x=>w(p).get(x.groupId)??x.groupName,get selectedItems(){return w(o)},set selectedItems(x){T(o,x,!0)},get isOpen(){return w(a)},set isOpen(x){T(a,x,!0)}}),P(N),gr(N,x=>T(l,x),()=>w(l)),$(A,N)};le(E,A=>{w(i)&&A(S)})}var I=Z(E,2);I.__click=A=>{A.stopPropagation(),h()};var b=V(I);{var F=A=>{var N=Gd(),D=V(N,!0);P(N),ae(()=>Se(D,w(f)||"Loading...")),$(A,N)},R=A=>{var N=Bd();$(A,N)};le(b,A=>{s().groupIds&&s().groupIds.length>0?A(F):A(R,!1)})}P(I),gr(I,A=>T(u,A),()=>w(u)),P(y),$(r,y),Qe()}at(["click"]);var qd=z("<option> </option>"),zd=z("<select></select>");function jh(r,e){Ke(e,!0);let t=Be(e,"selectedItem",15,null),n=Be(e,"class",3,"");function s(o){return e.getDisplayText?e.getDisplayText(o):o}var i=zd();On(i,21,()=>e.items,Nn,(o,a)=>{var l=qd(),u=V(l,!0);P(l);var c={};ae(f=>{Se(u,f),c!==(c=w(a))&&(l.value=(l.__value=w(a))??"")},[()=>s(w(a))]),$(o,l)}),P(i),ae(()=>{De(i,"id",e.id),pt(i,1,pr(["uno-c6i0je",n()]))}),Da(i,t),$(r,i),Qe()}var Wd=z('<p class="uno-lb067v">Searching...</p>'),Hd=z('<img class="uno-su9w3i"/>'),jd=z('<div class="uno-5qca40"><div class="uno-nskbg4"></div></div>'),Zd=z('<p class="uno-mtaw0d"> </p>'),Jd=z('<p class="uno-1wsdf5">No description available</p>'),Yd=z('<button class="uno-c9g97e"><!> <div class="uno-xvefka"><div class="uno-wc0tvi"><div class="uno-oyedyk"><h3 class="uno-kpnkkd"> </h3> <p class="uno-q6n1wv"> </p></div> <div class="uno-v8c2sr" aria-label="Select series" title="Select series"></div></div> <!></div></button>'),Kd=z('<div class="uno-1t6gxl"><form class="uno-jkugc8"><div class="uno-gbo3cv"><label for="search-query-input" class="uno-yy02lm">Search for a series:</label> <input class="uno-u4ti6f" id="search-query-input" type="text" placeholder="Search for a series"/></div> <button class="uno-e3eijk" type="submit">Search</button></form> <div class="uno-90yijh"><!></div></div>');function Zh(r,e){Ke(e,!0);const t=Pt(Bn);if(!t)throw new Error("TargetingSeriesSearch must be used within a component that provides TargetingState context");let n=C(""),s=C(Ge([])),i=C(!1);async function o(){if(!(!w(n).trim()||w(n).trim().length<=2||w(i))){T(i,!0);try{const y=await Of(w(n).trim());T(s,y.data,!0)}catch(y){console.error(y)}finally{T(i,!1)}}}function a(y,E){t.seriesId=y,T(s,[],!0),T(n,"")}function l(y){return!y.relationships?.cover?.id||!y.id?null:`https://weebdex.org/covers/${y.id}/${y.relationships.cover.id}.256.webp`}var u=Kd(),c=V(u),f=V(c),p=Z(V(f),2);_t(p),P(f),hr(2),P(c);var h=Z(c,2),d=V(h);{var g=y=>{var E=Wd();$(y,E)},m=y=>{var E=Ks(),S=br(E);On(S,17,()=>w(s),Nn,(I,b)=>{var F=Yd();F.__click=()=>a(w(b).id,w(b).title);var R=V(F);{var A=Q=>{var ee=Hd();ae(X=>{De(ee,"src",X),De(ee,"alt",w(b).title||"Cover")},[()=>l(w(b))]),$(Q,ee)},N=Q=>{var ee=jd();$(Q,ee)};le(R,Q=>{l(w(b))?Q(A):Q(N,!1)})}var D=Z(R,2),x=V(D),B=V(x),k=V(B),M=V(k,!0);P(k);var re=Z(k,2),te=V(re);P(re),P(B),hr(2),P(x);var j=Z(x,2);{var q=Q=>{var ee=Zd(),X=V(ee,!0);P(ee),ae(()=>Se(X,w(b).description)),$(Q,ee)},ne=Q=>{var ee=Jd();$(Q,ee)};le(j,Q=>{w(b).description?Q(q):Q(ne,!1)})}P(D),P(F),ae(()=>{Se(M,w(b).title),Se(te,`ID: ${w(b).id??""}`)}),$(I,F)}),$(y,E)};le(d,y=>{w(i)?y(g):y(m,!1)})}P(h),P(u),ai("submit",c,y=>{y.preventDefault(),o()}),Vt(p,()=>w(n),y=>T(n,y)),$(r,u),Qe()}at(["click"]);var Qd=(r=>(r.NO_GROUPS="no_groups",r.NO_VALID_GROUPS="no_valid_groups",r.NO_CHAPTER_INFO="no_chapter_info",r.NO_MATCHING_GROUP="no_matching_group",r.VOLUME_MISMATCH="volume_mismatch",r.PARTIAL_GROUP_MATCH="partial_group_match",r.TITLE_RESOLUTION_NOT_FOUND="title_resolution_not_found",r.DUPLICATE_CHAPTER="duplicate_chapter",r))(Qd||{}),Xd=(r=>(r.SUCCESS="success",r.NO_CHANGES="no_changes",r.FAILED="failed",r))(Xd||{});const Wn={hasTitleValue(r){return r!==null&&r!==""},isNoGroupPath(r){return r?.includes("[no group]")??!1},hasGroupsInPath(r){return r?!Wn.isNoGroupPath(r):!1},createGroupIdToNameMap(r){const e=new Map;for(const t of r)e.set(t.groupId,t.groupName);return e}},Bt={async findReleasesForChapter(r,e,t,n=[]){return n.length>0?await wt.getChapterInfoByGroups(r,e,t,n):await wt.getChapterInfo(r,e,t)},async matchChapterToRelease(r,e,t,n={}){const{useFallbackMatching:s=!1}=n;console.group("[ChapterDumpApplier] matchChapterToRelease"),console.log("Input:",{seriesId:e,volume:r.chapterVolume,chapter:r.chapterNumber,groupNames:t,useFallbackMatching:s});let i=await Bt.findReleasesForChapter(e,r.chapterVolume,r.chapterNumber,t),o=!1,a=null;if(i?console.log(" Exact match found:",{volume:r.chapterVolume,chapter:r.chapterNumber,groups:Object.keys(i.groupTitles)}):console.log(" Exact match not found"),!i&&s&&r.chapterNumber){console.log("Attempting fallback matching (ignoring volume)");const l=await wt.getChapterInfoByChapterAndGroups(e,r.chapterNumber,t);l?(i=l.info,a=l.volume,o=!0,console.log(" Fallback match found:",{originalVolume:r.chapterVolume,fallbackVolume:a,chapter:r.chapterNumber,groups:Object.keys(i.groupTitles)})):console.log(" Fallback match also failed")}return i?(console.log("Result:",{usedFallback:o,volume:o?a:r.chapterVolume}),console.groupEnd(),{release:i,volume:o?a:r.chapterVolume,usedFallback:o}):(console.log(" No match found for chapter"),console.groupEnd(),null)},async lookupChapterRelease(r,e,t,n={}){const{useFallbackMatching:s=!1}=n,i=await Bt.matchChapterToRelease(r,e,t,{useFallbackMatching:s});if(!i)return null;const{release:o,volume:a,usedFallback:l}=i;return{release:o,volume:l?a:r.chapterVolume,usedFallback:l,title:null,matchedGroupName:null}},async getAllGroupIdsForRelease(r,e,t){const n=Object.keys(e.groupTitles),s=await je.getSeriesGroups(r),i=je.mapCsvGroupsToApiGroups(s,t),o=[];for(const a of n){const l=i.get(a);l&&o.push(l)}return o}},Ir={resolveTitleFromRelease(r,e,t){console.group("[ChapterDumpApplier] resolveTitleFromRelease"),console.log("Input:",{groupNames:e,isNoGroupChapter:t,availableGroups:Object.keys(r.groupTitles),ungroupedTitlesCount:r.ungroupedTitles.length});let n=null,s=null;for(const i of e){const o=Ve.findGroupPrimaryName(r,i);if(o&&o in r.groupTitles){const a=r.groupTitles[o];n=a==null||a===""?null:a,s=o,console.log(" Title resolved from group:",{groupName:i,primaryName:o,title:n});break}}if(!s&&t&&r.ungroupedTitles.length>0){const i=r.ungroupedTitles[0];n=i==null||i===""?null:i,console.log(" Title resolved from ungrouped titles:",{title:n})}return n!==null||s!==null?(console.log("Result:",{title:n,matchedGroupName:s}),console.groupEnd(),{title:n,matchedGroupName:s}):(console.log(" Title resolution failed - no matching group or ungrouped title"),console.groupEnd(),null)},async resolveChapterTitleFromDump(r,e,t,n={}){const{useFallbackMatching:s=!1,isNoGroupChapter:i}=n,o=i?.(r)??!1,a=await Bt.matchChapterToRelease(r,t,e,{useFallbackMatching:s});if(!a)return null;const{release:l,volume:u,usedFallback:c}=a,f=Ir.resolveTitleFromRelease(l,e,o);if(!f){if(!c&&s&&r.chapterNumber){const h=await wt.getChapterInfoByChapterAndGroups(t,r.chapterNumber,e);if(h){const d=Ir.resolveTitleFromRelease(h.info,e,o);if(d)return{title:d.title===void 0||d.title===null||d.title===""?null:d.title,matchedGroupName:d.matchedGroupName,usedFallback:!0,fallbackVolume:h.volume,chapterInfo:h.info}}}return null}return{title:f.title===void 0||f.title===null||f.title===""?null:f.title,matchedGroupName:f.matchedGroupName,usedFallback:c,fallbackVolume:c?u:null,chapterInfo:l}}},fr={determineVolumeChange(r,e){const t=e===""?null:e;if(r!==t)return console.log("Volume change:",{current:r,new:t}),t;console.log("No volume change needed:",{current:r})},determineTitleChange(r,e){const t=r===""?null:r??null,n=e===""?null:e;if(t!==n)return console.log("Title change:",{current:t,new:n}),n;console.log("No title change needed:",{current:t})},async getAdditionalGroupsFromRelease(r,e,t,n,s){if(!s)return[];if(Object.keys(t.groupTitles).length>1){const o=await Bt.getAllGroupIdsForRelease(e,t,n),a=new Ye(r);return o.filter(l=>!a.has(l))}return[]},async calculateChangesFromRelease(r,e,t,n,s,i){const{release:o,volume:a}=e;console.group("[ChapterDumpApplier] calculateChangesFromRelease"),console.log("Input:",{volume:r.chapterVolume,chapter:r.chapterNumber,currentTitle:r.currentTitle,currentGroups:r.groupIds,releaseVolume:a,releaseGroups:Object.keys(o.groupTitles)}),console.group("Step 1: Volume Change");const l=fr.determineVolumeChange(r.chapterVolume,a);console.groupEnd(),console.group("Step 2: Preliminary Title Resolution (for group matching)");const u=Ir.resolveTitleFromRelease(o,s,i);console.groupEnd();let c=[];u?.matchedGroupName&&(console.group("Step 3: Additional Groups Check"),console.log("Checking for additional groups:",{matchedGroup:u.matchedGroupName,allGroupsInRelease:Object.keys(o.groupTitles)}),c=await fr.getAdditionalGroupsFromRelease(r.groupIds,n,o,t,u.matchedGroupName),c.length>0?console.log("Additional groups to add:",c):console.log("No additional groups to add"),console.groupEnd());const f=[...r.groupIds,...c],p=Wn.createGroupIdToNameMap(t),h=f.map(b=>p.get(b)).filter(b=>b!==void 0),d=h.length>0?h:s;console.group("Step 4: Final Title Resolution");const g=Ir.resolveTitleFromRelease(o,d,i);console.groupEnd();const m=g?.title??null,y=m==null||m===""?null:m;g?(e.title=y,e.matchedGroupName=g.matchedGroupName):(e.title=null,e.matchedGroupName=null);const E=r.currentTitle===void 0||r.currentTitle===null||r.currentTitle===""?null:r.currentTitle;console.group("Step 5: Title Change Detection");const S=fr.determineTitleChange(E,y);console.groupEnd();const I={additionalGroupIds:c};return l!==void 0&&(I.volume=l),S!==void 0&&(I.title=S),console.log("Final Changes:",{volumeChange:I.volume!==void 0?I.volume:"none",titleChange:I.title!==void 0?I.title:"none",additionalGroups:I.additionalGroupIds.length}),console.groupEnd(),I}},Jh={async applyGroupsToChapters(r,e,t){const n=await je.getSeriesGroups(t),s=await je.matchAndAssociateGroupsToChapters(r,e,n,t),i=[];for(const o of s){const a=o.chapter.associatedGroup.groupIds??[],l=new Ye(a),u=[...a];for(const c of o.groupIds)l.has(c)||(l.add(c),u.push(c));o.chapter.associatedGroup.groupIds=u,i.push(o.chapter)}return i},async applyChangesFromDump(r,e,t,n={}){console.group("[ChapterDumpApplier] applyChangesFromDump"),console.log("Input:",{seriesId:t,chapterCount:r.length,availableGroupsCount:e.length,useFallbackMatching:n.useFallbackMatching??!1});const s=Wn.createGroupIdToNameMap(e),i=new it;for(const[c,f]of s)i.set(c,f);const{isNoGroupChapter:o}=n,a=[];let l=0,u=0;for(let c=0;c<r.length;c++){const f=r[c];console.groupCollapsed(`Chapter ${c+1}/${r.length}`),console.log("Input:",{volume:f.chapterVolume,chapter:f.chapterNumber,groupIds:f.groupIds,path:f.originalFolderPath});const p=o?.(f)??!1,h=f.groupIds??[],d=[];if(h.length===0&&!p){console.log(" Failed: No groups assigned"),a.push({status:"failed",changes:null,warnings:[{reason:"no_groups",note:"Unable to assign any of the required groups to the chapter"}],resolutionResult:null}),u++,console.groupEnd();continue}const g=h.map(R=>i.get(R)).filter(R=>R!==void 0);if(g.length===0&&!p){console.log(" Failed: No valid groups found",{assignedGroupIds:h,availableGroupIds:Array.from(i.keys())}),a.push({status:"failed",changes:null,warnings:[{reason:"no_valid_groups",note:"No valid groups found for assigned group IDs"}],resolutionResult:null}),u++,console.groupEnd();continue}const m=await Bt.lookupChapterRelease(f,t,g,{useFallbackMatching:n.useFallbackMatching});if(!m){console.log(" Failed: Not found in chapter dump"),a.push({status:"failed",changes:null,warnings:[{reason:"no_chapter_info",note:"Chapter not found in chapter dump"}],resolutionResult:null}),u++,console.groupEnd();continue}console.log(" Release found:",{usedFallback:m.usedFallback,releaseVolume:m.volume});const y=f.chapterVolume,E=await fr.calculateChangesFromRelease(f,m,e,t,g,p),I={title:m.title===void 0||m.title===null||m.title===""?null:m.title,matchedGroupName:m.matchedGroupName,usedFallback:m.usedFallback,fallbackVolume:m.usedFallback?m.volume:null,chapterInfo:m.release};if(I.usedFallback&&I.fallbackVolume!==null){const R=y??"N/A",A=I.fallbackVolume===""||I.fallbackVolume===null?"N/A":I.fallbackVolume;d.push({reason:"volume_mismatch",note:`Changed volume from ${R} to ${A}`})}if(I.matchedGroupName){const R=Object.keys(I.chapterInfo.groupTitles);R.length>1&&d.push({reason:"partial_group_match",note:`Matched "${I.matchedGroupName}" but release has ${R.length} groups: ${R.join(", ")}`})}const F=E.volume!==void 0||E.title!==void 0||E.additionalGroupIds.length>0?"success":"no_changes";console.log("Result:",{status:F,warningsCount:d.length,warnings:d.map(R=>R.reason),hasTitle:I.title!==null,hasVolumeChange:E.volume!==void 0,hasTitleChange:E.title!==void 0,additionalGroupsCount:E.additionalGroupIds.length}),a.push({status:F,changes:E,warnings:d,resolutionResult:I}),l++,console.groupEnd()}return console.log("Summary:",{total:r.length,successCount:l,failedCount:u}),console.groupEnd(),{results:a,successCount:l,failedCount:u}}};var eh=z('<div class="uno-80zcd8"></div>'),th=z('<div class="uno-17wp8f"></div>'),rh=z('<button type="button" class="uno-nxs50t"><!></button>');function Yh(r,e){Ke(e,!0);const t=Oa();let n=C(Ge(t.effectiveTheme));Ze(()=>{t.themeMode,T(n,t.effectiveTheme,!0)});function s(){t.toggleTheme()}var i=rh();i.__click=s;var o=V(i);{var a=u=>{var c=eh();$(u,c)},l=u=>{var c=th();$(u,c)};le(o,u=>{w(n)==="dark"?u(a):u(l,!1)})}P(i),ae(()=>{De(i,"aria-label",w(n)==="dark"?"Switch to light mode":"Switch to dark mode"),De(i,"title",w(n)==="dark"?"Switch to light mode":"Switch to dark mode")}),$(r,i),Qe()}at(["click"]);export{Fa as A,Ve as B,Gh as C,jh as D,je as E,Fh as F,on as G,hn as H,Ff as I,Cf as J,$h as K,Bh as L,Rf as M,Mh as N,Jr as O,H as P,$s as Q,Bt as R,Vh as S,zh as T,Wn as U,Qd as W,Hh as a,Vt as b,wt as c,Ph as d,On as e,hh as f,Jh as g,Xd as h,Nn as i,Lh as j,Rh as k,Wh as l,Yh as m,Ch as n,qh as o,Zh as p,Pd as q,it as r,Dh as s,Bn as t,Uh as u,wu as v,yu as w,Ra as x,ui as y,Ye as z};
