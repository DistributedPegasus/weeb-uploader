import{G as o,I as s,J as r,K as i,M as a}from"./DISrue0C.js";class g{#e=s(null);get apiToken(){return r(this.#e)}set apiToken(e){i(this.#e,e,!0)}#t=s(null);get userIdentity(){return r(this.#t)}set userIdentity(e){i(this.#t,e,!0)}#s=s(a([]));get userGroups(){return r(this.#s)}set userGroups(e){i(this.#s,e,!0)}}const p=o();class y{#e=s(null);get apiToken(){return r(this.#e)}set apiToken(e){i(this.#e,e,!0)}#t=s(null);get seriesId(){return r(this.#t)}set seriesId(e){i(this.#t,e,!0)}#s=s(a([]));get chapterStates(){return r(this.#s)}set chapterStates(e){i(this.#s,e,!0)}#r=s(a([]));get availableScanGroups(){return r(this.#r)}set availableScanGroups(e){i(this.#r,e,!0)}}const T=o(),u="weebdex-theme";function d(){return typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function m(){if(typeof window>"u")return null;const t=localStorage.getItem(u);return t==="light"||t==="dark"||t==="system"?t:null}function c(t){return t==="system"?d():t}function n(t){if(typeof document>"u")return;const e=document.documentElement;t==="dark"?e.classList.add("dark"):e.classList.remove("dark")}class l{#e=s("system");get _themeMode(){return r(this.#e)}set _themeMode(e){i(this.#e,e,!0)}_mediaQuery=null;constructor(){if(typeof window>"u")return;const e=m();this._themeMode=e??"system",n(this.effectiveTheme),this._mediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),this._mediaQuery.addEventListener("change",this._handleSystemThemeChange)}_handleSystemThemeChange=()=>{this._themeMode==="system"&&n(this.effectiveTheme)};get themeMode(){return this._themeMode}get effectiveTheme(){return c(this._themeMode)}setTheme(e){this._themeMode=e,typeof window<"u"&&localStorage.setItem(u,e),n(this.effectiveTheme)}toggleTheme(){this.effectiveTheme==="dark"?this.setTheme("light"):this.setTheme("dark")}destroy(){this._mediaQuery&&this._mediaQuery.removeEventListener("change",this._handleSystemThemeChange)}}let h=null;function S(){return h||(h=new l),h}export{g as A,y as G,S as a,p as b,T as g};
