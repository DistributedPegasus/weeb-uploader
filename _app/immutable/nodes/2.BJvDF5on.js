import{d as Pe,f as x,a as w,g as je,e as Me}from"../chunks/BxO5phG-.js";import{D as Se,s as U,p as we,J as f,ac as he,K as p,M as c,i as a,j as _,G as de,I as Fe,F as xe,aK as $t,u as Re,aF as Ie,aI as Pt}from"../chunks/CRcVDNR5.js";import{i as re}from"../chunks/BXYtgQMH.js";import{r as _e,s as Ye}from"../chunks/BBqLALQB.js";import{s as Te,c as Oe,r as ct}from"../chunks/0hYrALgK.js";import{s as fe}from"../chunks/Hw7lrUnh.js";import{f as Ve,e as He,i as We,H as Be,t as mt,T as dt,a as Mt,D as et,A as qe,C as ht,b as Ze,I as kt,J as Rt,K as At,L as pt,M as Ot,o as Dt,p as en,O as gt,F as tn,m as nn,k as rn,n as sn}from"../chunks/BYr44Yry.js";import{p as ge,b as tt}from"../chunks/DgnEiYPT.js";import{c as on,Z as an,B as ln,S as un,T as cn,d as dn,e as pn}from"../chunks/DE3l0Ao-.js";import{l as nt,g as Ut,R as Ue}from"../chunks/DS1C84rF.js";import{s as fn}from"../chunks/DsjK3lPI.js";import{A as hn,b as gn}from"../chunks/CNi4FeGA.js";import{g as Vt}from"../chunks/znaoNMEx.js";const vn=!0,js=Object.freeze(Object.defineProperty({__proto__:null,prerender:vn},Symbol.toStringTag,{value:"Module"}));function bn(n){return new Worker(""+new URL("../workers/imageProcessor.worker-647VLkdG.js",import.meta.url).href,{name:n?.name})}var mn=x('<p class="uno-gywb33"> </p>'),yn=x('<p class="uno-133tx6">Transforming files...</p> <!>',1),_n=x('<p class="uno-gywb33"> </p>'),En=x('<p class="uno-133tx6">Validating files...</p> <!>',1),wn=x('<p class="uno-gywb33"> </p>'),Tn=x('<p class="uno-133tx6">Extracting files...</p> <!>',1),In=x('<p class="uno-gywb33"> </p>'),Nn=x('<div class="uno-1hpqvn"><div class="uno-wfkxha"></div> <!> <!></div>'),xn=x('<div class="uno-0uncsh"><p class="uno-e8d28c"> </p> <p class="uno-4w2as4">Extension: <span class="uno-u618z0"> </span> → Detected type: <span class="uno-u618z0"> </span></p></div>'),Sn=x('<div class="uno-70vcd5"><p class="uno-iik7i5"> </p> <div class="uno-3yjag0"></div></div>'),Fn=x(`<div class="uno-h4fy2t"><div class="uno-nai2zd"><input id="enable-transform" type="checkbox" class="uno-3hyifg"/> <label for="enable-transform" class="uno-3hyifg">Auto Image Resolution Transform (will split images higher than 10000px in height into smaller
			chunks - 5000px)</label></div> <button><h1 class="uno-21tubf">Folder Selector</h1> <input class="uno-rcrjh3" type="file"/></button> <!> <!> <div class="uno-7vabca"><p class="uno-f0fc7y"><b>Folder Structure:</b> Select a folder containing your chapters. Each chapter should be in
			its own folder. This is also the only real hard requirement regarding folder structure. <br/> The folder structure you select will be preserved - chapters will be identified by their folder
			paths. There is additional selecting you can do in the step after folder selection that can narrow
			down on what exactly you want to upload (like selecting a specific depth of folders). <br/> <br/> <b>Supported Formats:</b> <br/> • <b>Image files:</b> JPG, JPEG, PNG, GIF <br/> • <b>Archive files:</b> CBZ, ZIP (will be automatically extracted under the same name as a
			fake folder - e.g. "chapter1.cbz" will be extracted to "chapter1") <br/> <br/> <b>Archive Processing:</b> When you select .cbz or .zip files, they will be automatically
			extracted. The internal folder structure within archives is preserved, so you can organize
			chapters inside archives as well. <br/> <br/> <b>File Validation:</b> All image files are validated to ensure their file extension matches
			their actual file type. Files with mismatched extensions (e.g., a PNG file named .jpg) will be
			flagged and must be corrected before proceeding. <br/> <br/> <b>Image Transformation (Optional):</b> Enable the checkbox above to automatically split
			images that are taller than 10,000px into smaller chunks. <b>Only use this option if you're uploading long strip chapters.</b></p></div></div>`);function Cn(n,t){Se(t,!0),on({useWebWorkers:!1});let e=ge(t,"selectedFiles",15,null),r=ge(t,"class",3,""),s=U(null),o=U(!1),i=U(null),d=U(null),l=U(we([])),u=U(!1),y=U(null),g=U(!1),j=U(null),W=U(!1);const K=["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/vnd.comicbook+zip","application/zip","application/json","text/xml"],G=["jpg","jpeg","png","gif","webp","cbz","zip","xml"];async function M(b){const $=b.name.split(".").pop()?.toLowerCase();if(!($==="cbz")&&!($==="zip"))throw new Error(`Unsupported archive format: ${$}`);console.log(`Extracting ${$} file:`,b.name);const C=new an(new ln(b)),R=await C.getEntries(),q=[],E=b.name.replace(/\.(cbz|zip)$/i,""),P=b.webkitRelativePath||b.name,I=R.filter(O=>{if(!O.filename||O.directory)return!1;const ee=O.filename.split(".").pop()?.toLowerCase();return ee&&G.includes(ee)}),X=I.length;let ie=0;for(const O of I){ie++;const ee=O.filename;_(i,ee,!0),_(d,{current:ie,total:X},!0);const se=O.filename.split(".").pop()?.toLowerCase();if(!se||!G.includes(se)||O.directory)continue;const v=new TransformStream,k=new Response(v.readable).blob();await O.getData(v.writable);let J=await k;if(!J.type){const Ae=D(se);J=new Blob([J],{type:Ae})}const ve=ee.split("/").pop()??ee,Le=P.includes("/")?`${P.split("/").slice(0,-1).join("/")}/${E}/${ee}`:`${E}/${ee}`,Ce=new File([J],ve,{type:J.type});Object.defineProperty(Ce,"webkitRelativePath",{value:Le,writable:!1,enumerable:!0,configurable:!0}),q.push(Ce)}return await C.close(),_(i,null),_(d,null),q}function D(b){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",webp:"image/webp"}[b]||"application/octet-stream"}async function S(b){const $=await b.slice(0,12).arrayBuffer(),T=new Uint8Array($);return T.length>=8&&T[0]===137&&T[1]===80&&T[2]===78&&T[3]===71?"png":T.length>=3&&T[0]===255&&T[1]===216&&T[2]===255?"jpg":T.length>=6&&T[0]===71&&T[1]===73&&T[2]===70&&T[3]===56&&(T[4]===57||T[4]===55)&&T[5]===97?"gif":T.length>=12&&T[0]===82&&T[1]===73&&T[2]===70&&T[3]===70&&T[8]===87&&T[9]===69&&T[10]===66&&T[11]===80?"webp":null}async function B(b){const $=[],T=["jpg","jpeg","png","gif","webp"],m=b.filter(q=>{const E=q.name.split(".").pop()?.toLowerCase();return E&&T.includes(E)}),C=m.length;let R=0;for(const q of m){R++;const E=q.name.split(".").pop()?.toLowerCase(),P=q.webkitRelativePath??q.name;_(i,P,!0),_(y,{current:R,total:C},!0);const I=await S(q);if(!I)continue;if((I==="jpeg"?"jpg":I)!==(E==="jpeg"?"jpg":E)&&E){const O=q.webkitRelativePath||q.name;$.push({file:q,path:O,detectedType:I,actualExtension:E})}}return _(i,null),_(y,null),$}async function ae(b){const $=b.name.split(".").pop()?.toLowerCase(),T=D($??""),m=b.name,C=b.webkitRelativePath||b.name,R=new bn;return new Promise((q,E)=>{R.addEventListener("message",async P=>{if(R.terminate(),P.data.type==="error"){E(new Error(P.data.error));return}if(P.data.type==="success"){const I=[];for(const X of P.data.files){const ie=new Blob([X.buffer],{type:X.mimeType}),O=new File([ie],X.name,{type:ie.type});Object.defineProperty(O,"webkitRelativePath",{value:X.path,writable:!1,enumerable:!0,configurable:!0}),I.push(O)}q(I)}}),R.addEventListener("error",P=>{R.terminate(),E(P)}),b.arrayBuffer().then(P=>{R.postMessage({type:"process",fileData:P,fileName:m,filePath:C,extension:$??"",mimeType:T})})})}async function Q(b){const T=[],m=b.length;for(let C=0;C<b.length;C+=4){const R=b.slice(C,C+4),E=Math.min(C+R.length,m),P=R[0];if(P){const X=P.webkitRelativePath||P.name;_(i,X,!0),_(j,{current:E,total:m},!0)}const I=await Promise.all(R.map(X=>ae(X)));T.push(...I.flat())}return _(i,null),_(j,null),T}async function F(b){_(o,!0),_(l,[],!0),_(i,null),_(d,null),_(y,null),_(j,null);const $=b.target,T=Array.from($.files??[]),m=T.filter(P=>{const I=P.name.split(".").pop()?.toLowerCase();return I==="cbz"||I==="zip"}),C=T.filter(P=>{const I=P.name.split(".").pop()?.toLowerCase(),X=P.type;return I!=="cbz"&&I!=="zip"&&G.includes(I??"")&&K.includes(X)}),R=[];for(const P of m)try{const I=await M(P);R.push(...I)}catch(I){console.error(`Error extracting ${P.name}:`,I)}const E=[...C,...R].filter((P,I,X)=>I===X.findIndex(ie=>ie.webkitRelativePath===P.webkitRelativePath));console.log("Selected files:",E),_(o,!1),_(u,!0),_(l,await B(E),!0),_(u,!1),!(a(l).length>0)&&(a(W)?(_(g,!0),e(await Q(E)),_(g,!1)):e(E),t.onDone())}function V(b){a(s)?.click()}var H=Fn(),te=f(H),L=f(te);_e(L),he(2),p(te);var A=c(te,2);A.__click=V;var Z=c(f(A),2);Z.webkitdirectory=!0,Z.multiple=!0,Z.__change=F,tt(Z,b=>_(s,b),()=>a(s)),p(A);var le=c(A,2);{var Y=b=>{var $=Nn(),T=c(f($),2);{var m=E=>{var P=yn(),I=c(xe(P),2);{var X=ie=>{var O=mn(),ee=f(O);p(O),de(()=>fe(ee,`Progress: ${a(j).current??""} / ${a(j).total??""}`)),w(ie,O)};re(I,ie=>{a(j)&&ie(X)})}w(E,P)},C=E=>{var P=je(),I=xe(P);{var X=O=>{var ee=En(),se=c(xe(ee),2);{var v=k=>{var J=_n(),ve=f(J);p(J),de(()=>fe(ve,`Progress: ${a(y).current??""} / ${a(y).total??""}`)),w(k,J)};re(se,k=>{a(y)&&k(v)})}w(O,ee)},ie=O=>{var ee=je(),se=xe(ee);{var v=k=>{var J=Tn(),ve=c(xe(J),2);{var Le=Ce=>{var Ae=wn(),Qe=f(Ae);p(Ae),de(()=>fe(Qe,`Progress: ${a(d).current??""} / ${a(d).total??""}`)),w(Ce,Ae)};re(ve,Ce=>{a(d)&&Ce(Le)})}w(k,J)};re(se,k=>{a(o)&&k(v)},!0)}w(O,ee)};re(I,O=>{a(u)?O(X):O(ie,!1)},!0)}w(E,P)};re(T,E=>{a(g)?E(m):E(C,!1)})}var R=c(T,2);{var q=E=>{var P=In(),I=f(P);p(P),de(()=>fe(I,`Processing: ${a(i)??""}`)),w(E,P)};re(R,E=>{a(i)&&E(q)})}p($),w(b,$)};re(le,b=>{(a(o)||a(u)||a(g))&&b(Y)})}var z=c(le,2);{var N=b=>{var $=Sn(),T=f($),m=f(T);p(T);var C=c(T,2);He(C,21,()=>a(l),We,(R,q)=>{let E=()=>a(q).path,P=()=>a(q).detectedType,I=()=>a(q).actualExtension;var X=xn(),ie=f(X),O=f(ie,!0);p(ie);var ee=c(ie,2),se=c(f(ee)),v=f(se);p(se);var k=c(se,2),J=f(k);p(k),p(ee),p(X),de(()=>{fe(O,E()),fe(v,`.${I()??""}`),fe(J,`.${P()??""}`)}),w(R,X)}),p(C),p($),de(()=>fe(m,`Found ${a(l).length??""} file${a(l).length===1?"":"s"} with incorrect
				extensions:`)),w(b,$)};re(z,b=>{a(l).length>0&&b(N)})}he(2),p(H),de(()=>{L.disabled=a(o)||a(u)||a(g),Te(A,1,`uno-gob8cp ${r()??""}`),A.disabled=a(o)||a(u)||a(g)}),Ve(L,()=>a(W),b=>_(W,b)),w(n,H),Fe()}Pe(["click","change"]);var Pn=x('<img class="uno-nxxp44"/>'),kn=x('<div class="uno-qetgxl"></div>'),Rn=x('<div class="uno-iwkknw"></div>'),An=x('<div class="uno-wh6kcz"><span class="uno-6atr7t">Page deleted</span></div>'),On=x('<button aria-label="Delete page" class="uno-x6no3p"><div class="uno-hcwd2d"></div></button>'),Vn=x('<button aria-label="Restore page" class="uno-m81k9t"><div class="uno-60j01b"></div></button>'),jn=x('<div class="uno-ezvmq6"><!> <!> <div class="uno-mb41n8"><span class="uno-6atr7t"> </span></div> <!></div>'),Ln=x('<div class="uno-2sw5oq"></div>');function zn(n,t){Se(t,!0);let e=ge(t,"pages",31,()=>we([]));function r(d){return URL.createObjectURL(d)}function s(d){e(e()[d].isDeleted=!0,!0)}function o(d){e(e()[d].isDeleted=!1,!0)}var i=Ln();He(i,21,e,We,(d,l,u)=>{var y=jn(),g=f(y);{var j=F=>{var V=Pn();de(H=>{Ye(V,"src",H),Ye(V,"alt",a(l).pageName)},[()=>r(a(l).pageFile)]),w(F,V)},W=F=>{var V=je(),H=xe(V);{var te=A=>{var Z=kn();w(A,Z)},L=A=>{var Z=Rn();w(A,Z)};re(H,A=>{a(l).pageType===Be.CHAPTER_DEFINITION_FILE?A(te):A(L,!1)},!0)}w(F,V)};re(g,F=>{a(l).pageType===Be.CHAPTER_PAGE?F(j):F(W,!1)})}var K=c(g,2);{var G=F=>{var V=An();w(F,V)};re(K,F=>{a(l).isDeleted&&F(G)})}var M=c(K,2),D=f(M),S=f(D,!0);p(D),p(M);var B=c(M,2);{var ae=F=>{var V=On();V.__click=()=>s(u),w(F,V)},Q=F=>{var V=Vn();V.__click=()=>o(u),w(F,V)};re(B,F=>{a(l).isDeleted?F(Q,!1):F(ae)})}p(y),de(()=>fe(S,a(l).pageName)),w(d,y)}),p(i),w(n,i),Fe()}Pe(["click"]);var Gn=x('<button type="button" class="uno-erk55q" title="Revert manual edit"><div class="uno-jugmv0"></div></button>'),$n=x('<button type="button" class="uno-erk55q" title="Revert manual edit"><div class="uno-jugmv0"></div></button>'),Mn=x('<button type="button" class="uno-erk55q" title="Revert manual edit"><div class="uno-jugmv0"></div></button>'),Un=x('<button type="button" class="uno-erk55q" title="Revert manual edit"><div class="uno-jugmv0"></div></button>'),Bn=x('<button type="button" class="uno-erk55q" title="Revert manual edit"><div class="uno-jugmv0"></div></button>'),Yn=x('<div class="uno-ax06g0"></div>'),qn=x('<div class="uno-d9abuh"></div>'),Hn=x('<div aria-label="Collapse" class="uno-wx2jg6"></div>'),Wn=x('<div aria-label="Expand" class="uno-op2jdb"></div>'),Xn=x('<div class="uno-rw00hm"><!></div>'),Kn=x('<div><div class="uno-e2gvxs"><div class="uno-j7zfdb"><div class="uno-h58bnc"><span class="uno-54xv4y"> </span> <div class="uno-h58bnc"><span class="uno-vv4s5f">Vol.</span> <!> <!></div> <div class="uno-h58bnc"><span class="uno-vv4s5f">Ch.</span> <!> <!></div> <div class="uno-h58bnc"><span class="uno-vv4s5f">Groups:</span> <!> <!></div></div> <div class="uno-h58bnc"><span class="uno-vv4s5f">Original:</span> <p class="uno-vv4s5f"> </p></div> <div class="uno-h58bnc"><span class="uno-vv4s5f">Title:</span> <!> <!></div> <div class="uno-h58bnc"><span class="uno-vv4s5f">Language:</span> <!> <!></div></div> <button type="button" class="uno-khevc7" title="Delete chapter"><!></button> <button type="button" class="uno-as3ag3"><!></button></div> <!></div>');function Zn(n,t){if(Se(t,!0),!$t(mt))throw new Error("TargetedChapterEditor must be used within a component that provides TargetingState context");const r=ge(t,"chapter",15);let s=U(!1),o=U(!1);Re(()=>{!a(o)&&r()&&(r().originalFieldValues.has("language")||r().originalFieldValues.set("language",r().language),_(o,!0))}),Re(()=>{if(a(o)&&r()&&r().originalFieldValues.has("language")){const v=r().originalFieldValues.get("language");r().language!==v&&!r().manuallyEditedFields.has("language")&&r().manuallyEditedFields.add("language")}});function i(){_(s,!a(s))}function d(v){if(r().originalFieldValues.has(v)){const k=r().originalFieldValues.get(v);v==="title"?r(r().chapterTitle=k,!0):v==="volume"?r(r().chapterVolume=k,!0):v==="chapterNumber"?r(r().chapterNumber=k,!0):v==="groups"?r(r().associatedGroup.groupIds=k?[...k]:null,!0):v==="language"&&r(r().language=k,!0),r().manuallyEditedFields.delete(v),r().originalFieldValues.delete(v)}}function l(){r(r().isDeleted=!r().isDeleted,!0)}var u=Kn(),y=f(u),g=f(y),j=f(g),W=f(j),K=f(W);p(W);var G=c(W,2),M=c(f(G),2);dt(M,{textClass:"text-sm text-muted",fieldName:"volume",get chapter(){return r()},get value(){return r().chapterVolume},set value(v){r(r().chapterVolume=v,!0)}});var D=c(M,2);{var S=v=>{var k=Gn();k.__click=J=>{J.stopPropagation(),d("volume")},w(v,k)};re(D,v=>{r().manuallyEditedFields.has("volume")&&v(S)})}p(G);var B=c(G,2),ae=c(f(B),2);dt(ae,{textClass:"text-sm text-muted",fieldName:"chapterNumber",get chapter(){return r()},get value(){return r().chapterNumber},set value(v){r(r().chapterNumber=v,!0)}});var Q=c(ae,2);{var F=v=>{var k=$n();k.__click=J=>{J.stopPropagation(),d("chapterNumber")},w(v,k)};re(Q,v=>{r().manuallyEditedFields.has("chapterNumber")&&v(F)})}p(B);var V=c(B,2),H=c(f(V),2);Mt(H,{fieldName:"groups",get chapter(){return r()},get groups(){return r().associatedGroup},set groups(v){r(r().associatedGroup=v,!0)}});var te=c(H,2);{var L=v=>{var k=Mn();k.__click=J=>{J.stopPropagation(),d("groups")},w(v,k)};re(te,v=>{r().manuallyEditedFields.has("groups")&&v(L)})}p(V),p(j);var A=c(j,2),Z=c(f(A),2),le=f(Z,!0);p(Z),p(A);var Y=c(A,2),z=c(f(Y),2);dt(z,{class:"",textClass:"text-xl font-bold text-app",fieldName:"title",get chapter(){return r()},get value(){return r().chapterTitle},set value(v){r(r().chapterTitle=v,!0)}});var N=c(z,2);{var b=v=>{var k=Un();k.__click=J=>{J.stopPropagation(),d("title")},w(v,k)};re(N,v=>{r().manuallyEditedFields.has("title")&&v(b)})}p(Y);var $=c(Y,2),T=c(f($),2);{let v=Ie(()=>nt.map(k=>k.id));et(T,{get items(){return a(v)},getDisplayText:k=>{const J=nt.find(ve=>ve.id===k);return J?Ut(J):k},class:"uno-6nex0u",get selectedItem(){return r().language},set selectedItem(k){r(r().language=k,!0)}})}var m=c(T,2);{var C=v=>{var k=Bn();k.__click=J=>{J.stopPropagation(),d("language")},w(v,k)};re(m,v=>{r().manuallyEditedFields.has("language")&&v(C)})}p($),p(g);var R=c(g,2);R.__click=l;var q=f(R);{var E=v=>{var k=Yn();w(v,k)},P=v=>{var k=qn();w(v,k)};re(q,v=>{r().isDeleted?v(E):v(P,!1)})}p(R);var I=c(R,2);I.__click=i;var X=f(I);{var ie=v=>{var k=Hn();w(v,k)},O=v=>{var k=Wn();w(v,k)};re(X,v=>{a(s)?v(ie):v(O,!1)})}p(I),p(y);var ee=c(y,2);{var se=v=>{var k=Xn(),J=f(k);zn(J,{get pages(){return r().pages},set pages(ve){r(r().pages=ve,!0)}}),p(k),w(v,k)};re(ee,v=>{a(s)&&v(se)})}p(u),de(()=>{Te(u,1,Oe(["uno-gqkv0r",t.class])),fe(K,`${t.index+1}.`),fe(le,r().originalFolderPath)}),w(n,u),Fe()}Pe(["click"]);var Qn=x('<div role="tooltip"><div class="uno-rz0zfu"><!></div></div>'),Jn=x('<div><button type="button" class="uno-01l1ly"><div class="uno-171agc"></div></button> <!></div>');function Ne(n,t){Se(t,!0);let e=ge(t,"class",3,""),r=ge(t,"title",3,"Click for more information"),s=ge(t,"position",3,"bottom"),o=U(!1),i=U(void 0),d=U(void 0),l=U(we({side:s(),offsetX:0,offsetY:0}));function u(){_(o,!a(o)),a(o)&&(_(l,{side:s(),offsetX:0,offsetY:0},!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{g()})}))}function y(S){a(i)&&!a(i).contains(S.target)&&_(o,!1)}function g(){if(!a(i)||!a(d))return;const S=a(i).getBoundingClientRect(),B=a(d).getBoundingClientRect(),ae=window.innerWidth,Q=window.innerHeight,F=8,V=Q-S.bottom-F,H=S.top-F,te=ae-S.right-F,L=S.left-F;let A=s(),Z=0,le=0;if(!(s()==="bottom"&&V>=B.height||s()==="top"&&H>=B.height||s()==="right"&&te>=B.width||s()==="left"&&L>=B.width)){const z=[{side:"bottom",space:V,fits:V>=B.height},{side:"top",space:H,fits:H>=B.height},{side:"right",space:te,fits:te>=B.width},{side:"left",space:L,fits:L>=B.width}],N=z.filter(b=>b.fits);N.length>0?A=N.reduce((b,$)=>$.space>b.space?$:b).side:A=z.reduce((b,$)=>$.space>b.space?$:b).side}if(A==="bottom"||A==="top"){const z=B.width,b=S.left+S.width/2-z/2,$=a(i).getBoundingClientRect().left;let m=S.left-$+S.width/2-z/2;b<F?m+=F-b:b+z>ae-F&&(m-=b+z-(ae-F)),Z=m}if(A==="left"||A==="right"){const z=B.height,b=S.top+S.height/2-z/2,$=a(i).getBoundingClientRect().top;let m=S.top-$+S.height/2-z/2;b<F?m+=F-b:b+z>Q-F&&(m-=b+z-(Q-F)),le=m}_(l,{side:A,offsetX:Z,offsetY:le},!0)}Re(()=>{if(a(o))return document.addEventListener("click",y),window.addEventListener("resize",g),window.addEventListener("scroll",g,!0),()=>{document.removeEventListener("click",y),window.removeEventListener("resize",g),window.removeEventListener("scroll",g,!0)}});function j(){switch(a(l).side){case"top":return"bottom-full mb-2";case"left":return"right-full mr-2";case"right":return"left-full ml-2";case"bottom":default:return"top-full mt-2"}}function W(){let S="";return a(l).side==="bottom"||a(l).side==="top"?S+=`left: ${a(l).offsetX}px;`:S+=`top: ${a(l).offsetY}px;`,S}var K=Jn(),G=f(K);G.__click=u;var M=c(G,2);{var D=S=>{var B=Qn(),ae=f(B),Q=f(ae);{var F=V=>{var H=je(),te=xe(H);fn(te,()=>t.children),w(V,H)};re(Q,V=>{t.children&&V(F)})}p(ae),p(B),tt(B,V=>_(d,V),()=>a(d)),de((V,H)=>{Te(B,1,`uno-pm7i65 ${V??""}`),qe(B,H)},[j,W]),w(S,B)};re(M,S=>{a(o)&&S(D)})}p(K),tt(K,S=>_(i,S),()=>a(i)),de(()=>{Te(K,1,`uno-j18psi ${e()??""}`),Ye(G,"aria-label",r()),Ye(G,"aria-expanded",a(o)),Ye(G,"title",r())}),w(n,K),Fe()}Pe(["click"]);var Dn=x(`<p class="uno-9ypyj4">Quick actions to reset or clear chapter titles across all chapters. <br/> <br/> <b>Clear Titles:</b> Removes all chapter titles (sets them to empty strings). <br/> <b>Reset Titles:</b> Restores chapter titles to their original folder path names. <br/> <br/> Note: These actions will skip chapters that have been manually edited, preserving your custom
				changes. Manually edited in this context means that you changed the title directly on the chapter.</p>`),er=x(`<p class="uno-9ypyj4">By default, regex patterns are applied to the folder path. Enable this option to use the
				chapter title as the source instead. <br/> <br/> This is particularly useful for .cbz archives where metadata (like volume or chapter numbers)
				is embedded in the chapter title but not present in the folder path structure.</p>`),tr=x(`<p class="uno-9ypyj4">Regex pattern to extract the chapter title from the folder path or chapter title
					(depending on the source selection above). <br/> <br/> The first capture group will be used as the extracted title. Use non-capturing groups <code class="uno-ms31b4">(?:...)</code> for parts you want to match but
					not extract. <br/> <br/> Example: <code class="uno-ms31b4">- (.+)$</code> extracts everything after
					" - " at the end of the string.</p>`),nr=x(`<p class="uno-9ypyj4">Regex pattern to extract the volume number from the folder path or chapter title. <br/> <br/> The first capture group should contain the volume number. Leading zeros are automatically removed
					from the extracted value. <br/> <br/> Example: <code class="uno-ms31b4">Vol\\.? ?(\\d+)</code> matches "Vol 1",
					"Vol. 2", "Vol3", etc., and extracts the number.</p>`),rr=x(`<p class="uno-9ypyj4">Regex pattern to extract the chapter number from the folder path or chapter title. <br/> <br/> The first capture group will be used as the extracted chapter number. Leading zeros are automatically
					removed. Decimal chapter numbers (e.g., 1.5, 2.1) are supported. <br/> <br/> Example: <code class="uno-ms31b4">(?:Ch\\.?|Chapter) ?(\\d+(?:\\.\\d+)?)</code> matches "Ch 1", "Chapter 2.5", "Ch.3", etc., and extracts the number.</p>`),sr=x(`<p class="uno-9ypyj4">Directly assign a volume number to chapters. This overrides any volume extracted via
					regex. <br/> <br/> You can specify a range to apply the volume only to specific chapters. If no range is specified,
					it applies to all chapters. <br/> <br/> To remove a volume assignment, set this to an empty string and apply it.</p>`),or=x(`<p class="uno-9ypyj4">Set the language for chapters. <br/> <br/> You can specify a range to apply the language only to specific chapters. If no range is specified,
					it applies to all chapters. <br/> <br/> The default language is English (en), but you can select any supported language from the dropdown.</p>`),ar=x(`<p class="uno-9ypyj4">Assign scanlation groups to chapters. Groups must be registered in the Group Preparation
					section above before they can be assigned here. <br/> <br/> <b>Set Group(s):</b> Replaces all existing groups with the selected ones. <br/> <b>Append Group(s):</b> Adds the selected groups to any existing groups (removes
					duplicates). <br/> <br/> You can specify a range to apply groups only to specific chapters. If no range is specified,
					it applies to all chapters.</p>`),ir=x(`<div class="uno-hv8hef"><p class="uno-nt4u1e">Use the batch editing tools below to apply changes to multiple chapters at once. Each option has
		a question mark icon (<span class="uno-96496p"></span>)
		that you can click for detailed information about that specific feature. <br/> <br/> <b>Ranges:</b> Most batch operations support range selection. Ranges target chapters by their
		index number (shown in the top-left corner of each chapter in the chapter list below). <br/> <b>Range values are inclusive</b> - if you specify range 1-5, it will affect chapters at
		positions 1, 2, 3, 4, and 5. If no range is specified, the operation applies to all chapters. <br/> <b>Ranges can be open</b> - you can leave the start or end value empty to open the range to the
		start or end of the chapter list. <br/> <br/> <b>Case Sensitivity:</b> Regex extraction options have a "Case Sensitive" checkbox. When
		unchecked (default), the regex will match regardless of letter case (e.g., "Vol" matches "vol",
		"VOL", "Vol"). When checked, the regex will only match the exact case you specify. <br/> <br/> <b>Manual Edits:</b> Batch operations automatically skip chapters that have been manually
		edited, preserving your custom changes. You can manually edit individual chapter properties by
		clicking on them directly in the chapter list below. <br/> <br/> <b>Empty Values:</b> To remove an assigned volume or title, you can batch edit it to an empty
		string - empty values are considered as "not assigned" (no volume/title). <br/> <br/> <b>Groups:</b> Before assigning groups to chapters, you must first register them in the Group Preparation
		section above. Once registered, groups become available for assignment here.</p> <div class="uno-iuzx0s"><!> <p class="uno-tfn8jv">Quick unfuckup actions:</p> <button type="button" class="uno-c8n574">Clear Titles</button> <button type="button" class="uno-c8n574">Reset Titles</button></div> <div class="uno-tj7d2a"><!> <label class="uno-3lkpn9"><input type="checkbox" class="uno-0xzuhw"/> <span class="uno-ks3vq1">Use Chapter Title as Regex Source (instead of Folder Path)</span></label> <p class="uno-om9xyq">Useful for .cbz archives where information is in the title but not the path</p></div> <form class="uno-vr0h6j"><div class="uno-6patty"><!> <p class="uno-tfn8jv">Extract Title Regex:</p> <input type="text" placeholder="^(.+?)\\s+-\\s+Vol" class="uno-d22hha"/></div> <div class="uno-3lkpn9"><label class="uno-yrku2g"><input type="checkbox" class="uno-0xzuhw"/> <span class="uno-nt4u1e">Case Sensitive</span></label> <!> <button type="submit" class="uno-160w63">Apply</button></div></form> <form class="uno-vr0h6j"><div class="uno-6patty"><!> <p class="uno-tfn8jv">Extract Volume Regex:</p> <input type="text" placeholder="Vol\\.? ?(\\d+)" class="uno-d22hha"/></div> <div class="uno-3lkpn9"><label class="uno-yrku2g"><input type="checkbox" class="uno-0xzuhw"/> <span class="uno-nt4u1e">Case Sensitive</span></label> <!> <button type="submit" class="uno-160w63">Apply</button></div></form> <form class="uno-vr0h6j"><div class="uno-6patty"><!> <p class="uno-tfn8jv">Extract Chapter Number Regex</p> <input type="text" placeholder="Ch\\.? ?(\\d+)" class="uno-d22hha"/></div> <div class="uno-3lkpn9"><label class="uno-yrku2g"><input type="checkbox" class="uno-0xzuhw"/> <span class="uno-nt4u1e">Case Sensitive</span></label> <!> <button type="submit" class="uno-160w63">Apply</button></div></form> <form class="uno-vr0h6j"><div class="uno-3lkpn9"><!> <p class="uno-tfn8jv">Assign Volume to All Chapters:</p> <input type="text" placeholder="Volume number" class="uno-gz6zwy"/></div> <div class="uno-3lkpn9"><!> <button type="submit" class="uno-160w63">Apply</button></div></form> <form class="uno-vr0h6j"><div class="uno-3lkpn9"><!> <p class="uno-tfn8jv">Assign Language to All Chapters:</p> <!></div> <div class="uno-3lkpn9"><!> <button type="submit" class="uno-160w63">Apply</button></div></form> <form class="uno-vr0h6j"><div class="uno-h5li09"><!> <p class="uno-tfn8jv">Assign Groups to All Chapters:</p> <!></div> <div class="uno-3lkpn9"><!> <button type="submit" class="uno-160w63">Set Group(s)</button> <button type="button" class="uno-160w63">Append Group(s)</button></div></form></div>`);function lr(n,t){Se(t,!0);let e=ge(t,"chapters",27,()=>we([])),r=U("- (.+)$"),s=U(!1),o=U("Vol\\.? ?(\\d+)"),i=U(!1),d=U("(?:Ch\\.?|Chapter) ?(\\d+(?:\\.\\d+)?)"),l=U(!1),u=U(we(new ht)),y=U(null),g=U("en"),j=U(!1);const W=we({start:null,end:null}),K=we({start:null,end:null}),G=we({start:null,end:null}),M=we({start:null,end:null}),D=we({start:null,end:null}),S=we({start:null,end:null});function B(){if(!a(r).trim())return;const h=a(s)?"":"i",oe=new RegExp(a(r),h),ne=(M.start??1)-1,ce=(M.end??e().length)-1;for(let ue=ne;ue<=ce;ue++){const be=e()[ue],ke=a(j)?be.chapterTitle:be.originalFolderPath;if(!ke||be.manuallyEditedFields.has("title"))continue;const Ee=ke.match(oe);Ee&&Ee[1]&&(be.chapterTitle=Ee[1])}}function ae(){if(!a(o).trim())return;const h=a(i)?"":"i",oe=new RegExp(a(o),h),ne=(D.start??1)-1,ce=(D.end??e().length)-1;for(let ue=ne;ue<=ce;ue++){const be=e()[ue],ke=a(j)?be.chapterTitle:be.originalFolderPath;if(!ke||be.manuallyEditedFields.has("volume"))continue;const Ee=ke.match(oe);Ee&&Ee[1]&&(be.chapterVolume=Ee[1].replace(/^0+/,""))}}function Q(){if(!a(d).trim())return;const h=a(l)?"":"i",oe=new RegExp(a(d),h),ne=(S.start??1)-1,ce=(S.end??e().length)-1;for(let ue=ne;ue<=ce;ue++){const be=e()[ue],ke=a(j)?be.chapterTitle:be.originalFolderPath;if(!ke||be.manuallyEditedFields.has("chapterNumber"))continue;const Ee=ke.match(oe);Ee&&Ee[1]&&(be.chapterNumber=Ee[1].replace(/^0+/,""))}}function F(){e().forEach(h=>{h.manuallyEditedFields.has("title")||(h.chapterTitle=h.originalFolderPath?.split("/").pop()??"")})}function V(){e().forEach(h=>{h.manuallyEditedFields.has("title")||(h.chapterTitle="")})}function H(){const h=(W.start??1)-1,oe=(W.end??e().length)-1,ne=a(u).groupIds??[];for(let ce=h;ce<=oe;ce++){const ue=e()[ce];ue.manuallyEditedFields.has("groups")||(ue.associatedGroup.groupIds=[...ne])}}function te(){const h=(W.start??1)-1,oe=(W.end??e().length)-1,ne=a(u).groupIds??[];for(let ce=h;ce<=oe;ce++){const ue=e()[ce];if(ue.manuallyEditedFields.has("groups"))continue;const ke=[...ue.associatedGroup.groupIds??[],...ne],Ee=[...new Set(ke)];ue.associatedGroup.groupIds=Ee}}function L(){const h=(K.start??1)-1,oe=(K.end??e().length)-1,ne=a(y)?.trim()||null;for(let ce=h;ce<=oe;ce++){const ue=e()[ce];ue.manuallyEditedFields.has("volume")||(ue.chapterVolume=ne)}}function A(){const h=(G.start??1)-1,oe=(G.end??e().length)-1,ne=a(g)?.trim()||"en";for(let ce=h;ce<=oe;ce++){const ue=e()[ce];ue.manuallyEditedFields.has("language")||(ue.originalFieldValues.set("language",ne),ue.language=ne,ue.manuallyEditedFields.delete("language"))}}var Z=ir(),le=c(f(Z),2),Y=f(le);Ne(Y,{title:"Quick Actions",position:"bottom",children:(h,oe)=>{var ne=Dn();w(h,ne)},$$slots:{default:!0}});var z=c(Y,4);z.__click=V;var N=c(z,2);N.__click=F,p(le);var b=c(le,2),$=f(b);Ne($,{title:"Regex Source Selection",position:"bottom",children:(h,oe)=>{var ne=er();w(h,ne)},$$slots:{default:!0}});var T=c($,2),m=f(T);_e(m),he(2),p(T),he(2),p(b);var C=c(b,2),R=f(C),q=f(R);Ne(q,{title:"Extract Title Regex",position:"bottom",children:(h,oe)=>{var ne=tr();w(h,ne)},$$slots:{default:!0}});var E=c(q,4);_e(E),p(R);var P=c(R,2),I=f(P),X=f(I);_e(X),he(2),p(I);var ie=c(I,2);Ue(ie,{min:1,get max(){return e().length},get rangeStart(){return M.start},set rangeStart(h){M.start=h},get rangeEnd(){return M.end},set rangeEnd(h){M.end=h}}),he(2),p(P),p(C);var O=c(C,2),ee=f(O),se=f(ee);Ne(se,{title:"Extract Volume Regex",position:"bottom",children:(h,oe)=>{var ne=nr();w(h,ne)},$$slots:{default:!0}});var v=c(se,4);_e(v),p(ee);var k=c(ee,2),J=f(k),ve=f(J);_e(ve),he(2),p(J);var Le=c(J,2);Ue(Le,{min:1,get max(){return e().length},get rangeStart(){return D.start},set rangeStart(h){D.start=h},get rangeEnd(){return D.end},set rangeEnd(h){D.end=h}}),he(2),p(k),p(O);var Ce=c(O,2),Ae=f(Ce),Qe=f(Ae);Ne(Qe,{title:"Extract Chapter Number Regex",position:"bottom",children:(h,oe)=>{var ne=rr();w(h,ne)},$$slots:{default:!0}});var yt=c(Qe,4);_e(yt),p(Ae);var _t=c(Ae,2),ot=f(_t),Et=f(ot);_e(Et),he(2),p(ot);var Wt=c(ot,2);Ue(Wt,{min:1,get max(){return e().length},get rangeStart(){return S.start},set rangeStart(h){S.start=h},get rangeEnd(){return S.end},set rangeEnd(h){S.end=h}}),he(2),p(_t),p(Ce);var Je=c(Ce,2),at=f(Je),wt=f(at);Ne(wt,{title:"Assign Volume",position:"bottom",children:(h,oe)=>{var ne=sr();w(h,ne)},$$slots:{default:!0}});var Tt=c(wt,4);_e(Tt),p(at);var It=c(at,2),Xt=f(It);Ue(Xt,{min:1,get max(){return e().length},get rangeStart(){return K.start},set rangeStart(h){K.start=h},get rangeEnd(){return K.end},set rangeEnd(h){K.end=h}}),he(2),p(It),p(Je);var De=c(Je,2),it=f(De),Nt=f(it);Ne(Nt,{title:"Assign Language",position:"bottom",children:(h,oe)=>{var ne=or();w(h,ne)},$$slots:{default:!0}});var Kt=c(Nt,4);{let h=Ie(()=>nt.map(oe=>oe.id));et(Kt,{get items(){return a(h)},getDisplayText:oe=>{const ne=nt.find(ce=>ce.id===oe);return ne?Ut(ne):oe},class:"uno-c18fgf",get selectedItem(){return a(g)},set selectedItem(oe){_(g,oe,!0)}})}p(it);var xt=c(it,2),Zt=f(xt);Ue(Zt,{min:1,get max(){return e().length},get rangeStart(){return G.start},set rangeStart(h){G.start=h},get rangeEnd(){return G.end},set rangeEnd(h){G.end=h}}),he(2),p(xt),p(De);var lt=c(De,2),ut=f(lt),St=f(ut);Ne(St,{title:"Assign Groups",position:"bottom",children:(h,oe)=>{var ne=ar();w(h,ne)},$$slots:{default:!0}});var Qt=c(St,4);Mt(Qt,{get groups(){return a(u)},set groups(h){_(u,h,!0)}}),p(ut);var Ft=c(ut,2),Ct=f(Ft);Ue(Ct,{min:1,get max(){return e().length},get rangeStart(){return W.start},set rangeStart(h){W.start=h},get rangeEnd(){return W.end},set rangeEnd(h){W.end=h}});var Jt=c(Ct,4);Jt.__click=te,p(Ft),p(lt),p(Z),Ve(m,()=>a(j),h=>_(j,h)),Me("submit",C,h=>{B(),h.preventDefault()}),Ze(E,()=>a(r),h=>_(r,h)),Ve(X,()=>a(s),h=>_(s,h)),Me("submit",O,h=>{ae(),h.preventDefault()}),Ze(v,()=>a(o),h=>_(o,h)),Ve(ve,()=>a(i),h=>_(i,h)),Me("submit",Ce,h=>{Q(),h.preventDefault()}),Ze(yt,()=>a(d),h=>_(d,h)),Ve(Et,()=>a(l),h=>_(l,h)),Me("submit",Je,h=>{L(),h.preventDefault()}),Ze(Tt,()=>a(y),h=>_(y,h)),Me("submit",De,h=>{A(),h.preventDefault()}),Me("submit",lt,h=>{H(),h.preventDefault()}),w(n,Z),Fe()}Pe(["click"]);const Bt=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",ur=Bt+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",cr="["+Bt+"]["+ur+"]*",dr=new RegExp("^"+cr+"$");function Yt(n,t){const e=[];let r=t.exec(n);for(;r;){const s=[];s.startIndex=t.lastIndex-r[0].length;const o=r.length;for(let i=0;i<o;i++)s.push(r[i]);e.push(s),r=t.exec(n)}return e}const st=function(n){const t=dr.exec(n);return!(t===null||typeof t>"u")};function pr(n){return typeof n<"u"}const fr={allowBooleanAttributes:!1,unpairedTags:[]};function hr(n,t){t=Object.assign({},fr,t);const e=[];let r=!1,s=!1;n[0]==="\uFEFF"&&(n=n.substr(1));for(let o=0;o<n.length;o++)if(n[o]==="<"&&n[o+1]==="?"){if(o+=2,o=Lt(n,o),o.err)return o}else if(n[o]==="<"){let i=o;if(o++,n[o]==="!"){o=zt(n,o);continue}else{let d=!1;n[o]==="/"&&(d=!0,o++);let l="";for(;o<n.length&&n[o]!==">"&&n[o]!==" "&&n[o]!=="	"&&n[o]!==`
`&&n[o]!=="\r";o++)l+=n[o];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),o--),!wr(l)){let g;return l.trim().length===0?g="Invalid space after '<'.":g="Tag '"+l+"' is an invalid name.",pe("InvalidTag",g,me(n,o))}const u=br(n,o);if(u===!1)return pe("InvalidAttr","Attributes for '"+l+"' have open quote.",me(n,o));let y=u.value;if(o=u.index,y[y.length-1]==="/"){const g=o-y.length;y=y.substring(0,y.length-1);const j=Gt(y,t);if(j===!0)r=!0;else return pe(j.err.code,j.err.msg,me(n,g+j.err.line))}else if(d)if(u.tagClosed){if(y.trim().length>0)return pe("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",me(n,i));if(e.length===0)return pe("InvalidTag","Closing tag '"+l+"' has not been opened.",me(n,i));{const g=e.pop();if(l!==g.tagName){let j=me(n,g.tagStartPos);return pe("InvalidTag","Expected closing tag '"+g.tagName+"' (opened in line "+j.line+", col "+j.col+") instead of closing tag '"+l+"'.",me(n,i))}e.length==0&&(s=!0)}}else return pe("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",me(n,o));else{const g=Gt(y,t);if(g!==!0)return pe(g.err.code,g.err.msg,me(n,o-y.length+g.err.line));if(s===!0)return pe("InvalidXml","Multiple possible root nodes found.",me(n,o));t.unpairedTags.indexOf(l)!==-1||e.push({tagName:l,tagStartPos:i}),r=!0}for(o++;o<n.length;o++)if(n[o]==="<")if(n[o+1]==="!"){o++,o=zt(n,o);continue}else if(n[o+1]==="?"){if(o=Lt(n,++o),o.err)return o}else break;else if(n[o]==="&"){const g=_r(n,o);if(g==-1)return pe("InvalidChar","char '&' is not expected.",me(n,o));o=g}else if(s===!0&&!jt(n[o]))return pe("InvalidXml","Extra text at the end",me(n,o));n[o]==="<"&&o--}}else{if(jt(n[o]))continue;return pe("InvalidChar","char '"+n[o]+"' is not expected.",me(n,o))}if(r){if(e.length==1)return pe("InvalidTag","Unclosed tag '"+e[0].tagName+"'.",me(n,e[0].tagStartPos));if(e.length>0)return pe("InvalidXml","Invalid '"+JSON.stringify(e.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return pe("InvalidXml","Start tag expected.",1);return!0}function jt(n){return n===" "||n==="	"||n===`
`||n==="\r"}function Lt(n,t){const e=t;for(;t<n.length;t++)if(n[t]=="?"||n[t]==" "){const r=n.substr(e,t-e);if(t>5&&r==="xml")return pe("InvalidXml","XML declaration allowed only at the start of the document.",me(n,t));if(n[t]=="?"&&n[t+1]==">"){t++;break}else continue}return t}function zt(n,t){if(n.length>t+5&&n[t+1]==="-"&&n[t+2]==="-"){for(t+=3;t<n.length;t++)if(n[t]==="-"&&n[t+1]==="-"&&n[t+2]===">"){t+=2;break}}else if(n.length>t+8&&n[t+1]==="D"&&n[t+2]==="O"&&n[t+3]==="C"&&n[t+4]==="T"&&n[t+5]==="Y"&&n[t+6]==="P"&&n[t+7]==="E"){let e=1;for(t+=8;t<n.length;t++)if(n[t]==="<")e++;else if(n[t]===">"&&(e--,e===0))break}else if(n.length>t+9&&n[t+1]==="["&&n[t+2]==="C"&&n[t+3]==="D"&&n[t+4]==="A"&&n[t+5]==="T"&&n[t+6]==="A"&&n[t+7]==="["){for(t+=8;t<n.length;t++)if(n[t]==="]"&&n[t+1]==="]"&&n[t+2]===">"){t+=2;break}}return t}const gr='"',vr="'";function br(n,t){let e="",r="",s=!1;for(;t<n.length;t++){if(n[t]===gr||n[t]===vr)r===""?r=n[t]:r!==n[t]||(r="");else if(n[t]===">"&&r===""){s=!0;break}e+=n[t]}return r!==""?!1:{value:e,index:t,tagClosed:s}}const mr=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Gt(n,t){const e=Yt(n,mr),r={};for(let s=0;s<e.length;s++){if(e[s][1].length===0)return pe("InvalidAttr","Attribute '"+e[s][2]+"' has no space in starting.",Xe(e[s]));if(e[s][3]!==void 0&&e[s][4]===void 0)return pe("InvalidAttr","Attribute '"+e[s][2]+"' is without value.",Xe(e[s]));if(e[s][3]===void 0&&!t.allowBooleanAttributes)return pe("InvalidAttr","boolean attribute '"+e[s][2]+"' is not allowed.",Xe(e[s]));const o=e[s][2];if(!Er(o))return pe("InvalidAttr","Attribute '"+o+"' is an invalid name.",Xe(e[s]));if(!r.hasOwnProperty(o))r[o]=1;else return pe("InvalidAttr","Attribute '"+o+"' is repeated.",Xe(e[s]))}return!0}function yr(n,t){let e=/\d/;for(n[t]==="x"&&(t++,e=/[\da-fA-F]/);t<n.length;t++){if(n[t]===";")return t;if(!n[t].match(e))break}return-1}function _r(n,t){if(t++,n[t]===";")return-1;if(n[t]==="#")return t++,yr(n,t);let e=0;for(;t<n.length;t++,e++)if(!(n[t].match(/\w/)&&e<20)){if(n[t]===";")break;return-1}return t}function pe(n,t,e){return{err:{code:n,msg:t,line:e.line||e,col:e.col}}}function Er(n){return st(n)}function wr(n){return st(n)}function me(n,t){const e=n.substring(0,t).split(/\r?\n/);return{line:e.length,col:e[e.length-1].length+1}}function Xe(n){return n.startIndex+n[1].length}const Tr={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(n,t){return t},attributeValueProcessor:function(n,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(n,t,e){return n},captureMetaData:!1},Ir=function(n){return Object.assign({},Tr,n)};let rt;typeof Symbol!="function"?rt="@@xmlMetadata":rt=Symbol("XML Node Metadata");class Ge{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,e){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:e})}addChild(t,e){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child}),e!==void 0&&(this.child[this.child.length-1][rt]={startIndex:e})}static getMetaDataSymbol(){return rt}}class Nr{constructor(t){this.suppressValidationErr=!t}readDocType(t,e){const r={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let s=1,o=!1,i=!1,d="";for(;e<t.length;e++)if(t[e]==="<"&&!i){if(o&&ze(t,"!ENTITY",e)){e+=7;let l,u;[l,u,e]=this.readEntityExp(t,e+1,this.suppressValidationErr),u.indexOf("&")===-1&&(r[l]={regx:RegExp(`&${l};`,"g"),val:u})}else if(o&&ze(t,"!ELEMENT",e)){e+=8;const{index:l}=this.readElementExp(t,e+1);e=l}else if(o&&ze(t,"!ATTLIST",e))e+=8;else if(o&&ze(t,"!NOTATION",e)){e+=9;const{index:l}=this.readNotationExp(t,e+1,this.suppressValidationErr);e=l}else if(ze(t,"!--",e))i=!0;else throw new Error("Invalid DOCTYPE");s++,d=""}else if(t[e]===">"){if(i?t[e-1]==="-"&&t[e-2]==="-"&&(i=!1,s--):s--,s===0)break}else t[e]==="["?o=!0:d+=t[e];if(s!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:e}}readEntityExp(t,e){e=ye(t,e);let r="";for(;e<t.length&&!/\s/.test(t[e])&&t[e]!=='"'&&t[e]!=="'";)r+=t[e],e++;if(Ke(r),e=ye(t,e),!this.suppressValidationErr){if(t.substring(e,e+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(t[e]==="%")throw new Error("Parameter entities are not supported")}let s="";return[e,s]=this.readIdentifierVal(t,e,"entity"),e--,[r,s,e]}readNotationExp(t,e){e=ye(t,e);let r="";for(;e<t.length&&!/\s/.test(t[e]);)r+=t[e],e++;!this.suppressValidationErr&&Ke(r),e=ye(t,e);const s=t.substring(e,e+6).toUpperCase();if(!this.suppressValidationErr&&s!=="SYSTEM"&&s!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${s}"`);e+=s.length,e=ye(t,e);let o=null,i=null;if(s==="PUBLIC")[e,o]=this.readIdentifierVal(t,e,"publicIdentifier"),e=ye(t,e),(t[e]==='"'||t[e]==="'")&&([e,i]=this.readIdentifierVal(t,e,"systemIdentifier"));else if(s==="SYSTEM"&&([e,i]=this.readIdentifierVal(t,e,"systemIdentifier"),!this.suppressValidationErr&&!i))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:r,publicIdentifier:o,systemIdentifier:i,index:--e}}readIdentifierVal(t,e,r){let s="";const o=t[e];if(o!=='"'&&o!=="'")throw new Error(`Expected quoted string, found "${o}"`);for(e++;e<t.length&&t[e]!==o;)s+=t[e],e++;if(t[e]!==o)throw new Error(`Unterminated ${r} value`);return e++,[e,s]}readElementExp(t,e){e=ye(t,e);let r="";for(;e<t.length&&!/\s/.test(t[e]);)r+=t[e],e++;if(!this.suppressValidationErr&&!st(r))throw new Error(`Invalid element name: "${r}"`);e=ye(t,e);let s="";if(t[e]==="E"&&ze(t,"MPTY",e))e+=4;else if(t[e]==="A"&&ze(t,"NY",e))e+=2;else if(t[e]==="("){for(e++;e<t.length&&t[e]!==")";)s+=t[e],e++;if(t[e]!==")")throw new Error("Unterminated content model")}else if(!this.suppressValidationErr)throw new Error(`Invalid Element Expression, found "${t[e]}"`);return{elementName:r,contentModel:s.trim(),index:e}}readAttlistExp(t,e){e=ye(t,e);let r="";for(;e<t.length&&!/\s/.test(t[e]);)r+=t[e],e++;Ke(r),e=ye(t,e);let s="";for(;e<t.length&&!/\s/.test(t[e]);)s+=t[e],e++;if(!Ke(s))throw new Error(`Invalid attribute name: "${s}"`);e=ye(t,e);let o="";if(t.substring(e,e+8).toUpperCase()==="NOTATION"){if(o="NOTATION",e+=8,e=ye(t,e),t[e]!=="(")throw new Error(`Expected '(', found "${t[e]}"`);e++;let d=[];for(;e<t.length&&t[e]!==")";){let l="";for(;e<t.length&&t[e]!=="|"&&t[e]!==")";)l+=t[e],e++;if(l=l.trim(),!Ke(l))throw new Error(`Invalid notation name: "${l}"`);d.push(l),t[e]==="|"&&(e++,e=ye(t,e))}if(t[e]!==")")throw new Error("Unterminated list of notations");e++,o+=" ("+d.join("|")+")"}else{for(;e<t.length&&!/\s/.test(t[e]);)o+=t[e],e++;const d=["CDATA","ID","IDREF","IDREFS","ENTITY","ENTITIES","NMTOKEN","NMTOKENS"];if(!this.suppressValidationErr&&!d.includes(o.toUpperCase()))throw new Error(`Invalid attribute type: "${o}"`)}e=ye(t,e);let i="";return t.substring(e,e+8).toUpperCase()==="#REQUIRED"?(i="#REQUIRED",e+=8):t.substring(e,e+7).toUpperCase()==="#IMPLIED"?(i="#IMPLIED",e+=7):[e,i]=this.readIdentifierVal(t,e,"ATTLIST"),{elementName:r,attributeName:s,attributeType:o,defaultValue:i,index:e}}}const ye=(n,t)=>{for(;t<n.length&&/\s/.test(n[t]);)t++;return t};function ze(n,t,e){for(let r=0;r<t.length;r++)if(t[r]!==n[e+r+1])return!1;return!0}function Ke(n){if(st(n))return n;throw new Error(`Invalid entity name ${n}`)}const xr=/^[-+]?0x[a-fA-F0-9]+$/,Sr=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,Fr={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Cr(n,t={}){if(t=Object.assign({},Fr,t),!n||typeof n!="string")return n;let e=n.trim();if(t.skipLike!==void 0&&t.skipLike.test(e))return n;if(n==="0")return 0;if(t.hex&&xr.test(e))return Ar(e,16);if(e.search(/.+[eE].+/)!==-1)return kr(n,e,t);{const r=Sr.exec(e);if(r){const s=r[1]||"",o=r[2];let i=Rr(r[3]);const d=s?n[o.length+1]===".":n[o.length]===".";if(!t.leadingZeros&&(o.length>1||o.length===1&&!d))return n;{const l=Number(e),u=String(l);if(l===0)return l;if(u.search(/[eE]/)!==-1)return t.eNotation?l:n;if(e.indexOf(".")!==-1)return u==="0"||u===i||u===`${s}${i}`?l:n;let y=o?i:e;return o?y===u||s+y===u?l:n:y===u||y===s+u?l:n}}else return n}}const Pr=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function kr(n,t,e){if(!e.eNotation)return n;const r=t.match(Pr);if(r){let s=r[1]||"";const o=r[3].indexOf("e")===-1?"E":"e",i=r[2],d=s?n[i.length+1]===o:n[i.length]===o;return i.length>1&&d?n:i.length===1&&(r[3].startsWith(`.${o}`)||r[3][0]===o)?Number(t):e.leadingZeros&&!d?(t=(r[1]||"")+r[3],Number(t)):n}else return n}function Rr(n){return n&&n.indexOf(".")!==-1&&(n=n.replace(/0+$/,""),n==="."?n="0":n[0]==="."?n="0"+n:n[n.length-1]==="."&&(n=n.substring(0,n.length-1))),n}function Ar(n,t){if(parseInt)return parseInt(n,t);if(Number.parseInt)return Number.parseInt(n,t);if(window&&window.parseInt)return window.parseInt(n,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function Or(n){return typeof n=="function"?n:Array.isArray(n)?t=>{for(const e of n)if(typeof e=="string"&&t===e||e instanceof RegExp&&e.test(t))return!0}:()=>!1}class Vr{constructor(t){if(this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,r)=>String.fromCodePoint(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,r)=>String.fromCodePoint(Number.parseInt(r,16))}},this.addExternalEntities=jr,this.parseXml=Mr,this.parseTextData=Lr,this.resolveNameSpace=zr,this.buildAttributesMap=$r,this.isItStopNode=qr,this.replaceEntitiesValue=Br,this.readStopNodeData=Wr,this.saveTextToParentTag=Yr,this.addChild=Ur,this.ignoreAttributesFn=Or(this.options.ignoreAttributes),this.options.stopNodes&&this.options.stopNodes.length>0){this.stopNodesExact=new Set,this.stopNodesWildcard=new Set;for(let e=0;e<this.options.stopNodes.length;e++){const r=this.options.stopNodes[e];typeof r=="string"&&(r.startsWith("*.")?this.stopNodesWildcard.add(r.substring(2)):this.stopNodesExact.add(r))}}}}function jr(n){const t=Object.keys(n);for(let e=0;e<t.length;e++){const r=t[e];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:n[r]}}}function Lr(n,t,e,r,s,o,i){if(n!==void 0&&(this.options.trimValues&&!r&&(n=n.trim()),n.length>0)){i||(n=this.replaceEntitiesValue(n));const d=this.options.tagValueProcessor(t,n,e,s,o);return d==null?n:typeof d!=typeof n||d!==n?d:this.options.trimValues?bt(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?bt(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function zr(n){if(this.options.removeNSPrefix){const t=n.split(":"),e=n.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(n=e+t[1])}return n}const Gr=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function $r(n,t,e){if(this.options.ignoreAttributes!==!0&&typeof n=="string"){const r=Yt(n,Gr),s=r.length,o={};for(let i=0;i<s;i++){const d=this.resolveNameSpace(r[i][1]);if(this.ignoreAttributesFn(d,t))continue;let l=r[i][4],u=this.options.attributeNamePrefix+d;if(d.length)if(this.options.transformAttributeName&&(u=this.options.transformAttributeName(u)),u==="__proto__"&&(u="#__proto__"),l!==void 0){this.options.trimValues&&(l=l.trim()),l=this.replaceEntitiesValue(l);const y=this.options.attributeValueProcessor(d,l,t);y==null?o[u]=l:typeof y!=typeof l||y!==l?o[u]=y:o[u]=bt(l,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[u]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){const i={};return i[this.options.attributesGroupName]=o,i}return o}}const Mr=function(n){n=n.replace(/\r\n?/g,`
`);const t=new Ge("!xml");let e=t,r="",s="";const o=new Nr(this.options.processEntities);for(let i=0;i<n.length;i++)if(n[i]==="<")if(n[i+1]==="/"){const l=$e(n,">",i,"Closing Tag is not closed.");let u=n.substring(i+2,l).trim();if(this.options.removeNSPrefix){const j=u.indexOf(":");j!==-1&&(u=u.substr(j+1))}this.options.transformTagName&&(u=this.options.transformTagName(u)),e&&(r=this.saveTextToParentTag(r,e,s));const y=s.substring(s.lastIndexOf(".")+1);if(u&&this.options.unpairedTags.indexOf(u)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${u}>`);let g=0;y&&this.options.unpairedTags.indexOf(y)!==-1?(g=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):g=s.lastIndexOf("."),s=s.substring(0,g),e=this.tagsNodeStack.pop(),r="",i=l}else if(n[i+1]==="?"){let l=vt(n,i,!1,"?>");if(!l)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,e,s),!(this.options.ignoreDeclaration&&l.tagName==="?xml"||this.options.ignorePiTags)){const u=new Ge(l.tagName);u.add(this.options.textNodeName,""),l.tagName!==l.tagExp&&l.attrExpPresent&&(u[":@"]=this.buildAttributesMap(l.tagExp,s,l.tagName)),this.addChild(e,u,s,i)}i=l.closeIndex+1}else if(n.substr(i+1,3)==="!--"){const l=$e(n,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){const u=n.substring(i+4,l-2);r=this.saveTextToParentTag(r,e,s),e.add(this.options.commentPropName,[{[this.options.textNodeName]:u}])}i=l}else if(n.substr(i+1,2)==="!D"){const l=o.readDocType(n,i);this.docTypeEntities=l.entities,i=l.i}else if(n.substr(i+1,2)==="!["){const l=$e(n,"]]>",i,"CDATA is not closed.")-2,u=n.substring(i+9,l);r=this.saveTextToParentTag(r,e,s);let y=this.parseTextData(u,e.tagname,s,!0,!1,!0,!0);y==null&&(y=""),this.options.cdataPropName?e.add(this.options.cdataPropName,[{[this.options.textNodeName]:u}]):e.add(this.options.textNodeName,y),i=l+2}else{let l=vt(n,i,this.options.removeNSPrefix),u=l.tagName;const y=l.rawTagName;let g=l.tagExp,j=l.attrExpPresent,W=l.closeIndex;this.options.transformTagName&&(u=this.options.transformTagName(u)),e&&r&&e.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,e,s,!1));const K=e;K&&this.options.unpairedTags.indexOf(K.tagname)!==-1&&(e=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),u!==t.tagname&&(s+=s?"."+u:u);const G=i;if(this.isItStopNode(this.stopNodesExact,this.stopNodesWildcard,s,u)){let M="";if(g.length>0&&g.lastIndexOf("/")===g.length-1)u[u.length-1]==="/"?(u=u.substr(0,u.length-1),s=s.substr(0,s.length-1),g=u):g=g.substr(0,g.length-1),i=l.closeIndex;else if(this.options.unpairedTags.indexOf(u)!==-1)i=l.closeIndex;else{const S=this.readStopNodeData(n,y,W+1);if(!S)throw new Error(`Unexpected end of ${y}`);i=S.i,M=S.tagContent}const D=new Ge(u);u!==g&&j&&(D[":@"]=this.buildAttributesMap(g,s,u)),M&&(M=this.parseTextData(M,u,s,!0,j,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),D.add(this.options.textNodeName,M),this.addChild(e,D,s,G)}else{if(g.length>0&&g.lastIndexOf("/")===g.length-1){u[u.length-1]==="/"?(u=u.substr(0,u.length-1),s=s.substr(0,s.length-1),g=u):g=g.substr(0,g.length-1),this.options.transformTagName&&(u=this.options.transformTagName(u));const M=new Ge(u);u!==g&&j&&(M[":@"]=this.buildAttributesMap(g,s,u)),this.addChild(e,M,s,G),s=s.substr(0,s.lastIndexOf("."))}else{const M=new Ge(u);this.tagsNodeStack.push(e),u!==g&&j&&(M[":@"]=this.buildAttributesMap(g,s,u)),this.addChild(e,M,s,G),e=M}r="",i=W}}else r+=n[i];return t.child};function Ur(n,t,e,r){this.options.captureMetaData||(r=void 0);const s=this.options.updateTag(t.tagname,e,t[":@"]);s===!1||(typeof s=="string"&&(t.tagname=s),n.addChild(t,r))}const Br=function(n){if(this.options.processEntities){for(let t in this.docTypeEntities){const e=this.docTypeEntities[t];n=n.replace(e.regx,e.val)}for(let t in this.lastEntities){const e=this.lastEntities[t];n=n.replace(e.regex,e.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const e=this.htmlEntities[t];n=n.replace(e.regex,e.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function Yr(n,t,e,r){return n&&(r===void 0&&(r=t.child.length===0),n=this.parseTextData(n,t.tagname,e,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,r),n!==void 0&&n!==""&&t.add(this.options.textNodeName,n),n=""),n}function qr(n,t,e,r){return!!(t&&t.has(r)||n&&n.has(e))}function Hr(n,t,e=">"){let r,s="";for(let o=t;o<n.length;o++){let i=n[o];if(r)i===r&&(r="");else if(i==='"'||i==="'")r=i;else if(i===e[0])if(e[1]){if(n[o+1]===e[1])return{data:s,index:o}}else return{data:s,index:o};else i==="	"&&(i=" ");s+=i}}function $e(n,t,e,r){const s=n.indexOf(t,e);if(s===-1)throw new Error(r);return s+t.length-1}function vt(n,t,e,r=">"){const s=Hr(n,t+1,r);if(!s)return;let o=s.data;const i=s.index,d=o.search(/\s/);let l=o,u=!0;d!==-1&&(l=o.substring(0,d),o=o.substring(d+1).trimStart());const y=l;if(e){const g=l.indexOf(":");g!==-1&&(l=l.substr(g+1),u=l!==s.data.substr(g+1))}return{tagName:l,tagExp:o,closeIndex:i,attrExpPresent:u,rawTagName:y}}function Wr(n,t,e){const r=e;let s=1;for(;e<n.length;e++)if(n[e]==="<")if(n[e+1]==="/"){const o=$e(n,">",e,`${t} is not closed`);if(n.substring(e+2,o).trim()===t&&(s--,s===0))return{tagContent:n.substring(r,e),i:o};e=o}else if(n[e+1]==="?")e=$e(n,"?>",e+1,"StopNode is not closed.");else if(n.substr(e+1,3)==="!--")e=$e(n,"-->",e+3,"StopNode is not closed.");else if(n.substr(e+1,2)==="![")e=$e(n,"]]>",e,"StopNode is not closed.")-2;else{const o=vt(n,e,">");o&&((o&&o.tagName)===t&&o.tagExp[o.tagExp.length-1]!=="/"&&s++,e=o.closeIndex)}}function bt(n,t,e){if(t&&typeof n=="string"){const r=n.trim();return r==="true"?!0:r==="false"?!1:Cr(n,e)}else return pr(n)?n:""}const ft=Ge.getMetaDataSymbol();function Xr(n,t){return qt(n,t)}function qt(n,t,e){let r;const s={};for(let o=0;o<n.length;o++){const i=n[o],d=Kr(i);let l="";if(e===void 0?l=d:l=e+"."+d,d===t.textNodeName)r===void 0?r=i[d]:r+=""+i[d];else{if(d===void 0)continue;if(i[d]){let u=qt(i[d],t,l);const y=Qr(u,t);i[ft]!==void 0&&(u[ft]=i[ft]),i[":@"]?Zr(u,i[":@"],l,t):Object.keys(u).length===1&&u[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?u=u[t.textNodeName]:Object.keys(u).length===0&&(t.alwaysCreateTextNode?u[t.textNodeName]="":u=""),s[d]!==void 0&&s.hasOwnProperty(d)?(Array.isArray(s[d])||(s[d]=[s[d]]),s[d].push(u)):t.isArray(d,l,y)?s[d]=[u]:s[d]=u}}}return typeof r=="string"?r.length>0&&(s[t.textNodeName]=r):r!==void 0&&(s[t.textNodeName]=r),s}function Kr(n){const t=Object.keys(n);for(let e=0;e<t.length;e++){const r=t[e];if(r!==":@")return r}}function Zr(n,t,e,r){if(t){const s=Object.keys(t),o=s.length;for(let i=0;i<o;i++){const d=s[i];r.isArray(d,e+"."+d,!0,!0)?n[d]=[t[d]]:n[d]=t[d]}}}function Qr(n,t){const{textNodeName:e}=t,r=Object.keys(n).length;return!!(r===0||r===1&&(n[e]||typeof n[e]=="boolean"||n[e]===0))}class Jr{constructor(t){this.externalEntities={},this.options=Ir(t)}parse(t,e){if(typeof t!="string"&&t.toString)t=t.toString();else if(typeof t!="string")throw new Error("XML data is accepted in String or Bytes[] form.");if(e){e===!0&&(e={});const o=hr(t,e);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}const r=new Vr(this.options);r.addExternalEntities(this.externalEntities);const s=r.parseXml(t);return this.options.preserveOrder||s===void 0?s:Xr(s,this.options)}addEntity(t,e){if(e.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(e==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=e}static getMetaDataSymbol(){return Ge.getMetaDataSymbol()}}var Dr=x(`<p class="uno-zcd1rv">This section is <b>required</b> before you can start uploading. You must select the series
					(manga/manhwa/manhua) that your chapters belong to. <br/> <br/> <b>Series Validator:</b> Enter a Weebdex series ID directly if you already know it. <br/> <br/> <b>Series Search:</b> Search for a series by name if you don't know the ID. <br/> <br/> Once a series is selected, you can proceed to group preparation and batch editing. <br/> <b>Chapter Dump Lookup</b> also becomes available to you, should there be a chapter dump available
					for the series.</p>`),es=x(`<p class="uno-zcd1rv">Register scanlation groups that will be assigned to your chapters. Groups must be
					registered here before they can be assigned in the Batch Edit section or manually on
					individual chapters. <br/> <br/> <b>Group Validator:</b> Enter a Weebdex group ID directly if you already know it. <br/> <b>Group Search:</b> Search for groups by name if you don't know the ID. <br/> <br/> You can register multiple groups. Once registered, they will appear in the list and can be
					removed if needed. Groups registered here become available for assignment to chapters.</p>`),ts=x(`<p class="uno-zcd1rv">Use batch editing to apply changes to multiple chapters at once using regex patterns or
						direct assignment. <br/> <br/> <b>Regex Extraction:</b> Extract titles, volumes, and chapter numbers from folder paths
						or chapter titles using regex patterns. The first capture group is used as the extracted
						value. <br/> <b>Direct Assignment:</b> Assign volumes, languages, and groups directly to chapters,
						optionally limited to a specific range. <br/> <br/> Batch operations will skip chapters that have been manually edited, preserving your custom
						changes. You can also manually edit individual chapters in the chapter list below.</p>`),ns=x(`<p class="uno-zcd1rv">You can manually edit individual chapter properties by clicking on them directly in the
						chapter list below. <br/> <br/> <b>Editable fields:</b> <br/> • <b>Title:</b> Click on the chapter title to edit it <br/> • <b>Volume:</b> Click on the volume number to edit it <br/> • <b>Chapter Number:</b> Click on the chapter number to edit it <br/> • <b>Language:</b> Use the dropdown to change the language <br/> • <b>Groups:</b> Click on groups to add, remove, or modify them <br/> • <b>Pages:</b> Click on a chapter to expand it and view/edit/remove individual pages <br/> <br/> Manual edits are preserved even when batch operations are applied. You can revert manual
						edits using the yellow undo button that appears next to edited fields.</p>`),rs=x('<div class="uno-dxjz78"><div class="uno-dxjz78"><div class="uno-rp89gc"><!> <h2 class="uno-2hnkag">Targeting Preparation (Required)</h2></div> <!> <!> <!></div> <div class="uno-dxjz78"><div class="uno-rp89gc"><!> <h2 class="uno-2hnkag">Group Preparation</h2></div> <!> <!></div> <div class="uno-dxjz78"><div class="uno-dxjz78"><div class="uno-rp89gc"><!> <h2 class="uno-87jryj">Batch Edit</h2></div> <!></div> <button type="button" class="uno-6s7sce">Start Upload</button> <div class="uno-dxjz78"><div class="uno-rp89gc"><!> <h2 class="uno-87jryj">Chapters</h2> <label class="uno-dsxd6g"><input type="checkbox" class="uno-gtaeaa"/> <span class="uno-i5d3fz">Show only chapters without groups</span></label> <label class="uno-dsxd6g"><input type="checkbox" class="uno-gtaeaa"/> <span class="uno-i5d3fz">Show only non-deleted chapters</span></label></div> <div class="uno-ovwqmg"></div></div></div></div>');function ss(n,t){Se(t,!0);const e=$t(mt);if(!e)throw new Error("TargetingPreparation must be used within a component that provides TargetingState context");let r=Ie(()=>e.seriesId),s=U(!1),o=U(!0),i=Ie(()=>{if(!a(s)&&!a(o))return e.chapterStates;let m=e.chapterStates;return a(s)&&(m=m.filter(C=>!C.associatedGroup.groupIds||C.associatedGroup.groupIds.length===0)),a(o)&&(m=m.filter(C=>!C.isDeleted)),m});async function d(m,C,R){let q=null,E=null,P=null;if(m.file.name.toLowerCase()==="comicinfo.xml")try{const O=await m.file.text(),se=new Jr({ignoreAttributes:!1,attributeNamePrefix:"@_",parseAttributeValue:!0,trimValues:!0}).parse(O);if(se.ComicInfo){const v=se.ComicInfo;v.Title&&(q=v.Title),v.Number!==void 0&&v.Number!==null&&(E=String(v.Number)),v.Volume!==void 0&&v.Volume!==null&&(P=String(v.Volume))}}catch(O){console.error("Failed to parse ComicInfo.xml:",O)}const X=C.map((O,ee)=>{const se=O.type===Be.CHAPTER_PAGE;return new kt(O.file.name,ee,O.file,Rt.NOT_STARTED,0,null,null,!se,O.type)});return new At(R,q??"",P,E,new pt,new ht,X,Ot.NOT_STARTED,0,null,null,new gt(R,R,[m,...C],[],0,0),!1,"en")}let l=[];Re(()=>{(async()=>{const m=t.selectedFolders.map(E=>E.path).sort();if(!(l.length!==m.length||l.some((E,P)=>E!==m[P]))&&l.length>0){const E=new Map;for(const I of e.chapterStates)I.originalFolderPath&&E.set(I.originalFolderPath,I);if(m.every(I=>E.has(I))){l=m;return}}const R=new Map;for(const E of e.chapterStates)E.originalFolderPath&&R.set(E.originalFolderPath,E);const q=await Promise.all(t.selectedFolders.map(async(E,P)=>{const I=R.get(E.path);if(I)return I;const X=E.files.filter(O=>O.type===Be.CHAPTER_DEFINITION_FILE);if(X.length===1){const O=E.files.filter(ee=>ee.type!==Be.CHAPTER_DEFINITION_FILE);return await d(X[0],O,E.path)}const ie=E.files.map((O,ee)=>{const se=O.type===Be.CHAPTER_PAGE;return new kt(O.file.name,ee,O.file,Rt.NOT_STARTED,0,null,null,!se,O.type)});return new At(E.path,E.name,null,P.toString(),new pt,new ht,ie,Ot.NOT_STARTED,0,null,null,null,!1,"en")}));e.chapterStates=q,l=m})()});function u(m){return[...m].sort((C,R)=>{const q=C.chapterVolume,E=R.chapterVolume;if(!(q===null&&E===null)){if(q===null)return 1;if(E===null)return-1;{const X=String(q).localeCompare(String(E),void 0,{numeric:!0,sensitivity:"base"});if(X!==0)return X}}const P=C.chapterNumber,I=R.chapterNumber;return P===null&&I===null?0:P===null?1:I===null?-1:String(P).localeCompare(String(I),void 0,{numeric:!0,sensitivity:"base"})})}Re(()=>{const m=u(e.chapterStates);for(let C=0;C<m.length;C++)if(m[C].originalFolderPath!==e.chapterStates[C].originalFolderPath){e.chapterStates=m;return}}),Re(()=>{e.seriesId!==null&&e.chapterStates.forEach(m=>{m.associatedSeries||(m.associatedSeries=new pt),m.associatedSeries.seriesId=e.seriesId??""})});var y=rs(),g=f(y),j=f(g),W=f(j);Ne(W,{title:"Targeting Preparation",position:"bottom",children:(m,C)=>{var R=Dr();w(m,R)},$$slots:{default:!0}}),he(2),p(j);var K=c(j,2);Dt(K,{});var G=c(K,2);un(G,{});var M=c(G,2);en(M,{}),p(g);var D=c(g,2),S=f(D),B=f(S);Ne(B,{title:"Group Preparation",position:"bottom",children:(m,C)=>{var R=es();w(m,R)},$$slots:{default:!0}}),he(2),p(S);var ae=c(S,2);cn(ae,{});var Q=c(ae,2);dn(Q,{}),p(D);var F=c(D,2),V=f(F),H=f(V),te=f(H);Ne(te,{title:"Batch Edit",position:"bottom",children:(m,C)=>{var R=ts();w(m,R)},$$slots:{default:!0}}),he(2),p(H);var L=c(H,2);lr(L,{get chapters(){return e.chapterStates},set chapters(m){e.chapterStates=m}}),p(V);var A=c(V,2);A.__click=function(...m){t.onDone?.apply(this,m)};var Z=c(A,2),le=f(Z),Y=f(le);Ne(Y,{title:"Manual Chapter Editing",position:"bottom",children:(m,C)=>{var R=ns();w(m,R)},$$slots:{default:!0}});var z=c(Y,4),N=f(z);_e(N),he(2),p(z);var b=c(z,2),$=f(b);_e($),he(2),p(b),p(le);var T=c(le,2);He(T,21,()=>a(i),We,(m,C,R)=>{const q=Ie(()=>e.chapterStates.findIndex(E=>E===a(C)));Zn(m,{index:R,get chapter(){return e.chapterStates[a(q)]},set chapter(E){e.chapterStates[a(q)]=E}})}),p(T),p(Z),p(F),p(y),de(()=>A.disabled=!a(r)),Ve(N,()=>a(s),m=>_(s,m)),Ve($,()=>a(o),m=>_(o,m)),w(n,y),Fe()}Pe(["click"]);var os=x('<span class="uno-57st91"></span>'),as=x('<span class="uno-wekq8j"></span>'),is=x('<span class="uno-vl9lsr"><!></span>'),ls=x('<span class="uno-ysln7w"></span>'),us=x('<div class="uno-7tlu5e"><span class="uno-ysln7w"></span> <span class="uno-w0z7mh"></span> <span class="uno-01bs70"> </span> <span class="uno-n4cnqc"> </span></div>'),cs=x('<div class="uno-pkltwb"><!> <!></div>'),ds=x('<div><button type="button" class="uno-63wdec"><!> <span class="uno-r67jyj"></span> <span class="uno-cfa50z"> </span> <span class="uno-2as1mj"> </span> <span class="uno-bwfsan"> </span></button> <!></div>');function Ht(n,t){Se(t,!0);let e=ge(t,"level",3,0),r=ge(t,"class",3,""),s=U(!1);function o(){i&&_(s,!a(s))}const i=t.folder.files.length>0||t.folder.folders.length>0,d=`${e()*5}px`;var l=ds(),u=f(l);u.__click=o;var y=f(u);{var g=Q=>{var F=is(),V=f(F);{var H=L=>{var A=os();w(L,A)},te=L=>{var A=as();w(L,A)};re(V,L=>{a(s)?L(H):L(te,!1)})}p(F),w(Q,F)},j=Q=>{var F=ls();w(Q,F)};re(y,Q=>{i?Q(g):Q(j,!1)})}var W=c(y,4),K=f(W,!0);p(W);var G=c(W,2),M=f(G);p(G);var D=c(G,2),S=f(D);p(D),p(u);var B=c(u,2);{var ae=Q=>{var F=cs(),V=f(F);He(V,17,()=>t.folder.folders,We,(te,L)=>{{let A=Ie(()=>e()+1);Ht(te,{get folder(){return a(L)},get level(){return a(A)}})}});var H=c(V,2);He(H,17,()=>t.folder.files,We,(te,L)=>{var A=us(),Z=c(f(A),4),le=f(Z,!0);p(Z);var Y=c(Z,2),z=f(Y);p(Y),p(A),de(N=>{qe(A,`padding-left: ${d};`),fe(le,a(L).file.name),fe(z,`${N??""} KB`)},[()=>(a(L).file.size/1024).toFixed(2)]),w(te,A)}),p(F),de(()=>qe(F,`margin-left: ${d};`)),w(Q,F)};re(B,Q=>{a(s)&&Q(ae)})}p(l),de(()=>{Te(l,1,Oe(["uno-0q6x3s",r()])),qe(u,`padding-left: ${d};`),u.disabled=!i,fe(K,t.folder.name||"Root"),fe(M,`L${t.folder.level??""}`),fe(S,`(${t.folder.files.length??""} file${t.folder.files.length!==1?"s":""}, ${t.folder.folders.length??""} folder${t.folder.folders.length!==1?"s":""})`)}),w(n,l),Fe()}Pe(["click"]);var ps=x(`<div><h2 class="uno-tuwa1l text-md"> </h2> <div class="uno-dby05x"><div class="uno-41oacz"><div><h3 class="uno-66ploz">Chapter Name Level</h3> <p class="uno-5ik2j2">This is the level at which folders will be grouped into chapters (the L numbering on the
					directory explorer). The folders at this level will be used to group together chapters.</p></div> <!></div> <div class="uno-41oacz"><div><h3 class="uno-66ploz">File Level</h3> <p class="uno-5ik2j2">This is the level at which files inside folders will be considered as being a part of the
					chapter (the L numbering on the directory explorer). Only files contained within folders
					at this level will be considered as being a part of the chapter.</p></div> <!></div></div> <div class="uno-41oacz"><div><h3 class="uno-66ploz">File Path Filter</h3> <p class="uno-5ik2j2">This is a regex filter that will be applied in addition to the file level selector. This is
				useful if you have multiple files at the same file level, but are only really interested in
				a subset of them.</p></div> <div class="uno-tf0zt3"><button type="button" class="uno-786krg">Set Example Exclusion Regex</button> <button type="button" class="uno-786krg">Set Example Inclusion Regex</button> <div class="uno-ahr0cj"><input type="checkbox" class="uno-mzfs6x"/> <label for="isRegexCaseSensitive" class="uno-5ik2j2">Case Sensitive</label></div></div> <input type="text" placeholder="Filter files by path regex..." class="uno-fzo9yc"/></div></div>`);function fs(n,t){Se(t,!0);let e=ge(t,"class",3,""),r=ge(t,"slicedFolders",15,null),s=Ie(()=>t.selectedFolder.depth),o=U("1"),i=U("1"),d=U(""),l=U(!1),u=U(!1);Re(()=>{if(!a(u)&&a(s)>0){const Y=a(s).toString();_(o,Y,!0),_(i,Y,!0),_(u,!0)}}),Re(()=>{a(o)&&a(i)&&parseInt(a(i))<parseInt(a(o))&&_(i,a(o),!0);const Y=y(parseInt(a(o)),t.selectedFolder),z=j(Y,a(d));z.sort((N,b)=>N.name.localeCompare(b.name)),r(z)});function y(Y,z){let N=[];for(const b of z.folders){if(b.level===Y){N.push(b);continue}b.level<Y&&N.push(...y(Y,b))}return N}function g(Y){const z=Y.files;let N=[];for(const b of Y.folders)N.push(...g(b));return[...z,...N]}function j(Y,z){let N=[];const b=z.trim();if(b===""){for(const T of Y){const m=g(T);m.length!==0&&N.push(new gt(T.name,T.path,m,[],T.level,0))}return N}const $=new RegExp(b,a(l)?"g":"gi");for(const T of Y){const C=g(T).filter(R=>$.test(R.path));C.length!==0&&N.push(new gt(T.name,T.path,C,[],T.level,0))}return N}function W(){_(d,"^(?!.*filename).*$")}function K(){_(d,"filename")}var G=ps(),M=f(G),D=f(M);p(M);var S=c(M,2),B=f(S),ae=c(f(B),2);{let Y=Ie(()=>Array.from({length:a(s)},(z,N)=>N+1).map(z=>z.toString()));et(ae,{get items(){return a(Y)},class:"uno-p2tdxo",get selectedItem(){return a(o)},set selectedItem(z){_(o,z,!0)}})}p(B);var Q=c(B,2),F=c(f(Q),2);{let Y=Ie(()=>Array.from({length:a(s)},(z,N)=>N+1).map(z=>z.toString()));et(F,{get items(){return a(Y)},class:"uno-p2tdxo",get selectedItem(){return a(i)},set selectedItem(z){_(i,z,!0)}})}p(Q),p(S);var V=c(S,2),H=c(f(V),2),te=f(H);te.__click=W;var L=c(te,2);L.__click=K;var A=c(L,2),Z=f(A);_e(Z),he(2),p(A),p(H);var le=c(H,2);_e(le),p(V),p(G),de(()=>{Te(G,1,Oe(["uno-p7gj2t",e()])),fe(D,`Vertical Slice Pane - ${a(s)??""}`)}),Ve(Z,()=>a(l),Y=>_(l,Y)),Ze(le,()=>a(d),Y=>_(d,Y)),w(n,G),Fe()}Pe(["click"]);var hs=x('<button class="uno-ib5962"><div class="uno-xqpedf"><p class="uno-9fhwl6"><span class="uno-kgt3zb">Path:</span> </p> <div class="uno-rgzzux"><p class="uno-9fhwl6"><span class="uno-kgt3zb">Name:</span> </p> <p class="uno-9fhwl6"><span class="uno-kgt3zb">Files:</span> </p></div></div> <input type="checkbox" class="uno-drnypz"/></button>');function gs(n,t){Se(t,!0);let e=ge(t,"selectedSlicedFolder",15,null);function r(){e(e().isSelected=!e().isSelected,!0)}var s=hs();s.__click=r;var o=f(s),i=f(o),d=c(f(i));p(i);var l=c(i,2),u=f(l),y=c(f(u));p(u);var g=c(u,2),j=c(f(g));p(g),p(l),p(o);var W=c(o,2);_e(W),p(s),de(()=>{fe(d,` ${e().folder.path??""}`),fe(y,` ${e().folder.name??""}`),fe(j,` ${e().folder.files.length??""}`)}),Ve(W,()=>e().isSelected,K=>e(e().isSelected=K,!0)),w(n,s),Fe()}Pe(["click"]);var vs=x("<div></div>");function bs(n,t){Se(t,!0);let e=ge(t,"class",3,""),r=ge(t,"selectedSlicedFolders",31,()=>we([]));Re(()=>{r(t.slicedFolders.map(o=>({folder:o,isSelected:!0})))});var s=vs();He(s,21,r,We,(o,i,d)=>{gs(o,{get selectedSlicedFolder(){return r()[d]},set selectedSlicedFolder(l){r(r()[d]=l,!0)}})}),p(s),de(()=>Te(s,1,Oe(["uno-c09693",e()]))),w(n,s),Fe()}var ms=x('<div><h2 class="uno-big2dz text-md"> </h2> <!></div> <button type="button" class="uno-4mp1rf">Continue to Editor</button>',1),ys=x('<div><h1 class="uno-5gcp3l">Vertical Slicer</h1> <div class="uno-0l5rnf"><div><h2 class="uno-u2fo5v text-md">Directory Explorer</h2></div> <div class="uno-uwenez"></div> <div class="uno-7k8lj1"><h2 class="uno-big2dz text-md">Slicer</h2></div></div> <div class="uno-0402h6"><div class="uno-z8ysy7"><!></div> <button type="button" class="uno-1es7ju group" aria-label="Resize panels"><div class="uno-gtkyu2"><div class="uno-amtufd"></div> <div class="uno-amtufd"></div> <div class="uno-amtufd"></div></div></button> <div class="uno-w96zyv"><!></div></div> <!></div>');function _s(n,t){Se(t,!0);let e=ge(t,"finalizedFolderSelection",15,null),r=ge(t,"class",3,""),s=U(null),o=U(we([])),i=Ie(()=>a(o).filter(L=>L.isSelected)),d=Ie(()=>tn(t.selectedFiles??[])),l=U(null),u=U(!1),y=U(20);function g(){e(a(i).map(L=>L.folder)),t.onDone()}function j(L){_(u,!0)}function W(L){if(!a(u)||!a(l))return;const A=a(l).getBoundingClientRect(),Z=(L.clientX-A.left)/A.width*100;_(y,Math.max(20,Math.min(80,Z)),!0)}function K(){_(u,!1)}Re(()=>{if(a(u))return document.addEventListener("mousemove",W),document.addEventListener("mouseup",K),document.body.style.cursor="col-resize",document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",K),document.body.style.cursor="",document.body.style.userSelect=""}});var G=ys(),M=c(f(G),2),D=f(M);he(4),p(M);var S=c(M,2),B=f(S),ae=f(B);Ht(ae,{get folder(){return a(d)}}),p(B);var Q=c(B,2);Q.__mousedown=j;var F=c(Q,2),V=f(F);fs(V,{get selectedFolder(){return a(d)},get slicedFolders(){return a(s)},set slicedFolders(L){_(s,L,!0)}}),p(F),p(S),tt(S,L=>_(l,L),()=>a(l));var H=c(S,2);{var te=L=>{var A=ms(),Z=xe(A),le=f(Z),Y=f(le);p(le);var z=c(le,2);bs(z,{get slicedFolders(){return a(s)},class:"uno-xmletc",get selectedSlicedFolders(){return a(o)},set selectedSlicedFolders(b){_(o,b,!0)}}),p(Z);var N=c(Z,2);N.__click=g,de(()=>{fe(Y,`Vertical Slice Preview (${a(i).length??""}
				selected)`),N.disabled=a(i).length===0}),w(L,A)};re(H,L=>{a(s)&&L(te)})}p(G),de(()=>{Te(G,1,`uno-xxsekz ${r()??""}`),qe(D,`width: ${a(y)??""}%;`),qe(B,`width: ${a(y)??""}%;`)}),w(n,G),Fe()}Pe(["mousedown","click"]);var Es=x(`<p>Upload completed successfully</p> <p>You can click on any of the step tabs above to navigate to it. But you'll most likely just be
			uploading another manga, meaning you'll navigate to "Pick Folder".</p>`,1),ws=x('<div class="uno-r204ub"><div class="uno-kd0tpq"><h1 class="uno-oq6hfo">Uploader Improved</h1> <div class="uno-b6vj60"><button type="button" class="uno-affps4">Guided Mode</button> <button type="button" class="uno-affps4">Chapter Editor</button> <!></div></div> <a target="_blank" class="uno-io1u0r">Tutorial & Docs</a> <!> <div class="uno-l3b4kf"><button type="button">Pick Folder</button> <div class="uno-57hmfs"></div> <button type="button">Select Folders</button> <div class="uno-57hmfs"></div> <button type="button">Edit Chapters</button> <div class="uno-57hmfs"></div> <button type="button">Upload</button> <div class="uno-57hmfs"></div> <button type="button">Finished</button></div> <!></div>');function Ls(n,t){Se(t,!0);let e=U(null),r=U(null);Pt(gn,new hn),Pt(mt,new rn);var s=(N=>(N.PICKING_FOLDER="PICKING_FOLDER",N.SELECTING_FOLDERS="SELECTING_FOLDERS",N.EDITING_CHAPTERS="EDITING_CHAPTERS",N.UPLOADING="UPLOADING",N.FINISHED="FINISHED",N))(s||{});let o=U(!1),i=U("PICKING_FOLDER"),d=Ie(()=>a(i)==="UPLOADING"&&a(o)),l=Ie(()=>a(i)!=="UPLOADING"&&a(i)!=="EDITING_CHAPTERS");function u(N){a(e)&&_(i,N,!0)}function y(){_(i,"SELECTING_FOLDERS")}function g(){_(i,"EDITING_CHAPTERS")}function j(){_(i,"UPLOADING")}function W(N){N&&_(i,"FINISHED")}var K=ws(),G=f(K),M=c(f(G),2),D=f(M);D.__click=()=>Vt(ct("/guided"));var S=c(D,2);S.__click=()=>Vt(ct("/chapter-editor"));var B=c(S,2);nn(B,{}),p(M),p(G);var ae=c(G,2),Q=c(ae,2);{var F=N=>{sn(N,{})};re(Q,N=>{a(l)&&N(F)})}var V=c(Q,2),H=f(V);H.__click=()=>u(s.PICKING_FOLDER);var te=c(H,4);te.__click=()=>u(s.SELECTING_FOLDERS);var L=c(te,4);L.__click=()=>u(s.EDITING_CHAPTERS);var A=c(L,4);A.__click=()=>u(s.UPLOADING);var Z=c(A,4);Z.disabled=!0,p(V);var le=c(V,2);{var Y=N=>{Cn(N,{onDone:y,class:"uno-r3xq7g",get selectedFiles(){return a(e)},set selectedFiles(b){_(e,b,!0)}})},z=N=>{var b=je(),$=xe(b);{var T=C=>{_s(C,{onDone:g,get selectedFiles(){return a(e)},get finalizedFolderSelection(){return a(r)},set finalizedFolderSelection(R){_(r,R,!0)}})},m=C=>{var R=je(),q=xe(R);{var E=I=>{ss(I,{get selectedFolders(){return a(r)},onDone:j})},P=I=>{var X=je(),ie=xe(X);{var O=se=>{pn(se,{onDone:W,get busy(){return a(o)},set busy(v){_(o,v,!0)}})},ee=se=>{var v=je(),k=xe(v);{var J=ve=>{var Le=Es();he(2),w(ve,Le)};re(k,ve=>{a(i)===s.FINISHED&&ve(J)},!0)}w(se,v)};re(ie,se=>{a(i)===s.UPLOADING?se(O):se(ee,!1)},!0)}w(I,X)};re(q,I=>{a(i)===s.EDITING_CHAPTERS&&a(r)?I(E):I(P,!1)},!0)}w(C,R)};re($,C=>{a(i)===s.SELECTING_FOLDERS?C(T):C(m,!1)},!0)}w(N,b)};re(le,N=>{a(i)===s.PICKING_FOLDER?N(Y):N(z,!1)})}p(K),de(N=>{Ye(ae,"href",N),Te(H,1,Oe({"uno-mpkkic":!0,"uno-ywbfsm":a(i)!==s.PICKING_FOLDER,"uno-djdziu":a(i)===s.PICKING_FOLDER})),H.disabled=a(d),Te(te,1,Oe({"uno-mpkkic":!0,"uno-ywbfsm":a(i)!==s.SELECTING_FOLDERS,"uno-djdziu":a(i)===s.SELECTING_FOLDERS})),te.disabled=!a(e)||a(d),Te(L,1,Oe({"uno-mpkkic":!0,"uno-ywbfsm":a(i)!==s.EDITING_CHAPTERS,"uno-djdziu":a(i)===s.EDITING_CHAPTERS})),L.disabled=!a(r)||a(d),Te(A,1,Oe({"uno-mpkkic":!0,"uno-ywbfsm":a(i)!==s.UPLOADING,"uno-djdziu":a(i)===s.UPLOADING})),A.disabled=!a(r)||a(d),Te(Z,1,Oe({"uno-mpkkic":!0,"uno-ywbfsm":a(i)!==s.FINISHED,"uno-djdziu":a(i)===s.FINISHED}))},[()=>ct("/docs")]),w(n,K),Fe()}Pe(["click"]);export{Ls as component,js as universal};
